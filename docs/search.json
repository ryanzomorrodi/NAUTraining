[
  {
    "objectID": "notes.html",
    "href": "notes.html",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "",
    "text": "When conducting population research, almost everything has a spatial aspect to it. We often may not have access to this spatial resolution, but for those data that we do, it is important to incorporate spatial techniques to explore our data.\nExploring our data through a spatial lense allows us to answer questions like:\n\nHow does a variable vary by region?\n\nIs there a relationship between variables by region?\n\nHow many facilities are within a region?\n\nHow far is the nearest facility?\n\nDoes proximity to a facility have a relationship with another variable?\n\nHow has a variable changed over time?\n\nBefore you participate in this training, think about what questions you want to explore.\n\n\n\nThe following training was created with the intention to get you up to speed as quick as possible. It is very possible we left something out that may be important to you. For more extensive reading about geocomputation using R, we recommend Spatial Data Science and Geocomputation with R.\nIf you are looking to learn how to use the R and the tidyverse for data science, we recommend R for Data Science. For more information about how R the programming language works, we recommend Advanced R.\n\n\n\nSince R is open source, anyone can make a package! It also means that there are lots of useful packages to pick from. The following are a non-exhaustive list of some the packages that we use most often. We encourage you to explore beyond this list. For this training, we will only be using these packages and their dependencies.\n\nsf - The primary package for vector-based geospatial computation within R. One of the most useful aspects about sf is that it allows you to interact with the attribute tables of spatial objects in much the very same ways you would a tibble or data.table.\nstars - One of two main modern packages for raster-based geospatial data. Also offers the ability the work with multidimensional data. Made by the same people who made sf, and is therefore very well integrated.\ntidyverse - A collection of data science related packages that is fairly ubiquitious throughout R. It is developed by Posit who make RStudio.\ntigris - A package that allows users to download Census geometries using the Census API. Often, we rely on Census boundaries, so tigris makes getting that data easier and more repeatable.\ntidycensus - A package that allows users to download Census variables and tables using the Census API. Can be really useful for the tedious process of extracting census variables. In this training, we use it to make a dot density map.\nleaflet - An R interface for the Leaflet open-source JavaScript library that allows R users to easily construct interactive maps.\ncowplot - An add-on package to ggplot2 (from the tidyverse) that aids with making “publication-ready figures”. Its developer, Claus O. Wilke, has a great book on data visualization called Fundamentals of Data Visualization, where he uses cowplot extensively.\ncartogram - A package to create cartograms. Simple as that.\n\nUse the following command to install the above packages.\n\ninstall.packages(c(\"sf\", \"stars\", \"tidyverse\", \"tigris\", \"leaflet\", \"cowplot\", \"cartogram\"))\n\n\n\n\nShapefiles are the most ubiquitous geospatial vector format. They were developed by ESRI in the early 1990s and have aged since. Although they still widely used, they have several limitations\n\nMaximum size is 2 GB\nMaximum length of field names is 10 characters\nMaximum number of fields is 255\nNo support for NULL values\n\nThey, counterintuitively, are made up of several files of which only three are mandatory.\n\n.shp – stores feature geometry\n\n.shx – stores the positional index of the feature geometry\n\n.dbf – stores the attribute table for the geometry\n\nFile geodatabases are a collection of a files in a folder that can store vector, raster, and even non-spatial data. A single file geodatabase can store over 2 billion features or tables. They are great for sharing data with collaborators who use ESRI products.\nField names are limited to 64 characters. The default maximum size of datasets in file geodatabases is 1 TB, but you can increase the maximum size to 256 TB. Older versions of the sf drivers may not be able to write to a file geodatabase.\nGeoJSONs are an plain-text open standard format for spatial data. Since a geoJSON is a single file, it may be easier to send to others. The performance of working off a geoJSON is pretty poor, but this doesn’t matter for R users, since all spatial data will be converted into an sf object.\nGeoPackages are open, non-proprietary, SQLite 3 databases that are specifically designed for spatial data. They were defined by the Open Geospatial Consortium (OGC) and were designed to be both lightweight and contained within a single file.\n\n\n\n\n\n\n\n\n\n\n\nShapefile\nGeodatabase\nGeojson\nGeopackage\n\n\n\n\nSpeed *\nMedium\nFast\nSlow\nFast\n\n\nSize limit\n2 GB\n256 TB\nNo limit\n140 TB\n\n\nFiles\nAt least 3\nMany\n1\n1\n\n\nMultiple Features\nNo\nYes\nNo\nYes\n\n\nOther Notes\nCommon\nProprietary\nPlain Text\nOpen\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nRegardless of data type, all data will be converted to and sf object and thus, the relative speed of these data formats largely doesn’t matter for R."
  },
  {
    "objectID": "notes.html#setting-the-stage",
    "href": "notes.html#setting-the-stage",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "",
    "text": "When conducting population research, almost everything has a spatial aspect to it. We often may not have access to this spatial resolution, but for those data that we do, it is important to incorporate spatial techniques to explore our data.\nExploring our data through a spatial lense allows us to answer questions like:\n\nHow does a variable vary by region?\n\nIs there a relationship between variables by region?\n\nHow many facilities are within a region?\n\nHow far is the nearest facility?\n\nDoes proximity to a facility have a relationship with another variable?\n\nHow has a variable changed over time?\n\nBefore you participate in this training, think about what questions you want to explore.\n\n\n\nThe following training was created with the intention to get you up to speed as quick as possible. It is very possible we left something out that may be important to you. For more extensive reading about geocomputation using R, we recommend Spatial Data Science and Geocomputation with R.\nIf you are looking to learn how to use the R and the tidyverse for data science, we recommend R for Data Science. For more information about how R the programming language works, we recommend Advanced R.\n\n\n\nSince R is open source, anyone can make a package! It also means that there are lots of useful packages to pick from. The following are a non-exhaustive list of some the packages that we use most often. We encourage you to explore beyond this list. For this training, we will only be using these packages and their dependencies.\n\nsf - The primary package for vector-based geospatial computation within R. One of the most useful aspects about sf is that it allows you to interact with the attribute tables of spatial objects in much the very same ways you would a tibble or data.table.\nstars - One of two main modern packages for raster-based geospatial data. Also offers the ability the work with multidimensional data. Made by the same people who made sf, and is therefore very well integrated.\ntidyverse - A collection of data science related packages that is fairly ubiquitious throughout R. It is developed by Posit who make RStudio.\ntigris - A package that allows users to download Census geometries using the Census API. Often, we rely on Census boundaries, so tigris makes getting that data easier and more repeatable.\ntidycensus - A package that allows users to download Census variables and tables using the Census API. Can be really useful for the tedious process of extracting census variables. In this training, we use it to make a dot density map.\nleaflet - An R interface for the Leaflet open-source JavaScript library that allows R users to easily construct interactive maps.\ncowplot - An add-on package to ggplot2 (from the tidyverse) that aids with making “publication-ready figures”. Its developer, Claus O. Wilke, has a great book on data visualization called Fundamentals of Data Visualization, where he uses cowplot extensively.\ncartogram - A package to create cartograms. Simple as that.\n\nUse the following command to install the above packages.\n\ninstall.packages(c(\"sf\", \"stars\", \"tidyverse\", \"tigris\", \"leaflet\", \"cowplot\", \"cartogram\"))\n\n\n\n\nShapefiles are the most ubiquitous geospatial vector format. They were developed by ESRI in the early 1990s and have aged since. Although they still widely used, they have several limitations\n\nMaximum size is 2 GB\nMaximum length of field names is 10 characters\nMaximum number of fields is 255\nNo support for NULL values\n\nThey, counterintuitively, are made up of several files of which only three are mandatory.\n\n.shp – stores feature geometry\n\n.shx – stores the positional index of the feature geometry\n\n.dbf – stores the attribute table for the geometry\n\nFile geodatabases are a collection of a files in a folder that can store vector, raster, and even non-spatial data. A single file geodatabase can store over 2 billion features or tables. They are great for sharing data with collaborators who use ESRI products.\nField names are limited to 64 characters. The default maximum size of datasets in file geodatabases is 1 TB, but you can increase the maximum size to 256 TB. Older versions of the sf drivers may not be able to write to a file geodatabase.\nGeoJSONs are an plain-text open standard format for spatial data. Since a geoJSON is a single file, it may be easier to send to others. The performance of working off a geoJSON is pretty poor, but this doesn’t matter for R users, since all spatial data will be converted into an sf object.\nGeoPackages are open, non-proprietary, SQLite 3 databases that are specifically designed for spatial data. They were defined by the Open Geospatial Consortium (OGC) and were designed to be both lightweight and contained within a single file.\n\n\n\n\n\n\n\n\n\n\n\nShapefile\nGeodatabase\nGeojson\nGeopackage\n\n\n\n\nSpeed *\nMedium\nFast\nSlow\nFast\n\n\nSize limit\n2 GB\n256 TB\nNo limit\n140 TB\n\n\nFiles\nAt least 3\nMany\n1\n1\n\n\nMultiple Features\nNo\nYes\nNo\nYes\n\n\nOther Notes\nCommon\nProprietary\nPlain Text\nOpen\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nRegardless of data type, all data will be converted to and sf object and thus, the relative speed of these data formats largely doesn’t matter for R."
  },
  {
    "objectID": "notes.html#input-and-output-of-data",
    "href": "notes.html#input-and-output-of-data",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Input and Output of Data",
    "text": "Input and Output of Data\n\nlibrary(tidyverse)\n\n\nReading Data\nThe sf package is able to interface with several different drivers and hence is able to read practically any geometry. st_drivers() will print out all drivers available within your installation.\nUse st_read to read in a dataset. This will generate an sf object, which is just a data.frame or tibble with a geometry list-column.\n\nlibrary(sf)\n\nAZ_Hospitals &lt;- st_read(\"data/AZ/hospitals\") # or \"data/AZ/hospitals/hospitals.shp\"\nAZ_Hospitals\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOBJECTID\nOBJECTID_1\nRUN_DATE\nsource\nBUREAU\nFACID\nFACILITY_N\nLICENSE_NU\nLICENSE_EF\nLICENSE_EX\nMEDICARE_I\nMEDICARE_1\nMEDICARE_2\nTELEPHONE\nFACILITY_T\nTYPE\nSUBTYPE\nCATEGORY\nICON_CATEG\nMEDICARE_T\nLICENSE_TY\nLICENSE_SU\nCAPACITY\nADDRESS\nCITY\nZIP\nCOUNTY\nOPERATION_\nX_Is_Publi\nHOSPITAL_G\nKeyID\nADHSCODE\nN_AddressT\nN_LocatorT\nN_ADDRESS\nN_ADDR2\nN_CITY\nN_COUNTY\nN_FULLADDR\nN_LAT\nN_LON\nN_STATE\nN_ZIP\nN_ZIP4\nN_BLOCK\nRESERVATIO\nRESERV_ID\nR_METHOD\noPCA\noPCA_ID\nP_Method\nP_Reliable\nSOURCE_VW\nCASELOAD\ngeometry\n\n\n\n\n1\n2822\n2024-05-06\nASPEN\nMED\nAZTH00002\nBANNER- UNIVERSITY MEDICAL CENTER PHOENIX\nNA\nNA\nNA\n039802\nNA\nNA\n(602)239-2716\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n1441 N 12TH\nPHOENIX\n85006\nMARICOPA\nACTIVE\nYes\nNA\nAZTH00002\nA\nAS0\nCENTRUS-TOMTOM\n1441 N 12TH ST\nNA\nPHOENIX\nMARICOPA COUNTY\n1441 N 12TH ST , PHOENIX, AZ 85006-2837\n33.46410\n-112.0562\nAZ\n85006\n2837\n4.013113e+13\nNA\nNA\nNA\nCENTRAL CITY VILLAGE\n39\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\nPOINT (-112.0562 33.46411)\n\n\n2\n2823\n2024-05-06\nASPEN\nMED\nAZTH00003\nBANNER UNIVERSITY MEDICAL CTR AT THE AZ HEALTH SC\nNA\nNA\nNA\n039800\nNA\nNA\n(520)694-0111\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n1501 NORTH CAMPBELL AVENUE\nTUCSON\n85724\nPIMA\nACTIVE\nYes\nNA\nAZTH00003\nA\nAS0\nCENTRUS-TOMTOM\n1501 N CAMPBELL AVE\nNA\nTUCSON\nPIMA COUNTY\n1501 N CAMPBELL AVE , TUCSON, AZ 85724-0001\n32.24080\n-110.9443\nAZ\n85724\n1\n4.019002e+13\nNA\nNA\nNA\nTUCSON CENTRAL\n107\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\nPOINT (-110.9443 32.24081)\n\n\n3\n2824\n2024-05-06\nASPEN\nMED\nAZTH00004\nMAYO CLINIC HOSPITAL\nNA\nNA\nNA\n039801\nNA\nNA\n(480)342-1900\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n5777 EAST MAYO BOULEVARD\nPHOENIX\n85054\nMARICOPA\nACTIVE\nYes\nNA\nAZTH00004\nA\nAS0\nCENTRUS-TOMTOM\n5777 E MAYO BLVD\nNA\nPHOENIX\nMARICOPA COUNTY\n5777 E MAYO BLVD , PHOENIX, AZ 85054-4502\n33.66316\n-111.9557\nAZ\n85054\n4502\n4.013615e+13\nNA\nNA\nNA\nDESERT VIEW VILLAGE\n30\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\nPOINT (-111.9557 33.66317)\n\n\n4\n3774\n2024-05-06\nASPEN\nMED\nBH7347\nVIA LINDA BEHAVIORAL HOSPITAL\nSH11520\n2023-03-01\n2025-02-28\n034040\nNA\nNA\n(480)476-7000\n12\nHOSPITAL\nPSYCHIATRIC\nHOSPITAL\nHOSPITAL\nHOSPITAL - PSYCHIATRIC\nHOSPITAL\nHOSPITAL - SPECIAL\n120\n9160 EAST HORSESHOE RD\nSCOTTSDALE\n85258\nMARICOPA\nACTIVE\nYes\nNA\nBH7347\nA\nAS0\nCENTRUS-TOMTOM\n9160 E HORSESHOE RD\nNA\nSCOTTSDALE\nMARICOPA COUNTY\n9160 E HORSESHOE RD , SCOTTSDALE, AZ 85258-4666\n33.56670\n-111.8840\nAZ\n85258\n4666\n4.013941e+13\nSalt River Reservation\n3340F\nCoordinates\nSALT RIVER PIMA-MARICOPA INDIAN COMMUNITY\n62\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\nPOINT (-111.884 33.56671)\n\n\n5\n4893\n2024-05-06\nASPEN\nMED\nMED0198\nCANYON VISTA MEDICAL CENTER\nH7130\n2020-02-18\n2024-12-27\n030043\nNA\nNA\n(520)263-2220\n11\nHOSPITAL\nSHORT TERM\nHOSPITAL\nHOSPITAL\nHOSPITAL - SHORT TERM\nHOSPITAL\nHOSPITAL - GENERAL\n100\n5700 EAST HIGHWAY 90\nSIERRA VISTA\n85635\nCOCHISE\nACTIVE\nYes\nNA\nMED0198\nA\nAS0\nCENTRUS-TOMTOM\n5700 E HIGHWAY 90\nNA\nSIERRA VISTA\nCOCHISE COUNTY\n5700 E HIGHWAY 90 , SIERRA VISTA, AZ 85635-9110\n31.55449\n-110.2319\nAZ\n85635\n9110\n4.003002e+13\nNA\nNA\nNA\nSIERRA VISTA\n123\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\nPOINT (-110.2319 31.5545)\n\n\n\n\n\nIf you are reading from a file format with multiple layers, specify the layer.\n\nAZ_StatAreas &lt;- st_read(\"data/AZ/statAreas.gdb\", layer = \"statAreas\")\nAZ_StatAreas\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCSA_ID\nCSA_NAME\nAREA_SQMILE\nPOP2020\nShape__Area\nShape__Length\nSHAPE\n\n\n\n\n1\nColorado City\n5071.6400\n8017\n141389179634\n1890568.8\nMULTIPOLYGON (((-113.982 37…\n\n\n10\nWilliams\n4607.9690\n10528\n128462767671\n2396775.1\nMULTIPOLYGON (((-112.5724 3…\n\n\n100\nSan Luis\n117.6636\n37668\n3280270845\n307260.4\nMULTIPOLYGON (((-114.625 32…\n\n\n101\nGold Canyon\n354.4739\n15095\n9882163593\n502534.3\nMULTIPOLYGON (((-111.04 33….\n\n\n102\nFlorence\n560.2777\n37684\n15619641198\n848217.8\nMULTIPOLYGON (((-111.0667 3…\n\n\n\n\n\nYou can also specify your output to be a tibble.\n\nAZ_WICVendors &lt;- st_read(\"data/AZ/WICVendors.geojson\", as_tibble = TRUE)\nAZ_WICVendors\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOBJECTID\nVENDOR_NAME\nADDRESS\nCITY\nSTATE\nZIPCODE\nPHONE\nSTREET_ADDRESS2\nFULLADDRESS\ngeometry\n\n\n\n\n1\nFRY’S FOOD AND DRUG STORE #43\n2700 W. BASELINE ROAD\nTEMPE\nARIZONA\n85282\n6024381756\nNA\n2700 W BASELINE RD , TEMPE, AZ 85283-1072\nPOINT (-111.9769 33.37834)\n\n\n2\nFRY’S FOOD AND DRUG STORE #2\n3036 E. THOMAS ROAD\nPHOENIX\nARIZONA\n85016\n6024689155\nNA\n3036 E THOMAS RD , PHOENIX, AZ 85016-8014\nPOINT (-112.0163 33.48059)\n\n\n3\nFRY’S FOOD AND DRUG STORE #22\n1835 E. GUADALUPE\nTEMPE\nARIZONA\n85283\n4808387023\nNA\n1835 E GUADALUPE RD , TEMPE, AZ 85283-3277\nPOINT (-111.9099 33.36364)\n\n\n4\nFRY’S FOOD AND DRUG STORE #103\n1100 S HIGHWAY 89- 260\nCOTTONWOOD\nARIZONA\n86326\n9286349611\nBUILDING A\n1100 E STAGE WAY BLDG A 89 260, COTTONWOOD, AZ 86326\nPOINT (-112.0143 34.70761)\n\n\n5\nFRY’S FOOD AND DRUG STORE #42\n9401 E. 22ND STREET\nTUCSON\nARIZONA\n85710\n5207218575\nNA\n9401 E 22ND ST , TUCSON, AZ 85710-6586\nPOINT (-110.7922 32.20645)\n\n\n\n\n\nYou can even read from a url.\n\nAZ_UCCs &lt;- st_read(\"https://services1.arcgis.com/mpVYz37anSdrK4d8/arcgis/rest/services/UrgentCareLocs/FeatureServer/0/query?outFields=*&where=1%3D1&f=geojson\")\nAZ_UCCs\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOBJECTID_1\nOBJECTID\nRECID\nNAME\nADDRESS\nCITY\nZIP\nTELEPHONE\nLatitude\nLongitude\nobjID\nKeyID\nADHSCODE\nN_AddressType\nN_LocatorType\nN_ADDRESS\nN_ADDR2\nN_CITY\nN_COUNTY\nN_FULLADDR\nN_LAT\nN_LON\nN_STATE\nN_ZIP\nN_ZIP4\nN_BLOCK\nRESERVATIO\nRESERV_ID\nR_METHOD\nPCA_NAME\nPCA_ID\nPCA_PCT\ngeometry\n\n\n\n\n1\n1\n1\nBANNER URGENT CARE\n35945 NORTH GARY ROAD\nSAN TAN VALLEY\n85143\n4808275750\n33.20571\n-111.5823\n1\n1\nA\nROOFTOP\nGOOGLE\n35945 North Gary Road\nNA\nSan Tan Valley\nPINAL COUNTY\n35945 N GARY RD , SAN TAN VALLEY, AZ 85143-5748\n33.20571\n-111.5823\nAZ\n85143\n5748\n4.021000e+13\nNA\nNA\nNA\nSAN TAN VALLEY\n92\n100\nPOINT (-111.5823 33.20571)\n\n\n2\n2\n2\nBANNER URGENT CARE\n21980 NORTH 83RD AVENUE\nPEORIA\n85383\n6234656375\n33.68333\n-112.2379\n2\n2\nA\nAS0\nCENTRUS-TOMTOM\n21980 N 83RD AVE\nNA\nPEORIA\nMARICOPA COUNTY\n21980 N 83RD AVE , PEORIA, AZ 85383-1850\n33.68333\n-112.2379\nAZ\n85383\n1850\n4.013614e+13\nNA\nNA\nNA\nPEORIA NORTH\n48\n100\nPOINT (-112.2379 33.68333)\n\n\n3\n3\n3\nSUMMIT HEALTHCARE URGENT CARE\n4951 SOUTH WHITE MOUNTAIN ROAD BUILDING A\nSHOW LOW\n85901\n9285323926\n34.20512\n-110.0204\n3\n3\nA\nAS0\nCENTRUS-TOMTOM\n4951 S WHITE MOUNTAIN RD BLDG A\nNA\nSHOW LOW\nNAVAJO COUNTY\n4951 S WHITE MOUNTAIN RD BLDG A , SHOW LOW, AZ 85901-7827\n34.20512\n-110.0204\nAZ\n85901\n7827\n4.017962e+13\nNA\nNA\nNA\nSHOW LOW\n15\n100\nPOINT (-110.0204 34.20512)\n\n\n4\n4\n4\nCARBON HEALTH\n1880 EAST TANGERINE, SUITE 100\nORO VALLEY\n85755\n5209007007\n32.42697\n-110.9438\n4\n4\nA\nAS0\nCENTRUS-TOMTOM\n1880 E TANGERINE RD STE 100\nNA\nORO VALLEY\nPIMA COUNTY\n1880 E TANGERINE RD STE 100 , ORO VALLEY, AZ 85755-6238\n32.42697\n-110.9438\nAZ\n85755\n6238\n4.019005e+13\nNA\nNA\nNA\nORO VALLEY\n100\n100\nPOINT (-110.9438 32.42697)\n\n\n5\n5\n5\nDIGNITY HEALTH URGENT CARE- GILBERT\n1501 NORTH GILBERT ROAD\nGILBERT\n85234\n4807283000\n33.37658\n-111.7884\n5\n5\nA\nAS0\nCENTRUS-TOMTOM\n1501 N GILBERT RD\nNA\nGILBERT\nMARICOPA COUNTY\n1501 N GILBERT RD , GILBERT, AZ 85234-2390\n33.37658\n-111.7884\nAZ\n85234\n2390\n4.013423e+13\nNA\nNA\nNA\nGILBERT NORTH\n74\n100\nPOINT (-111.7884 33.37659)\n\n\n\n\n\n\n\ntigris\nResearch within the United States is often done using Census geographies. Within R, these geometries are readily accessible through the tigris package. The tigris package provides several functions which utilize the Census API to download and import census geographies into R. (states(), counties(), tracts(), block_groups(), blocks(), etc.).\n\nlibrary(tigris)\n\nMI_TIGER_counties &lt;- counties(state = \"MI\", year = 2020)\nplot(st_geometry(MI_TIGER_counties))\n\n\n\n\n\n\n\n\n\n\nThe census offers two types of boundaries. TIGER/LINE boundaries are contiguous and may span over water, while cartographic boundaries are simplified representations of selected geographic areas that only span over land.\n\n\ncb = FALSE\n\nMI_counties &lt;- counties(state = \"MI\", year = 2020)\n\n\nplot(st_geometry(MI_counties))\n\n\n\n\n\n\n\n\n\ncb = TRUE\n\nMI_counties &lt;- counties(state = \"MI\", year = 2020, cb = TRUE)\n\n\nplot(st_geometry(MI_counties))\n\n\n\n\n\n\n\n\n\n\n\n\nWriting Data\nWriting data is just as easy as reading it. Use the st_write() function to write datasets. If you are having issues writing data, use st_drivers() to check the capabilities of your current drivers. Older drivers can not write geodatabases.\n\nst_write(AZ_Hospitals, \"data/AZ_Hospitals.shp\")\n# or\nst_write(AZ_StatAreas, \"data/file_path.gdb\", layer = \"layer_name\")"
  },
  {
    "objectID": "notes.html#visualizing-spatial-data",
    "href": "notes.html#visualizing-spatial-data",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Visualizing Spatial Data",
    "text": "Visualizing Spatial Data\n\nProjections\nIt is important to remember when making any 2 dimensional representation of a geographic area that the world is not flat. As a result, there are many different ways that we can represent the three dimensional space that our world inhabits within two dimensions. This problem is most pronounced when looking at larger areas.\nThe ways we transform three dimensional space into two dimensional representations are called projections. It is impossible to make a two dimensional map without introducing distortion to some aspect of the representation. However, many projections optimize for a specific aspect of a map (area, distance, angles, etc.).\nFor example, if we look at the 50 states, using the default projection (North American Datum of 1983), we can see that the US looks slightly different than we may be use to viewing it.\n\nUS_states &lt;- states(cb = TRUE, year = 2020) %&gt;%\n    filter(GEOID &lt; \"60\") %&gt;%\n    st_shift_longitude()\n\nplot(st_geometry(US_states))\n\n\n\n\n\n\n\n\n\n\nWe can check the projection of our data using st_crs().\n\nst_crs(US_states)\n\nCoordinate Reference System:\n  User input: NAD83 \n  wkt:\nGEOGCRS[\"NAD83\",\n    DATUM[\"North American Datum 1983\",\n        ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"latitude\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"longitude\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4269]]\n\n\nWe can transform our data into a different projection using st_transform().\nBeware that projections are often accurate for certain geographic regions. For example, if we transform the 50 state’s projection to USA Contiguous Albers Equal Area Conic (ESRI:102003), we can see that the lower 48 states look as we might expect, while the Alaska and Hawaii look quite off.\n\nUS_states &lt;- US_states %&gt;%\n    st_transform(\"ESRI:102003\")\n\nplot(st_geometry(US_states))\n\n\n\n\n\n\n\n\nWhen trying to map all 50 states, we recommend using the tigris function shift_geometry(), which will shift and rescale Alaska, and Hawaii (and Puerto Rico if you include it) for thematic mapping.\n\nUS_states &lt;- US_states %&gt;%\n    shift_geometry() \n\nggplot() +\n    geom_sf(data = US_states)\n\n\n\n\n\n\n\n\n\n\nplot\nThe easiest way to look at any geography is through the default plot() function. plot() is not super customizable and hence is not the primary way most visualize spatial data within R. By default it will plot up to 9 of the columns within the sf object. We can select just the geometry column of an sf object using the st_geometry() function.\n\nplot(st_geometry(AZ_StatAreas))\n\n\n\n\n\n\n\n\nYou can even add layers additonal layers to your plot using add = TRUE\n\nplot(st_geometry(AZ_StatAreas))\nplot(st_geometry(AZ_Hospitals), col = \"red\", pch = 19, cex = 0.5, add = TRUE)\n\n\n\n\n\n\n\n\n\n\nggplot2\nggplot2 is the predominant data visualization package within R. Thankfully, you can use all the same syntax that you may have learned through using ggplot2 for non-spatial data to create beautiful maps. Simply use the geom_sf() function and specify your data.\n\n\n\n\n\n\nNote\n\n\n\nIf you need more information about ggplot2, check out ggplot2: Elegant Graphics for Data Analysis\n\n\n\nlibrary(ggplot2)\n\nggplot() +\n    geom_sf(data = AZ_StatAreas) +\n    geom_sf(data = AZ_Hospitals, color = \"red\", size = 0.5)\n\n\n\n\n\n\n\n\n\n\nleaflet\nStatics maps are only one way to visualize spatial data. Often we may have data that we want an audience to be able to play around with and explore. For this, we have interactive maps. Within R, the most comprehensive interactive mapping functionality is provided within the leaflet package.\nleaflet can get quite complicated when you start adding options like - Popups/Labels - User controlled showing or hiding of layers - Custom markers - Custom legend text - Basemaps\nAs always, its important to think about whether that additional effort provides additional utility to the reader.\n\nlibrary(leaflet)\n\nUS_states &lt;- states(cb = TRUE, year = 2020) %&gt;%\n    filter(GEOID &lt; \"60\")  \n\nUS_interactive_map &lt;- leaflet(US_states) %&gt;%     \n    addProviderTiles(\"CartoDB.Positron\") %&gt;%     \n    addPolygons(\n        fillColor = \"seagreen\", \n        fillOpacity = 0.7,\n        color = \"black\", \n        weight = 0.5, \n        group = \"states\",\n        highlightOptions = highlightOptions(\n            color = \"Black\",\n            fillOpacity = 1,\n            bringToFront = T),\n        label = str_glue_data(US_states, \"&lt;strong&gt;{NAME}&lt;/strong&gt;&lt;br&gt;FIPS Code: {GEOID}\") %&gt;% \n                map(htmltools::HTML),\n    ) %&gt;%\n    setView(-98.5795, 39.8282, zoom = 3) \nUS_interactive_map"
  },
  {
    "objectID": "notes.html#different-map-types",
    "href": "notes.html#different-map-types",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Different Map Types",
    "text": "Different Map Types\nSo far we have cover how to make basic maps visualizing geometry, but often we will want to represent data values visually. The follow maps allow us to visualize data in various ways.\n\nChoropleths\nChoropleths vary color of geographic regions based on a variable of interest. They are the most common type of map used within geospatial visualizations and offer an easy way to visualize how a variable varies across geographic regions.\nWhen setting the fill of geographic regions, we use the following three functions\n\nscale_fill_distiller - for continuous data\nscale_fill_brewer - for discrete data (factors or strings)\nscale_fill_fermenter - for continuous data we would like to bin\n\n\nContinuous Scale\nBy default, ggplot will use a continuous scale to assign map variables onto colors.\n\nAZ_PLACES_hosp &lt;- st_read(\"data/pres/sample.geojson\", as_tibble = TRUE)\n\n\ncont_map &lt;- ggplot() + \n    geom_sf(data = AZ_PLACES_hosp, aes(fill = `Diabetes Adjusted Prevalence`)) +\n    scale_fill_distiller(palette = \"Blues\", direction = 1) +\n    labs(\n        title = \"Diabetes Prevalence among Arizona Counties\",\n        fill = \"Diabetes Adjusted Prevalence \\nAmong Adults &gt;=18\",\n    ) + \n    theme_void() \ncont_map\n\n\n\n\n\n\n\n\n\n\nQuantile Breaks\nFor readers, it is often difficult to identify a color value and associate it with its value on the scale. Thefore, it is often a good choice to bin values into discrete groups. There are many ways to conduct binning. One of the most ubiquitous is quantiles. Quantile maps are great for making comparisons because you they allow you to compare quantiles across variables. However, they can have the effect of grouping widely different values.\n\nquant_map &lt;- ggplot() + \n    geom_sf(\n        data = AZ_PLACES_hosp, \n        aes(fill = \n            fct_rev(cut(\n                    `Diabetes Adjusted Prevalence`, \n                    quantile(\n                        `Diabetes Adjusted Prevalence`, \n                        probs = seq(0, 1, 0.2)), \n                        include.lowest=TRUE)))) +\n    scale_fill_brewer(palette = \"Blues\", direction = -1) +\n    labs(\n        title = \"Diabetes Prevalence among Arizona Counties\",\n        fill = \"Diabetes Adjusted Prevalence \\nAmong Adults &gt;=18\",\n    ) + \n    theme_void() \nquant_map\n\n\n\n\n\n\n\n\n\n\nEqual Interval Breaks\nYou can also set equally sized breaks. This ends up being similar to a continuous color scale, but allows the reader to more easily identify values from their color.\n\nequal_map &lt;- ggplot() + \n    geom_sf(\n        data = AZ_PLACES_hosp, \n        aes(fill = `Diabetes Adjusted Prevalence`)\n    ) +\n    scale_fill_fermenter(palette = \"Blues\", direction = 1) +\n    labs(\n        title = \"Diabetes Prevalence among Arizona Counties\",\n        fill = \"Diabetes Adjusted Prevalence \\nAmong Adults &gt;=18\",\n    ) + \n    theme_void() \nequal_map\n\n\n\n\n\n\n\n\n\n\nManual Breaks\nIf you have prior knowledge of a dataset and an idea of what may compose meaningful breaks, you can also set manual breaks. This means you can also use your own classification method if you have another you prefer.\n\nmanual_map &lt;- ggplot() + \n    geom_sf(\n        data = AZ_PLACES_hosp, \n        aes(fill = `Diabetes Adjusted Prevalence`)\n    ) +\n    scale_fill_fermenter(palette = \"Blues\", direction = 1, breaks = c(9, 11, 13, 15)) +\n    labs(\n        title = \"Diabetes Prevalence among Arizona Counties\",\n        fill = \"Diabetes Adjusted Prevalence \\nAmong Adults &gt;=18\",\n    ) + \n    theme_void() \n\nmanual_map\n\n\n\n\n\n\n\n\n\n\nComparisons of Breaks\nTo compare our breaks, we will use the plot_grid() function from cowplot to place our maps within a grid.\n\nlibrary(cowplot)\n\nplot_grid(cont_map, quant_map, equal_map, manual_map)\n\n\n\n\n\n\n\n\nWe can see that although our maps are all based off of the same data, we can get pretty different maps. This underscores the importance of using a good choice of breaks.\nYou are also not limited to the break methods listed above. There are several other break methods.\n\n\n\nCartograms\nAs a visual tool, choropleths are great, but they do have some faults. As viewers, we tend to associate larger areas with more importance, but often area is not correlated with population. Cartograms address this by transforming geographic areas so that their area is proportional to the population.\nWe can create a cartogram using the cartogram package. There are three different forms of cartograms that the package offers\n\nContinuous cartograms (cartogram_cont) - distorts shape\n\nDiscontinuous cartograms (cartogram_ncont) - maintains shape, distorts size\n\nDorling cartogram (cartogram_dorling) - creates circles of weighted size\n\n\nlibrary(cartogram)\n\nAZ_PLACES_hosp_carto &lt;- AZ_PLACES_hosp %&gt;%\n    cartogram_ncont(\"Population\")\n\n\nggplot() + \n    geom_sf(\n        data = AZ_PLACES_hosp_carto, \n        aes(fill = `Diabetes Adjusted Prevalence`)\n    ) +\n    scale_fill_distiller(palette = \"Blues\", direction = -1) +\n    labs(\n        title = \"Diabetes Prevalence among Arizona Counties\",\n        fill = \"Diabetes Adjusted Prevalence \\nAmong Adults &gt;=18\",\n    ) + \n    theme_void()\n\n\n\n\n\n\n\n\n\n\nProportional/Graduated Symbol Maps\nChoropleths are best used with relative data (aka rates), but we typically use another form of map for count data, symbol maps. Like cartograms, symbol maps mitigate area bias, but allow us to avoid distorting the original area.\nBy default ggplot will use proportional symbols, which often have the same drawbacks as continuous choropleth maps. In order to create proportional symbols, we first need to calculate the center of each geographic region, which we can do using st_centroid(), and then we can change the size of the symbol based on our variable of choice.\nWe can also aggregate point locations to a geometry in order to mask the point locations. This is often important for location data that is sensitive.\n\n\n\n\n\n\nNote\n\n\n\nIt is possible for some geographies that the centroid is placed outside of the geometry itself. If this is a concern for you, you can switch out st_centroid() for st_point_on_surface(), which will guarantee that the point is placed within the geometry.\n\n\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp) +\n    geom_sf(\n        data = st_centroid(AZ_PLACES_hosp),\n        pch = 20,\n        aes(size = `Hospital Count`),\n        fill = alpha(\"red\", 0.7),\n        col = \"red\"\n    ) +\n    scale_size(range = c(1, 30)) +\n    labs(\n        title = \"Hospital Count by County\",\n        size = \"Number of Hospitals\",\n    ) + \n    theme_void()\n\n\n\n\n\n\n\n\nJust like choropleth maps, we can bin our data to create graduated symbols.\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp) +\n    geom_sf(\n        data = st_centroid(AZ_PLACES_hosp),\n        pch = 20,\n        aes(size = `Hospital Count`),\n        fill = alpha(\"red\", 0.7),\n        col = \"red\"\n    ) +\n    scale_size_binned(range = c(1, 30), breaks = c(5, 10, 20)) +\n    labs(\n        title = \"Hospital Count by County\",\n        size = \"Number of Hospitals\",\n    ) + \n    theme_void()\n\n\n\n\n\n\n\n\n\n\nDot Density\nAnother way to visualize counts is through the use of dot density maps. Dot density maps randomly distribute dots through out geographic area to display counts. Often, each dot will represent some count value. If you have sensitive location data, you can also use a dot density map to mask the locations, while still giving the viewer some idea of where the locations lie.\nWe can use the as_dot_density function from the tidycensus package to create a dot density map for us.\n\nlibrary(tidycensus)\n\nAZ_pop_dots &lt;- as_dot_density(\n  AZ_PLACES_hosp,\n  value = \"Population\",\n  values_per_dot = 10000,\n  group = \"GEOID\"\n)\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp) +\n    geom_sf(data = AZ_pop_dots) +\n    labs(\n        title = \"Arizona Population by County\",\n        caption = \"1 dot = 10000\"\n    ) + \n    theme_void()"
  },
  {
    "objectID": "notes.html#geocomputation",
    "href": "notes.html#geocomputation",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Geocomputation",
    "text": "Geocomputation\n\nMore on Projections\nMuch of the data you may come across will be unprojected. In R, you can check if an sf object is unprojected by using st_is_longlat(). For unprojected data, R uses a geocomputing engine called S2 which represents the earth which approximates the earth as a sphere. S2 is great an mitigates potential issues associated with the planar assumption, but S2 is not perfect. We often find that using a good projection can reduce frustrations when conducting geocomputation.\nThe following figure shows how unprojected data assumes that a degree is a uniform distance, when this is not the case, as the projected data more clearly shows.\n\nUS_states &lt;- states() %&gt;%\n    filter(GEOID &lt; \"60\")\n\nunprojected &lt;- ggplot() +\n    geom_sf(data = US_states)\n\nprojected &lt;- ggplot() +\n    geom_sf(data = st_transform(US_states, \"ESRI:102003\"))\n\nplot_grid(projected, unprojected, labels = c('projected', 'unprojected'))\n\n\n\n\n\n\n\n\n\n\n\n\nTypical Identifiers\nSome geocomputation operations rely on a unique identifier. For example, Census geographies are uniquely identified by FIPS Codes (aka GEOIDs).\nThe following table breaks down the structure of FIPS codes some of the major Census geographies. For more information on FIPS codes check out the Census Reference.\n\n\n\nArea\nStructure\nDigits\n\n\n\n\nState\nSTATE\n2\n\n\nCounty\nSTATE+COUNTY\n2+3=5\n\n\nTract\nSTATE+COUNTY+TRACT\n2+3+6=11\n\n\nBlock Group\nSTATE+COUNTY+TRACT+BLOCK GROUP\n2+3+6+1=12\n\n\nBlock\nSTATE+COUNTY+TRACT+BLOCK\n2+3+6+4=15\n\n\n\n\n\nTabular Joins\nOne of the most common operations that we may need to conduct is connecting a spatial dataset to a table using join. As we talked about before, sf objects are simply data.frames or tibbles with an extra geometry column. Fortunately, this means we can use all the typical tidyverse functions for joining tables (left_join(), right_join(), inner_join(), outer_join(), etc.).\nThese joins rely on at least one unique identifier that is present in both tables. If you are having problems joining tables, make sure that the data type of the unique identifier is the same amongst the two tables.\n\nstates &lt;- counties(state = \"AZ\") %&gt;%\n    select(GEOID)\nPLACES &lt;- read_csv(\"data/US/PLACES2023/PLACES2023_county.csv\")\n\nleft_join(states, PLACES, join_by(GEOID == CountyFIPS))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGEOID\nStateAbbr\nStateDesc\nCountyName\nTotalPopulation\nACCESS2_CrudePrev\nACCESS2_Crude95CI\nACCESS2_AdjPrev\nACCESS2_Adj95CI\nARTHRITIS_CrudePrev\nARTHRITIS_Crude95CI\nARTHRITIS_AdjPrev\nARTHRITIS_Adj95CI\nBINGE_CrudePrev\nBINGE_Crude95CI\nBINGE_AdjPrev\nBINGE_Adj95CI\nBPHIGH_CrudePrev\nBPHIGH_Crude95CI\nBPHIGH_AdjPrev\nBPHIGH_Adj95CI\nBPMED_CrudePrev\nBPMED_Crude95CI\nBPMED_AdjPrev\nBPMED_Adj95CI\nCANCER_CrudePrev\nCANCER_Crude95CI\nCANCER_AdjPrev\nCANCER_Adj95CI\nCASTHMA_CrudePrev\nCASTHMA_Crude95CI\nCASTHMA_AdjPrev\nCASTHMA_Adj95CI\nCERVICAL_CrudePrev\nCERVICAL_Crude95CI\nCERVICAL_AdjPrev\nCERVICAL_Adj95CI\nCHD_CrudePrev\nCHD_Crude95CI\nCHD_AdjPrev\nCHD_Adj95CI\nCHECKUP_CrudePrev\nCHECKUP_Crude95CI\nCHECKUP_AdjPrev\nCHECKUP_Adj95CI\nCHOLSCREEN_CrudePrev\nCHOLSCREEN_Crude95CI\nCHOLSCREEN_AdjPrev\nCHOLSCREEN_Adj95CI\nCOLON_SCREEN_CrudePrev\nCOLON_SCREEN_Crude95CI\nCOLON_SCREEN_AdjPrev\nCOLON_SCREEN_Adj95CI\nCOPD_CrudePrev\nCOPD_Crude95CI\nCOPD_AdjPrev\nCOPD_Adj95CI\nCOREM_CrudePrev\nCOREM_Crude95CI\nCOREM_AdjPrev\nCOREM_Adj95CI\nCOREW_CrudePrev\nCOREW_Crude95CI\nCOREW_AdjPrev\nCOREW_Adj95CI\nCSMOKING_CrudePrev\nCSMOKING_Crude95CI\nCSMOKING_AdjPrev\nCSMOKING_Adj95CI\nDENTAL_CrudePrev\nDENTAL_Crude95CI\nDENTAL_AdjPrev\nDENTAL_Adj95CI\nDEPRESSION_CrudePrev\nDEPRESSION_Crude95CI\nDEPRESSION_AdjPrev\nDEPRESSION_Adj95CI\nDIABETES_CrudePrev\nDIABETES_Crude95CI\nDIABETES_AdjPrev\nDIABETES_Adj95CI\nGHLTH_CrudePrev\nGHLTH_Crude95CI\nGHLTH_AdjPrev\nGHLTH_Adj95CI\nHIGHCHOL_CrudePrev\nHIGHCHOL_Crude95CI\nHIGHCHOL_AdjPrev\nHIGHCHOL_Adj95CI\nKIDNEY_CrudePrev\nKIDNEY_Crude95CI\nKIDNEY_AdjPrev\nKIDNEY_Adj95CI\nLPA_CrudePrev\nLPA_Crude95CI\nLPA_AdjPrev\nLPA_Adj95CI\nMAMMOUSE_CrudePrev\nMAMMOUSE_Crude95CI\nMAMMOUSE_AdjPrev\nMAMMOUSE_Adj95CI\nMHLTH_CrudePrev\nMHLTH_Crude95CI\nMHLTH_AdjPrev\nMHLTH_Adj95CI\nOBESITY_CrudePrev\nOBESITY_Crude95CI\nOBESITY_AdjPrev\nOBESITY_Adj95CI\nPHLTH_CrudePrev\nPHLTH_Crude95CI\nPHLTH_AdjPrev\nPHLTH_Adj95CI\nSLEEP_CrudePrev\nSLEEP_Crude95CI\nSLEEP_AdjPrev\nSLEEP_Adj95CI\nSTROKE_CrudePrev\nSTROKE_Crude95CI\nSTROKE_AdjPrev\nSTROKE_Adj95CI\nTEETHLOST_CrudePrev\nTEETHLOST_Crude95CI\nTEETHLOST_AdjPrev\nTEETHLOST_Adj95CI\nHEARING_CrudePrev\nHEARING_Crude95CI\nHEARING_AdjPrev\nHEARING_Adj95CI\nVISION_CrudePrev\nVISION_Crude95CI\nVISION_AdjPrev\nVISION_Adj95CI\nCOGNITION_CrudePrev\nCOGNITION_Crude95CI\nCOGNITION_AdjPrev\nCOGNITION_Adj95CI\nMOBILITY_CrudePrev\nMOBILITY_Crude95CI\nMOBILITY_AdjPrev\nMOBILITY_Adj95CI\nSELFCARE_CrudePrev\nSELFCARE_Crude95CI\nSELFCARE_AdjPrev\nSELFCARE_Adj95CI\nINDEPLIVE_CrudePrev\nINDEPLIVE_Crude95CI\nINDEPLIVE_AdjPrev\nINDEPLIVE_Adj95CI\nDISABILITY_CrudePrev\nDISABILITY_Crude95CI\nDISABILITY_AdjPrev\nDISABILITY_Adj95CI\nGeolocation\ngeometry\n\n\n\n\n04027\nAZ\nArizona\nYuma\n206990\n23.6\n(18.6, 29.5)\n23.7\n(18.8, 29.4)\n22.9\n(20.0, 26.0)\n20.0\n(17.3, 22.9)\n15.9\n(13.3, 18.7)\n17.2\n(14.4, 20.3)\n33.3\n(29.9, 36.7)\n30.2\n(26.9, 33.6)\n77.2\n(74.2, 79.8)\n57.3\n(52.7, 62.0)\n6.9\n( 6.2, 7.6)\n5.5\n( 5.0, 6.1)\n9.7\n( 8.6, 11.0)\n9.9\n( 8.7, 11.1)\n76.4\n(73.5, 79.0)\n77.7\n(75.1, 80.2)\n7.6\n( 6.7, 8.7)\n6.1\n( 5.3, 6.9)\n67.6\n(63.1, 72.1)\n65.5\n(60.7, 70.2)\n80.7\n(77.5, 83.8)\n80.0\n(76.5, 83.2)\n63.2\n(60.5, 65.7)\n59.8\n(56.7, 62.6)\n7.4\n( 6.1, 8.7)\n6.4\n( 5.4, 7.5)\n36.3\n(30.1, 42.5)\n36.2\n(30.1, 42.3)\n29.0\n(24.3, 34.1)\n29.2\n(24.3, 34.2)\n14.5\n(11.9, 17.4)\n15.7\n(12.9, 18.8)\n52.3\n(48.7, 56.0)\n51.7\n(47.8, 55.6)\n17.9\n(15.0, 21.0)\n18.4\n(15.4, 21.6)\n14.3\n(12.4, 16.3)\n13.0\n(11.3, 14.8)\n23.2\n(20.0, 26.8)\n22.4\n(19.3, 25.9)\n36.3\n(32.6, 40.1)\n31.2\n(27.4, 35.1)\n4.2\n( 3.8, 4.6)\n3.6\n( 3.2, 3.9)\n31.2\n(27.0, 36.1)\n30.5\n(26.1, 35.2)\n65.2\n(61.4, 68.8)\n66.2\n(62.3, 69.9)\n15.8\n(13.6, 18.1)\n16.4\n(14.2, 18.8)\n39.1\n(33.6, 44.9)\n40.8\n(35.1, 46.7)\n14.1\n(12.1, 16.1)\n13.5\n(11.6, 15.5)\n35.1\n(33.9, 36.3)\n36.6\n(35.3, 37.9)\n4.0\n( 3.5, 4.5)\n3.3\n( 2.9, 3.7)\n13.7\n( 9.9, 17.8)\n14.6\n(10.7, 18.9)\n9.1\n( 8.1, 10.2)\n7.4\n( 6.6, 8.3)\n8.2\n( 7.1, 9.5)\n7.8\n( 6.7, 9.0)\n16.3\n(13.9, 19.0)\n16.5\n(14.1, 19.2)\n16.9\n(14.6, 19.3)\n15.0\n(12.8, 17.2)\n5.5\n( 4.7, 6.3)\n5.2\n( 4.5, 6.0)\n9.6\n( 8.3, 11.1)\n9.2\n( 7.9, 10.6)\n33.3\n(28.9, 37.6)\n30.9\n(26.7, 35.1)\nPOINT (-113.910905 32.7739424)\nMULTIPOLYGON (((-114.8141 3…\n\n\n04021\nAZ\nArizona\nPinal\n449557\n14.1\n(11.5, 17.0)\n14.5\n(11.8, 17.5)\n28.1\n(25.2, 30.9)\n23.5\n(21.0, 26.2)\n16.3\n(13.8, 18.8)\n18.2\n(15.5, 21.0)\n33.0\n(29.9, 36.0)\n28.5\n(25.6, 31.4)\n77.0\n(73.9, 79.7)\n55.8\n(51.4, 60.0)\n7.8\n( 7.0, 8.5)\n6.1\n( 5.5, 6.7)\n10.0\n( 8.8, 11.2)\n10.1\n( 8.9, 11.4)\n79.4\n(77.0, 81.3)\n79.8\n(77.7, 81.7)\n7.0\n( 6.1, 8.0)\n5.4\n( 4.8, 6.2)\n71.6\n(67.8, 75.2)\n68.8\n(64.8, 72.7)\n83.3\n(80.7, 85.8)\n80.9\n(77.9, 83.7)\n68.8\n(66.6, 71.1)\n64.9\n(62.5, 67.4)\n7.6\n( 6.3, 9.0)\n6.3\n( 5.3, 7.5)\n44.8\n(38.3, 51.1)\n44.7\n(38.3, 50.8)\n37.6\n(31.7, 43.4)\n36.7\n(31.1, 42.1)\n16.6\n(13.8, 19.6)\n17.2\n(14.2, 20.2)\n53.9\n(50.8, 56.9)\n53.2\n(50.0, 56.0)\n17.9\n(15.3, 20.5)\n18.5\n(15.8, 21.3)\n12.1\n(10.6, 13.8)\n10.1\n( 8.9, 11.5)\n18.4\n(15.7, 21.2)\n17.2\n(14.6, 19.8)\n37.7\n(34.4, 41.0)\n31.3\n(27.9, 34.6)\n3.7\n( 3.3, 4.1)\n3.1\n( 2.8, 3.3)\n25.4\n(21.7, 29.3)\n24.3\n(20.7, 27.9)\n66.1\n(62.4, 69.8)\n67.1\n(63.5, 70.5)\n15.0\n(13.1, 16.9)\n16.0\n(14.1, 18.0)\n37.2\n(32.6, 41.9)\n37.5\n(32.9, 42.2)\n12.9\n(11.2, 14.8)\n12.0\n(10.4, 13.6)\n35.7\n(34.6, 36.8)\n37.0\n(35.8, 38.0)\n3.6\n( 3.2, 4.1)\n2.9\n( 2.6, 3.3)\n12.8\n( 8.9, 17.5)\n13.2\n( 9.3, 18.3)\n8.2\n( 7.2, 9.2)\n6.7\n( 6.0, 7.5)\n5.4\n( 4.7, 6.3)\n5.1\n( 4.4, 5.9)\n13.8\n(11.8, 15.8)\n14.4\n(12.3, 16.5)\n14.9\n(12.8, 17.2)\n12.6\n(10.9, 14.6)\n4.0\n( 3.5, 4.6)\n3.7\n( 3.2, 4.2)\n7.8\n( 6.6, 8.9)\n7.5\n( 6.4, 8.7)\n31.0\n(27.0, 34.7)\n28.8\n(25.1, 32.4)\nPOINT (-111.3663396 32.9185209)\nMULTIPOLYGON (((-111.2669 3…\n\n\n04017\nAZ\nArizona\nNavajo\n108147\n14.6\n(12.1, 17.7)\n15.3\n(12.7, 18.5)\n29.8\n(26.7, 32.8)\n24.9\n(22.2, 27.6)\n14.7\n(12.4, 17.1)\n16.6\n(14.0, 19.3)\n37.3\n(33.9, 40.5)\n32.3\n(29.1, 35.3)\n77.3\n(74.4, 80.0)\n56.6\n(52.3, 60.9)\n7.7\n( 6.9, 8.5)\n6.1\n( 5.5, 6.7)\n12.6\n(11.2, 14.0)\n12.8\n(11.4, 14.2)\n74.7\n(72.5, 76.9)\n75.7\n(73.5, 77.8)\n9.0\n( 8.0, 10.2)\n7.1\n( 6.3, 8.0)\n68.8\n(64.8, 72.5)\n65.8\n(61.4, 69.8)\n79.1\n(76.1, 81.9)\n75.9\n(72.7, 79.2)\n59.9\n(57.6, 62.2)\n56.1\n(53.7, 58.4)\n10.7\n( 9.1, 12.3)\n8.9\n( 7.6, 10.2)\n31.0\n(25.8, 36.0)\n31.2\n(26.1, 36.4)\n22.1\n(18.2, 26.0)\n21.7\n(18.0, 25.5)\n20.9\n(17.6, 24.1)\n21.9\n(18.5, 25.3)\n52.9\n(49.8, 55.8)\n52.1\n(49.1, 55.2)\n20.3\n(17.4, 23.3)\n21.1\n(18.1, 24.1)\n15.4\n(13.5, 17.4)\n12.8\n(11.1, 14.4)\n24.2\n(21.2, 27.3)\n22.5\n(19.8, 25.3)\n36.2\n(32.8, 39.4)\n28.8\n(25.6, 32.0)\n4.6\n( 4.2, 5.1)\n3.8\n( 3.5, 4.2)\n27.1\n(23.2, 31.0)\n25.9\n(22.2, 29.6)\n57.4\n(53.8, 60.9)\n57.3\n(53.6, 60.7)\n18.7\n(16.4, 20.8)\n20.1\n(17.7, 22.4)\n38.0\n(33.0, 42.6)\n38.2\n(33.3, 42.9)\n16.5\n(14.5, 18.5)\n15.3\n(13.4, 17.1)\n37.7\n(36.5, 38.7)\n39.0\n(37.8, 40.0)\n5.0\n( 4.4, 5.6)\n4.1\n( 3.7, 4.5)\n17.4\n(13.4, 21.9)\n18.2\n(13.9, 22.9)\n10.5\n( 9.4, 11.7)\n8.9\n( 7.9, 9.8)\n8.6\n( 7.5, 9.7)\n8.0\n( 7.0, 9.0)\n18.4\n(16.0, 20.7)\n19.2\n(16.7, 21.6)\n20.1\n(17.7, 22.5)\n17.1\n(15.0, 19.2)\n6.3\n( 5.5, 7.2)\n5.7\n( 5.0, 6.4)\n11.7\n(10.2, 13.3)\n11.4\n(10.0, 12.9)\n37.8\n(33.8, 41.6)\n35.5\n(31.7, 39.4)\nPOINT (-110.3210248 35.3907852)\nMULTIPOLYGON (((-110.0007 3…\n\n\n04011\nAZ\nArizona\nGreenlee\n9404\n16.2\n(12.9, 19.4)\n16.2\n(13.0, 19.5)\n21.2\n(17.8, 24.7)\n20.1\n(16.8, 23.5)\n18.1\n(14.9, 21.7)\n18.5\n(15.2, 22.2)\n27.0\n(23.3, 30.8)\n25.8\n(22.2, 29.5)\n72.5\n(68.7, 76.0)\n53.8\n(48.6, 58.8)\n6.1\n( 5.5, 6.7)\n5.7\n( 5.2, 6.3)\n9.7\n( 8.5, 11.0)\n9.7\n( 8.5, 11.0)\n78.5\n(76.3, 80.8)\n79.2\n(77.1, 81.4)\n5.5\n( 4.8, 6.2)\n5.1\n( 4.5, 5.8)\n64.1\n(58.2, 69.7)\n63.4\n(57.4, 69.0)\n81.3\n(78.0, 84.4)\n80.7\n(77.3, 84.0)\n63.1\n(60.7, 65.7)\n61.5\n(59.1, 64.1)\n5.5\n( 4.7, 6.4)\n5.2\n( 4.4, 6.1)\n34.0\n(27.9, 40.3)\n34.8\n(28.7, 40.8)\n30.0\n(24.9, 35.4)\n30.8\n(25.7, 36.2)\n14.9\n(12.1, 17.8)\n14.9\n(12.2, 17.9)\n56.7\n(53.5, 59.8)\n56.8\n(53.5, 59.9)\n18.3\n(14.9, 21.9)\n18.4\n(15.0, 22.1)\n10.1\n( 8.6, 11.6)\n9.6\n( 8.2, 11.0)\n16.4\n(14.1, 18.8)\n16.1\n(13.8, 18.5)\n30.8\n(26.6, 35.4)\n27.5\n(23.3, 32.2)\n3.2\n( 2.9, 3.5)\n3.1\n( 2.8, 3.4)\n23.3\n(19.2, 27.7)\n23.1\n(18.8, 27.5)\n67.8\n(64.1, 71.4)\n67.1\n(63.3, 71.0)\n15.3\n(13.2, 17.4)\n15.6\n(13.5, 17.7)\n31.1\n(24.2, 38.6)\n31.1\n(24.3, 38.5)\n11.2\n( 9.7, 12.8)\n11.0\n( 9.5, 12.4)\n33.4\n(32.1, 34.6)\n33.6\n(32.3, 34.9)\n2.9\n( 2.6, 3.2)\n2.7\n( 2.4, 3.0)\n10.7\n( 7.7, 13.6)\n11.5\n( 8.4, 14.8)\n6.7\n( 5.9, 7.5)\n6.4\n( 5.7, 7.1)\n5.2\n( 4.5, 5.9)\n5.1\n( 4.5, 5.8)\n13.5\n(11.5, 15.5)\n13.7\n(11.6, 15.7)\n12.2\n(10.5, 14.0)\n11.7\n(10.0, 13.4)\n3.6\n( 3.2, 4.1)\n3.5\n( 3.1, 4.0)\n6.9\n( 6.0, 7.9)\n6.9\n( 6.0, 7.9)\n27.6\n(23.7, 31.6)\n27.1\n(23.1, 31.1)\nPOINT (-109.2423231 33.2388723)\nMULTIPOLYGON (((-109.4958 3…\n\n\n04013\nAZ\nArizona\nMaricopa\n4496588\n12.7\n(10.3, 15.3)\n12.9\n(10.4, 15.7)\n22.9\n(20.9, 25.0)\n21.1\n(19.2, 23.0)\n16.7\n(14.8, 18.6)\n17.4\n(15.5, 19.4)\n29.6\n(27.3, 31.9)\n27.7\n(25.5, 29.9)\n72.9\n(70.2, 75.3)\n53.8\n(50.5, 57.1)\n6.9\n( 6.3, 7.5)\n6.2\n( 5.7, 6.8)\n9.9\n( 9.0, 11.0)\n10.0\n( 9.0, 11.0)\n80.6\n(78.6, 82.6)\n81.2\n(79.2, 83.1)\n5.8\n( 5.1, 6.6)\n5.2\n( 4.6, 5.9)\n69.2\n(66.1, 72.0)\n68.0\n(64.8, 71.0)\n84.0\n(81.7, 86.3)\n83.3\n(80.8, 85.6)\n67.8\n(65.2, 70.2)\n66.1\n(63.3, 68.6)\n5.9\n( 4.9, 7.0)\n5.4\n( 4.5, 6.4)\n45.1\n(38.4, 51.0)\n45.3\n(38.8, 51.2)\n36.2\n(30.3, 41.5)\n36.0\n(30.3, 41.3)\n13.8\n(11.4, 16.3)\n14.0\n(11.5, 16.6)\n61.9\n(58.9, 64.9)\n61.7\n(58.7, 64.7)\n18.7\n(16.7, 20.9)\n18.9\n(16.9, 21.1)\n10.4\n( 9.2, 11.5)\n9.5\n( 8.5, 10.6)\n15.4\n(13.2, 17.6)\n14.8\n(12.8, 17.0)\n34.5\n(32.2, 36.9)\n30.6\n(28.2, 33.1)\n3.3\n( 3.0, 3.6)\n3.0\n( 2.7, 3.3)\n22.4\n(19.4, 25.5)\n22.0\n(19.0, 25.1)\n69.0\n(65.5, 72.3)\n69.1\n(65.7, 72.5)\n16.1\n(14.5, 17.8)\n16.5\n(14.8, 18.3)\n30.8\n(27.4, 34.3)\n30.9\n(27.6, 34.4)\n10.9\n( 9.5, 12.3)\n10.5\n( 9.2, 11.9)\n31.7\n(30.6, 32.7)\n32.2\n(31.1, 33.3)\n2.9\n( 2.6, 3.3)\n2.7\n( 2.4, 3.1)\n10.3\n( 6.7, 14.7)\n10.8\n( 7.1, 15.6)\n6.6\n( 5.8, 7.3)\n6.1\n( 5.4, 6.8)\n4.7\n( 4.1, 5.3)\n4.5\n( 3.9, 5.2)\n13.2\n(11.5, 15.1)\n13.4\n(11.6, 15.4)\n12.7\n(11.0, 14.5)\n11.8\n(10.2, 13.5)\n3.4\n( 2.9, 4.0)\n3.3\n( 2.8, 3.8)\n6.8\n( 5.9, 7.9)\n6.7\n( 5.8, 7.8)\n28.5\n(25.5, 31.5)\n27.6\n(24.7, 30.6)\nPOINT (-112.4989296 33.3451756)\nMULTIPOLYGON (((-111.8931 3…\n\n\n\n\n\n\n\nTable to Points\nIt is common practice to send point data as a table with longitude and latitude fields. Because these tables are not saved in a spatial format, they must be first read as a table and then converted to a sf object. It is important that if you recieve a dataset like this, that you check the documentation to see what coordinate reference system your data refers to. It is common convention to use WGS 1984 (EPSG:4326), but this cannot always be assumed.\n\ncop2020_tract &lt;- read_csv(\"data/US/COP2020/COP2020_tract.txt\")\n\nst_as_sf(cop2020_tract, coords = c(\"LONGITUDE\", \"LATITUDE\"), crs = 4326)\n\n\n\n\n\n\nSTATEFP\nCOUNTYFP\nTRACTCE\nPOPULATION\ngeometry\n\n\n\n\n01\n001\n020100\n1775\nPOINT (-86.4866 32.47682)\n\n\n01\n001\n020200\n2055\nPOINT (-86.47259 32.4719)\n\n\n01\n001\n020300\n3216\nPOINT (-86.45925 32.47458)\n\n\n01\n001\n020400\n4246\nPOINT (-86.44299 32.46866)\n\n\n01\n001\n020501\n4322\nPOINT (-86.42442 32.45153)\n\n\n\n\n\n\n\nSpatial Joins\nSpatial joins allow us to conduct a join based on a spatial relationship. In practice this means that we can combine the attribute tables of two spatial datasets. sf offers us a plethora of spatial relationships to pick from including like st_intersects, st_is_within_distance, st_within. The full list of spatial relationships is detailed with the sf documenation.\nTo conduct a spatial join, use the st_join() function and provide your two spatial datasets. By default, st_join() will utilize the spatial relationship of st_intersects, but by specifying the join parameter, you can change the spatial relationship used.\n\nAZ_hosp &lt;- st_read(\"data/AZ/hospitals\")\nAZ_statAreas &lt;- st_read(\"data/AZ/statAreas.gdb\", layer = \"statAreas\")\n\nst_join(AZ_hosp, AZ_statAreas, join = st_intersects)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOBJECTID\nOBJECTID_1\nRUN_DATE\nsource\nBUREAU\nFACID\nFACILITY_N\nLICENSE_NU\nLICENSE_EF\nLICENSE_EX\nMEDICARE_I\nMEDICARE_1\nMEDICARE_2\nTELEPHONE\nFACILITY_T\nTYPE\nSUBTYPE\nCATEGORY\nICON_CATEG\nMEDICARE_T\nLICENSE_TY\nLICENSE_SU\nCAPACITY\nADDRESS\nCITY\nZIP\nCOUNTY\nOPERATION_\nX_Is_Publi\nHOSPITAL_G\nKeyID\nADHSCODE\nN_AddressT\nN_LocatorT\nN_ADDRESS\nN_ADDR2\nN_CITY\nN_COUNTY\nN_FULLADDR\nN_LAT\nN_LON\nN_STATE\nN_ZIP\nN_ZIP4\nN_BLOCK\nRESERVATIO\nRESERV_ID\nR_METHOD\noPCA\noPCA_ID\nP_Method\nP_Reliable\nSOURCE_VW\nCASELOAD\nCSA_ID\nCSA_NAME\nAREA_SQMILE\nPOP2020\nShape__Area\nShape__Length\ngeometry\n\n\n\n\n1\n2822\n2024-05-06\nASPEN\nMED\nAZTH00002\nBANNER- UNIVERSITY MEDICAL CENTER PHOENIX\nNA\nNA\nNA\n039802\nNA\nNA\n(602)239-2716\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n1441 N 12TH\nPHOENIX\n85006\nMARICOPA\nACTIVE\nYes\nNA\nAZTH00002\nA\nAS0\nCENTRUS-TOMTOM\n1441 N 12TH ST\nNA\nPHOENIX\nMARICOPA COUNTY\n1441 N 12TH ST , PHOENIX, AZ 85006-2837\n33.46410\n-112.0562\nAZ\n85006\n2837\n4.013113e+13\nNA\nNA\nNA\nCENTRAL CITY VILLAGE\n39\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n47\nPhoenix - Central City\n26.06187\n62645\n726562975\n147316.9\nPOINT (-112.0562 33.46411)\n\n\n2\n2823\n2024-05-06\nASPEN\nMED\nAZTH00003\nBANNER UNIVERSITY MEDICAL CTR AT THE AZ HEALTH SC\nNA\nNA\nNA\n039800\nNA\nNA\n(520)694-0111\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n1501 NORTH CAMPBELL AVENUE\nTUCSON\n85724\nPIMA\nACTIVE\nYes\nNA\nAZTH00003\nA\nAS0\nCENTRUS-TOMTOM\n1501 N CAMPBELL AVE\nNA\nTUCSON\nPIMA COUNTY\n1501 N CAMPBELL AVE , TUCSON, AZ 85724-0001\n32.24080\n-110.9443\nAZ\n85724\n1\n4.019002e+13\nNA\nNA\nNA\nTUCSON CENTRAL\n107\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n121\nTucson - North\n31.92997\n124515\n890156111\n174100.1\nPOINT (-110.9443 32.24081)\n\n\n3\n2824\n2024-05-06\nASPEN\nMED\nAZTH00004\nMAYO CLINIC HOSPITAL\nNA\nNA\nNA\n039801\nNA\nNA\n(480)342-1900\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n5777 EAST MAYO BOULEVARD\nPHOENIX\n85054\nMARICOPA\nACTIVE\nYes\nNA\nAZTH00004\nA\nAS0\nCENTRUS-TOMTOM\n5777 E MAYO BLVD\nNA\nPHOENIX\nMARICOPA COUNTY\n5777 E MAYO BLVD , PHOENIX, AZ 85054-4502\n33.66316\n-111.9557\nAZ\n85054\n4502\n4.013615e+13\nNA\nNA\nNA\nDESERT VIEW VILLAGE\n30\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n37\nPhoenix - Desert View\n62.87998\n61105\n1752992698\n222767.7\nPOINT (-111.9557 33.66317)\n\n\n4\n3774\n2024-05-06\nASPEN\nMED\nBH7347\nVIA LINDA BEHAVIORAL HOSPITAL\nSH11520\n2023-03-01\n2025-02-28\n034040\nNA\nNA\n(480)476-7000\n12\nHOSPITAL\nPSYCHIATRIC\nHOSPITAL\nHOSPITAL\nHOSPITAL - PSYCHIATRIC\nHOSPITAL\nHOSPITAL - SPECIAL\n120\n9160 EAST HORSESHOE RD\nSCOTTSDALE\n85258\nMARICOPA\nACTIVE\nYes\nNA\nBH7347\nA\nAS0\nCENTRUS-TOMTOM\n9160 E HORSESHOE RD\nNA\nSCOTTSDALE\nMARICOPA COUNTY\n9160 E HORSESHOE RD , SCOTTSDALE, AZ 85258-4666\n33.56670\n-111.8840\nAZ\n85258\n4666\n4.013941e+13\nSalt River Reservation\n3340F\nCoordinates\nSALT RIVER PIMA-MARICOPA INDIAN COMMUNITY\n62\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n72\nSalt River Pima-Maricopa Indian Community\n84.99103\n6334\n2369413211\n259861.9\nPOINT (-111.884 33.56671)\n\n\n5\n4893\n2024-05-06\nASPEN\nMED\nMED0198\nCANYON VISTA MEDICAL CENTER\nH7130\n2020-02-18\n2024-12-27\n030043\nNA\nNA\n(520)263-2220\n11\nHOSPITAL\nSHORT TERM\nHOSPITAL\nHOSPITAL\nHOSPITAL - SHORT TERM\nHOSPITAL\nHOSPITAL - GENERAL\n100\n5700 EAST HIGHWAY 90\nSIERRA VISTA\n85635\nCOCHISE\nACTIVE\nYes\nNA\nMED0198\nA\nAS0\nCENTRUS-TOMTOM\n5700 E HIGHWAY 90\nNA\nSIERRA VISTA\nCOCHISE COUNTY\n5700 E HIGHWAY 90 , SIERRA VISTA, AZ 85635-9110\n31.55449\n-110.2319\nAZ\n85635\n9110\n4.003002e+13\nNA\nNA\nNA\nSIERRA VISTA\n123\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n135\nSierra Vista\n708.44630\n56911\n19750344116\n905907.7\nPOINT (-110.2319 31.5545)\n\n\n\n\n\nSpatial joins are a really powerful tool when combined with a summarize(). In the following example, we spatially join hospitals to statistical areas and use a summarize() to calculate the total number of hospitals as well as keep the population data within our dataset. We can use this data to even calculate a rate measure for number of hospitals per 100,000 population.\n\nst_join(AZ_hosp, AZ_statAreas) %&gt;%\n    group_by(CSA_ID) %&gt;%\n    summarize(count = n(), POP2020 = first(POP2020)) %&gt;%\n    mutate(countPerHunThoP = 100000 * count / POP2020)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCSA_ID\ncount\nPOP2020\ngeometry\ncountPerHunThoP\n\n\n\n\n4\n2\n54625\nMULTIPOINT ((-114.0359 35.2…\n3.661327\n\n\n5\n2\n41406\nMULTIPOINT ((-114.5982 35.1…\n4.830218\n\n\n6\n1\n25119\nPOINT (-114.5978 35.00245)\n3.981050\n\n\n7\n1\n60701\nPOINT (-114.3387 34.47989)\n1.647419\n\n\n8\n1\n9375\nPOINT (-111.4634 36.91705)\n10.666667\n\n\n\n\n\n\n\nBuffers\nBuffers create polygon shapes representing an as the crow files boundary of a certain distance away from a point, line, or polygon. Buffers can be helpful to assess questions of access.\nWithin R this tool consistently has trouble with unprojected data, and hence we recommend using a good projection. Supply st_buffer() with a sf object and a distance that you would like to buffer around that sf object. It may be helpful to use the as_units() function from the units package to specify units on your buffer.\n\nAZ_hosp %&gt;%\n    st_transform(\"EPSG:26949\") %&gt;%\n    st_buffer(units::as_units(10, \"mi\")) %&gt;%\n    ggplot() +\n        geom_sf(data = AZ_statAreas) +\n        geom_sf(fill = \"red\")\n\n\n\n\n\n\n\n\n\n\nDistance\nOften we may want to see how far populations are from certain resources. The st_distance command allows us to do just that.\nIn the following example we calculate the distance from every census tract population weighted centroid to every hosptial within AZ. This generates a matrix of distances.\n\nread_csv(\"data/US/COP2020/COP2020_tract.txt\") %&gt;%\n    filter(STATEFP == \"04\") %&gt;%\n    st_as_sf(coords = c(\"LONGITUDE\", \"LATITUDE\"), crs = 4326) %&gt;%\n    st_distance(AZ_hosp)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n418834.8 [m]\n513413.9 [m]\n394927.7 [m]\n401342.2 [m]\n580851.5 [m]\n237198.5 [m]\n144967.4 [m]\n312153.8 [m]\n407064.0 [m]\n411000.9 [m]\n418508.9 [m]\n415022.4 [m]\n418765.5 [m]\n401926.9 [m]\n419477.3 [m]\n419011.2 [m]\n410801.4 [m]\n415688.1 [m]\n462340.2 [m]\n479213.2 [m]\n414507.0 [m]\n515745.6 [m]\n511192.3 [m]\n513245.8 [m]\n464652.3 [m]\n299981.1 [m]\n510752.5 [m]\n418248.8 [m]\n505678.9 [m]\n420970.6 [m]\n414545.3 [m]\n511192.3 [m]\n416609.9 [m]\n418248.8 [m]\n466325.2 [m]\n512493.3 [m]\n418765.5 [m]\n506313.1 [m]\n418248.8 [m]\n416609.9 [m]\n422789.4 [m]\n414206.8 [m]\n410709.5 [m]\n432473.6 [m]\n520064.2 [m]\n493167.6 [m]\n321776.9 [m]\n134282.591 [m]\n142571.2 [m]\n446391.6 [m]\n390185.8 [m]\n322428.9 [m]\n583224.2 [m]\n340912.5 [m]\n520338.0 [m]\n416255.0 [m]\n595016.7 [m]\n417683.1 [m]\n329530.0 [m]\n612145.0 [m]\n424412.6 [m]\n408594.4 [m]\n289743.3 [m]\n416519.3 [m]\n416952.9 [m]\n410333.6 [m]\n402240.8 [m]\n421187.3 [m]\n422655.2 [m]\n510575.8 [m]\n431874.4 [m]\n415338.0 [m]\n512021.2 [m]\n330364.5 [m]\n514631.2 [m]\n415217.7 [m]\n437196.7 [m]\n120824.18 [m]\n297467.6 [m]\n535802.3 [m]\n500823.0 [m]\n383997.5 [m]\n438936.7 [m]\n497415.3 [m]\n418836.9 [m]\n409309.1 [m]\n418088.5 [m]\n399306.2 [m]\n414984.7 [m]\n399873.8 [m]\n410174.4 [m]\n409270.2 [m]\n411605.2 [m]\n285790.5 [m]\n207238.4 [m]\n506081.8 [m]\n513523.9 [m]\n342156.5 [m]\n630527.1 [m]\n506063.7 [m]\n515536.1 [m]\n429635.8 [m]\n235074.2 [m]\n520620.7 [m]\n394927.7 [m]\n414129.8 [m]\n427831.6 [m]\n399012.4 [m]\n409191.3 [m]\n406292.6 [m]\n630337.0 [m]\n416952.9 [m]\n426473.8 [m]\n119382.28 [m]\n497802.6 [m]\n570913.2 [m]\n415236.0 [m]\n425087.9 [m]\n518777.5 [m]\n420279.0 [m]\n604048.2 [m]\n340848.2 [m]\n73500.537 [m]\n470984.0 [m]\n412865.9 [m]\n413454.5 [m]\n392788.6 [m]\n413137.1 [m]\n341697.1 [m]\n413279.4 [m]\n423761.5 [m]\n414828.6 [m]\n424995.4 [m]\n434088.0 [m]\n418672.9 [m]\n406570.3 [m]\n400647.9 [m]\n429297.9 [m]\n426780.5 [m]\n413498.4 [m]\n236357.9 [m]\n419164.4 [m]\n391066.6 [m]\n428519.3 [m]\n505678.9 [m]\n382301.6 [m]\n419133.9 [m]\n503205.0 [m]\n424843.1 [m]\n415085.8 [m]\n419343.1 [m]\n418529.5 [m]\n545155.3 [m]\n419347.1 [m]\n623743.6 [m]\n459359.3 [m]\n413416.5 [m]\n\n\n442157.8 [m]\n524284.0 [m]\n418543.8 [m]\n423948.9 [m]\n585561.1 [m]\n269397.1 [m]\n188378.8 [m]\n333760.8 [m]\n432334.1 [m]\n433450.8 [m]\n440203.7 [m]\n441386.5 [m]\n442107.7 [m]\n426685.4 [m]\n442646.6 [m]\n441275.4 [m]\n433302.9 [m]\n441213.3 [m]\n503204.4 [m]\n517404.3 [m]\n455078.6 [m]\n527002.8 [m]\n521601.9 [m]\n524119.3 [m]\n483027.8 [m]\n330919.8 [m]\n521202.6 [m]\n441809.4 [m]\n517218.3 [m]\n441358.9 [m]\n439951.5 [m]\n521601.9 [m]\n439907.0 [m]\n441809.4 [m]\n507210.1 [m]\n522549.7 [m]\n442107.7 [m]\n517823.8 [m]\n441809.4 [m]\n439907.0 [m]\n446152.4 [m]\n434813.9 [m]\n433243.2 [m]\n457741.8 [m]\n530705.7 [m]\n504484.5 [m]\n326473.0 [m]\n116905.672 [m]\n181868.2 [m]\n465793.9 [m]\n398746.0 [m]\n326998.0 [m]\n588748.4 [m]\n373017.3 [m]\n531261.2 [m]\n439796.5 [m]\n597203.6 [m]\n443984.0 [m]\n361276.9 [m]\n621512.0 [m]\n444759.8 [m]\n428336.3 [m]\n295120.2 [m]\n439810.7 [m]\n439817.6 [m]\n450830.6 [m]\n424863.9 [m]\n446330.3 [m]\n443911.8 [m]\n520959.6 [m]\n455552.3 [m]\n441410.1 [m]\n522238.6 [m]\n362064.6 [m]\n525092.4 [m]\n441316.0 [m]\n454635.9 [m]\n119074.53 [m]\n293415.5 [m]\n541438.3 [m]\n502990.0 [m]\n396960.4 [m]\n440393.2 [m]\n534072.7 [m]\n441901.9 [m]\n433241.0 [m]\n441175.8 [m]\n421915.0 [m]\n438915.5 [m]\n422572.2 [m]\n435056.1 [m]\n429662.5 [m]\n436629.5 [m]\n291830.0 [m]\n227426.2 [m]\n517630.0 [m]\n523714.5 [m]\n374491.3 [m]\n662528.0 [m]\n517583.5 [m]\n525028.5 [m]\n454531.4 [m]\n266958.4 [m]\n530025.2 [m]\n418543.8 [m]\n438081.6 [m]\n449113.9 [m]\n422811.4 [m]\n429565.2 [m]\n436473.2 [m]\n662329.1 [m]\n439817.6 [m]\n451212.1 [m]\n144098.59 [m]\n534546.1 [m]\n587439.6 [m]\n438661.8 [m]\n450709.2 [m]\n528970.1 [m]\n440120.2 [m]\n636008.0 [m]\n372959.5 [m]\n73190.757 [m]\n511545.7 [m]\n434334.9 [m]\n438259.8 [m]\n416196.4 [m]\n433653.7 [m]\n373959.9 [m]\n433703.6 [m]\n445789.8 [m]\n437888.4 [m]\n443584.3 [m]\n459372.5 [m]\n441767.4 [m]\n425944.4 [m]\n425448.4 [m]\n454154.7 [m]\n448038.8 [m]\n433230.7 [m]\n268451.7 [m]\n442526.6 [m]\n416556.4 [m]\n449616.1 [m]\n517218.3 [m]\n406733.7 [m]\n439088.2 [m]\n515392.5 [m]\n445132.7 [m]\n440455.8 [m]\n445902.2 [m]\n441840.6 [m]\n555740.3 [m]\n442559.7 [m]\n655380.5 [m]\n480771.0 [m]\n433997.3 [m]\n\n\n374473.8 [m]\n429418.4 [m]\n352467.7 [m]\n355090.9 [m]\n481961.5 [m]\n240075.2 [m]\n247279.7 [m]\n266714.7 [m]\n370145.0 [m]\n363863.7 [m]\n368538.6 [m]\n381909.9 [m]\n374474.5 [m]\n363319.9 [m]\n374554.8 [m]\n370965.1 [m]\n363849.6 [m]\n379399.9 [m]\n500799.9 [m]\n498919.0 [m]\n452229.4 [m]\n432706.6 [m]\n426063.2 [m]\n429260.9 [m]\n402650.7 [m]\n291501.4 [m]\n425730.9 [m]\n374746.0 [m]\n423505.7 [m]\n366566.1 [m]\n377856.1 [m]\n426063.2 [m]\n372232.9 [m]\n374746.0 [m]\n504835.5 [m]\n426465.1 [m]\n374474.5 [m]\n424056.7 [m]\n374746.0 [m]\n372232.9 [m]\n378436.9 [m]\n360737.2 [m]\n363872.1 [m]\n394660.3 [m]\n435404.2 [m]\n410601.2 [m]\n226480.9 [m]\n5686.274 [m]\n195526.5 [m]\n388069.2 [m]\n302508.2 [m]\n226812.7 [m]\n486042.8 [m]\n334930.2 [m]\n436386.8 [m]\n372752.7 [m]\n490990.8 [m]\n384234.7 [m]\n322617.8 [m]\n523438.0 [m]\n369767.5 [m]\n352474.2 [m]\n197262.5 [m]\n372125.4 [m]\n371051.3 [m]\n447644.8 [m]\n356013.9 [m]\n383292.5 [m]\n371076.7 [m]\n425390.1 [m]\n388338.9 [m]\n381109.3 [m]\n426400.2 [m]\n323193.1 [m]\n429587.1 [m]\n381092.2 [m]\n372992.6 [m]\n41594.13 [m]\n184465.8 [m]\n439221.1 [m]\n397316.3 [m]\n308182.8 [m]\n334549.1 [m]\n507782.8 [m]\n373570.8 [m]\n367440.2 [m]\n372925.4 [m]\n353137.4 [m]\n372911.1 [m]\n353995.5 [m]\n371711.8 [m]\n355254.0 [m]\n373613.4 [m]\n195156.3 [m]\n167447.9 [m]\n423925.8 [m]\n427816.9 [m]\n337143.1 [m]\n615179.9 [m]\n423834.3 [m]\n428079.4 [m]\n390549.9 [m]\n236804.3 [m]\n432888.5 [m]\n352467.7 [m]\n372160.9 [m]\n376178.3 [m]\n357048.5 [m]\n355117.3 [m]\n388791.4 [m]\n614954.1 [m]\n371051.3 [m]\n386919.4 [m]\n120154.44 [m]\n508633.9 [m]\n501482.2 [m]\n371359.9 [m]\n388828.4 [m]\n433009.3 [m]\n364111.0 [m]\n588973.4 [m]\n334898.9 [m]\n60132.588 [m]\n506856.5 [m]\n362318.3 [m]\n374594.0 [m]\n349671.3 [m]\n359403.6 [m]\n336383.3 [m]\n359236.7 [m]\n374754.7 [m]\n369680.0 [m]\n364687.6 [m]\n396282.4 [m]\n373515.1 [m]\n349327.7 [m]\n362243.2 [m]\n390081.6 [m]\n375078.9 [m]\n357189.0 [m]\n238865.6 [m]\n374930.4 [m]\n355587.4 [m]\n376225.6 [m]\n423505.7 [m]\n343289.4 [m]\n363368.4 [m]\n422760.8 [m]\n369996.1 [m]\n378243.5 [m]\n386816.9 [m]\n374136.7 [m]\n460053.8 [m]\n374580.8 [m]\n606903.8 [m]\n407244.1 [m]\n359885.8 [m]\n\n\n411224.3 [m]\n484801.1 [m]\n388013.6 [m]\n392518.2 [m]\n543509.6 [m]\n249879.8 [m]\n203963.1 [m]\n302232.5 [m]\n403209.3 [m]\n401830.4 [m]\n407926.3 [m]\n413249.6 [m]\n411191.1 [m]\n397124.0 [m]\n411578.4 [m]\n409455.4 [m]\n401726.5 [m]\n412271.1 [m]\n496611.6 [m]\n504673.4 [m]\n447990.4 [m]\n487701.3 [m]\n481906.5 [m]\n484638.3 [m]\n448060.4 [m]\n308804.8 [m]\n481527.2 [m]\n411083.4 [m]\n478080.6 [m]\n408051.8 [m]\n410905.1 [m]\n481906.5 [m]\n408964.5 [m]\n411083.4 [m]\n500652.9 [m]\n482687.9 [m]\n411191.1 [m]\n478670.3 [m]\n411083.4 [m]\n408964.5 [m]\n415229.9 [m]\n401710.3 [m]\n401694.0 [m]\n428458.7 [m]\n491098.6 [m]\n465269.2 [m]\n285019.9 [m]\n73038.156 [m]\n176487.0 [m]\n431630.6 [m]\n358570.5 [m]\n285495.4 [m]\n546961.8 [m]\n351878.2 [m]\n491787.4 [m]\n409066.0 [m]\n554410.4 [m]\n415768.8 [m]\n339804.8 [m]\n581161.2 [m]\n411403.2 [m]\n394614.2 [m]\n254098.7 [m]\n408863.9 [m]\n408507.2 [m]\n443578.7 [m]\n393441.2 [m]\n416998.5 [m]\n411264.4 [m]\n481253.6 [m]\n424849.0 [m]\n412989.1 [m]\n482451.9 [m]\n340524.7 [m]\n485413.1 [m]\n412920.9 [m]\n419153.1 [m]\n77925.82 [m]\n249728.6 [m]\n499755.5 [m]\n460291.6 [m]\n359005.2 [m]\n397597.2 [m]\n518476.8 [m]\n410749.1 [m]\n402893.0 [m]\n410046.1 [m]\n390499.2 [m]\n408531.5 [m]\n391227.4 [m]\n405553.4 [m]\n396423.4 [m]\n407248.3 [m]\n251102.9 [m]\n196417.9 [m]\n478495.7 [m]\n483912.1 [m]\n353634.9 [m]\n639648.8 [m]\n478435.1 [m]\n484905.7 [m]\n424922.6 [m]\n247084.4 [m]\n489852.5 [m]\n388013.6 [m]\n407721.1 [m]\n416458.6 [m]\n392413.4 [m]\n396312.8 [m]\n412440.1 [m]\n639439.6 [m]\n408507.2 [m]\n421478.8 [m]\n121079.19 [m]\n519094.7 [m]\n550920.4 [m]\n407837.8 [m]\n421799.2 [m]\n489156.7 [m]\n406407.4 [m]\n613160.8 [m]\n351829.3 [m]\n38508.305 [m]\n504107.5 [m]\n401910.1 [m]\n408666.6 [m]\n385500.3 [m]\n400487.1 [m]\n353015.2 [m]\n400466.0 [m]\n413751.0 [m]\n406754.9 [m]\n408945.0 [m]\n430095.2 [m]\n410640.3 [m]\n391964.1 [m]\n395933.7 [m]\n424512.6 [m]\n415370.1 [m]\n399474.1 [m]\n248817.4 [m]\n411624.7 [m]\n387746.1 [m]\n416812.1 [m]\n478080.6 [m]\n377013.8 [m]\n405465.4 [m]\n476588.5 [m]\n411730.3 [m]\n411372.4 [m]\n417928.0 [m]\n410898.7 [m]\n516052.6 [m]\n411529.0 [m]\n632069.0 [m]\n448059.8 [m]\n400878.2 [m]\n\n\n375571.1 [m]\n454554.7 [m]\n352226.4 [m]\n357013.0 [m]\n517079.5 [m]\n213458.0 [m]\n185629.9 [m]\n266685.4 [m]\n367076.2 [m]\n366395.4 [m]\n372733.7 [m]\n376925.1 [m]\n375532.7 [m]\n361087.8 [m]\n375967.3 [m]\n374094.9 [m]\n366276.3 [m]\n376103.3 [m]\n462953.0 [m]\n469183.9 [m]\n414255.2 [m]\n457252.1 [m]\n451906.3 [m]\n454389.7 [m]\n414154.5 [m]\n272085.1 [m]\n451503.5 [m]\n375367.4 [m]\n447454.6 [m]\n373286.0 [m]\n374759.0 [m]\n451906.3 [m]\n373312.7 [m]\n375367.4 [m]\n466999.6 [m]\n452886.9 [m]\n375532.7 [m]\n448061.2 [m]\n375367.4 [m]\n373312.7 [m]\n379575.6 [m]\n366851.1 [m]\n366234.5 [m]\n392374.1 [m]\n460993.8 [m]\n434727.7 [m]\n257715.0 [m]\n69223.198 [m]\n145427.5 [m]\n397285.5 [m]\n329207.6 [m]\n258280.3 [m]\n520015.9 [m]\n315196.5 [m]\n461529.8 [m]\n373350.1 [m]\n529681.0 [m]\n379459.5 [m]\n303107.3 [m]\n551961.2 [m]\n376661.6 [m]\n360032.2 [m]\n226102.4 [m]\n373213.4 [m]\n372972.1 [m]\n409796.0 [m]\n357933.9 [m]\n380919.3 [m]\n376219.5 [m]\n451266.1 [m]\n389134.0 [m]\n376716.8 [m]\n452560.2 [m]\n303823.1 [m]\n455393.4 [m]\n376643.7 [m]\n385539.7 [m]\n52026.30 [m]\n228976.5 [m]\n472644.2 [m]\n435402.3 [m]\n327216.3 [m]\n373051.5 [m]\n482381.6 [m]\n375164.3 [m]\n367063.6 [m]\n374453.6 [m]\n354987.7 [m]\n372715.4 [m]\n355692.9 [m]\n369508.1 [m]\n361620.4 [m]\n371175.3 [m]\n222637.9 [m]\n160536.8 [m]\n447866.1 [m]\n454039.1 [m]\n316971.8 [m]\n602897.2 [m]\n447820.6 [m]\n455429.8 [m]\n388913.1 [m]\n210619.2 [m]\n460439.5 [m]\n352226.4 [m]\n371898.0 [m]\n381419.9 [m]\n356591.6 [m]\n361515.6 [m]\n375700.7 [m]\n602688.1 [m]\n372972.1 [m]\n385498.1 [m]\n84616.82 [m]\n483024.9 [m]\n518028.2 [m]\n372149.2 [m]\n385629.4 [m]\n459295.9 [m]\n371827.8 [m]\n576408.4 [m]\n315148.2 [m]\n4054.704 [m]\n470144.3 [m]\n366770.9 [m]\n372644.7 [m]\n349759.7 [m]\n365654.6 [m]\n316346.2 [m]\n365664.8 [m]\n378472.3 [m]\n371161.6 [m]\n374838.6 [m]\n394010.2 [m]\n375047.3 [m]\n357506.0 [m]\n359885.7 [m]\n388510.9 [m]\n380336.2 [m]\n364911.4 [m]\n212381.4 [m]\n375962.1 [m]\n351537.5 [m]\n381834.6 [m]\n447454.6 [m]\n341003.9 [m]\n370842.8 [m]\n445615.9 [m]\n377009.6 [m]\n375234.6 [m]\n381577.1 [m]\n375247.8 [m]\n486038.4 [m]\n375906.1 [m]\n595324.9 [m]\n413060.6 [m]\n366025.2 [m]\n\n\n378943.7 [m]\n455596.3 [m]\n355691.1 [m]\n360286.5 [m]\n517005.9 [m]\n218844.0 [m]\n191983.3 [m]\n269977.8 [m]\n370812.4 [m]\n369624.9 [m]\n375816.6 [m]\n380840.0 [m]\n378908.8 [m]\n364742.6 [m]\n379311.5 [m]\n377278.7 [m]\n369515.4 [m]\n379870.1 [m]\n469230.7 [m]\n475017.2 [m]\n420525.0 [m]\n458361.3 [m]\n452867.2 [m]\n455432.0 [m]\n416581.9 [m]\n277040.4 [m]\n452471.9 [m]\n378783.0 [m]\n448620.7 [m]\n376131.0 [m]\n378506.6 [m]\n452867.2 [m]\n376684.1 [m]\n378783.0 [m]\n473277.8 [m]\n453784.1 [m]\n378908.8 [m]\n449221.8 [m]\n378783.0 [m]\n376684.1 [m]\n382949.1 [m]\n369745.5 [m]\n369479.5 [m]\n396069.5 [m]\n461990.6 [m]\n435862.7 [m]\n257770.8 [m]\n63856.791 [m]\n152056.0 [m]\n399918.7 [m]\n329926.1 [m]\n258310.8 [m]\n520083.6 [m]\n320236.9 [m]\n462576.6 [m]\n376765.5 [m]\n529167.0 [m]\n383359.1 [m]\n308115.6 [m]\n552689.7 [m]\n379494.1 [m]\n362779.4 [m]\n226331.3 [m]\n376583.9 [m]\n376266.1 [m]\n416058.1 [m]\n361208.9 [m]\n384610.0 [m]\n379217.6 [m]\n452222.7 [m]\n392549.6 [m]\n380580.1 [m]\n453486.3 [m]\n308821.6 [m]\n456361.4 [m]\n380511.8 [m]\n387831.3 [m]\n50845.01 [m]\n227339.2 [m]\n472746.4 [m]\n434901.8 [m]\n328759.7 [m]\n372438.3 [m]\n487944.9 [m]\n378491.0 [m]\n370559.6 [m]\n377785.4 [m]\n358265.2 [m]\n376201.9 [m]\n358985.3 [m]\n373170.6 [m]\n364483.9 [m]\n374860.6 [m]\n223005.0 [m]\n164053.8 [m]\n449033.5 [m]\n454959.5 [m]\n322047.3 [m]\n607561.0 [m]\n448982.9 [m]\n456224.8 [m]\n392547.2 [m]\n215966.9 [m]\n461215.9 [m]\n355691.1 [m]\n375389.6 [m]\n384415.0 [m]\n360081.5 [m]\n364375.9 [m]\n380290.2 [m]\n607350.4 [m]\n376266.1 [m]\n389109.3 [m]\n90076.99 [m]\n488602.1 [m]\n520034.5 [m]\n375545.7 [m]\n389398.1 [m]\n460213.7 [m]\n374575.4 [m]\n581083.7 [m]\n320189.9 [m]\n6363.175 [m]\n476367.9 [m]\n369822.1 [m]\n376288.3 [m]\n353191.1 [m]\n368534.4 [m]\n321410.8 [m]\n368527.7 [m]\n381606.7 [m]\n374493.7 [m]\n377353.7 [m]\n397706.1 [m]\n378379.4 [m]\n360189.9 [m]\n363550.1 [m]\n392138.7 [m]\n383328.6 [m]\n367649.4 [m]\n217755.2 [m]\n379341.0 [m]\n355340.7 [m]\n384795.5 [m]\n448620.7 [m]\n344636.9 [m]\n373612.4 [m]\n446899.5 [m]\n379831.1 [m]\n378975.0 [m]\n385519.2 [m]\n378618.7 [m]\n487011.1 [m]\n379258.2 [m]\n599930.5 [m]\n416036.4 [m]\n368916.1 [m]\n\n\n\n\n\nOften, we may only be interested in the closest facility, and with a little bit more work we can add a column to our population weighted centroid dataset detailing the distance to the closest hospital. First, we will use st_nearest_feature() to get the index position of the closest hospital within our hospital dataset. Then, we use st_distance() to calculate the distance between each population weighted centroid and its closest hospital. Notice that st_distance() has been given the parameter by_element = TRUE, which yields a vector with the distance between the first elements of x and y, the second, etc.\n\nread_csv(\"data/US/COP2020/COP2020_tract.txt\") %&gt;%\n    filter(STATEFP == \"04\") %&gt;%\n    st_as_sf(coords = c(\"LONGITUDE\", \"LATITUDE\"), crs = 4326) %&gt;%\n    mutate(nearest = st_nearest_feature(., AZ_hosp)) %&gt;% \n    mutate(near_distance = st_distance(., AZ_hosp[nearest,], by_element = TRUE)) %&gt;%\n    select(-nearest)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSTATEFP\nCOUNTYFP\nTRACTCE\nPOPULATION\ngeometry\nnear_distance\n\n\n\n\n04\n001\n942600\n1549\nPOINT (-109.8449 36.76841)\n73500.537 [m]\n\n\n04\n001\n942700\n4491\nPOINT (-109.3544 36.77035)\n73190.757 [m]\n\n\n04\n001\n944000\n5348\nPOINT (-109.088 35.78314)\n5686.274 [m]\n\n\n04\n001\n944100\n5495\nPOINT (-109.2781 36.37803)\n38508.305 [m]\n\n\n04\n001\n944201\n4021\nPOINT (-109.6018 36.17521)\n4054.704 [m]\n\n\n\n\n\n\n\nGeocoding\nYou may not always have the latitude and longitude data for some set of point data that you are interested, but you may have addresses. That’s where geocoding comes in. Geocoding is a process that allows us to retrieve coordinates for address data.\ntidygeocoder is the most user friendly package for this kind of work. tidygeocoder interfaces with multiple geocoders. Check out the different geocoding options here.\n\n\n\n\n\n\nNote\n\n\n\nAddresses alone are sufficient information to reidentify individuals. If you are working with sensitivity data DO NOT use a non-compliant geocoder.\n\n\n\nlibrary(tidygeocoder)\n\nAZ_hosp %&gt;%\n    mutate(addr = \n        str_c(ADDRESS, \", \", CITY, \", AZ \", ZIP)) %&gt;%\n    slice_head(n = 5) %&gt;%\n    geocode(addr, method = \"osm\")\n\n\n\nPassing 5 addresses to the Nominatim single address geocoder\n\n\nQuery completed in: 5 seconds\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOBJECTID\nOBJECTID_1\nRUN_DATE\nsource\nBUREAU\nFACID\nFACILITY_N\nLICENSE_NU\nLICENSE_EF\nLICENSE_EX\nMEDICARE_I\nMEDICARE_1\nMEDICARE_2\nTELEPHONE\nFACILITY_T\nTYPE\nSUBTYPE\nCATEGORY\nICON_CATEG\nMEDICARE_T\nLICENSE_TY\nLICENSE_SU\nCAPACITY\nADDRESS\nCITY\nZIP\nCOUNTY\nOPERATION_\nX_Is_Publi\nHOSPITAL_G\nKeyID\nADHSCODE\nN_AddressT\nN_LocatorT\nN_ADDRESS\nN_ADDR2\nN_CITY\nN_COUNTY\nN_FULLADDR\nN_LAT\nN_LON\nN_STATE\nN_ZIP\nN_ZIP4\nN_BLOCK\nRESERVATIO\nRESERV_ID\nR_METHOD\noPCA\noPCA_ID\nP_Method\nP_Reliable\nSOURCE_VW\nCASELOAD\naddr\ngeometry\nlat\nlong\n\n\n\n\n1\n2822\n2024-05-06\nASPEN\nMED\nAZTH00002\nBANNER- UNIVERSITY MEDICAL CENTER PHOENIX\nNA\nNA\nNA\n039802\nNA\nNA\n(602)239-2716\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n1441 N 12TH\nPHOENIX\n85006\nMARICOPA\nACTIVE\nYes\nNA\nAZTH00002\nA\nAS0\nCENTRUS-TOMTOM\n1441 N 12TH ST\nNA\nPHOENIX\nMARICOPA COUNTY\n1441 N 12TH ST , PHOENIX, AZ 85006-2837\n33.46410\n-112.0562\nAZ\n85006\n2837\n4.013113e+13\nNA\nNA\nNA\nCENTRAL CITY VILLAGE\n39\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n1441 N 12TH, PHOENIX, AZ 85006\nPOINT (-112.0562 33.46411)\nNA\nNA\n\n\n2\n2823\n2024-05-06\nASPEN\nMED\nAZTH00003\nBANNER UNIVERSITY MEDICAL CTR AT THE AZ HEALTH SC\nNA\nNA\nNA\n039800\nNA\nNA\n(520)694-0111\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n1501 NORTH CAMPBELL AVENUE\nTUCSON\n85724\nPIMA\nACTIVE\nYes\nNA\nAZTH00003\nA\nAS0\nCENTRUS-TOMTOM\n1501 N CAMPBELL AVE\nNA\nTUCSON\nPIMA COUNTY\n1501 N CAMPBELL AVE , TUCSON, AZ 85724-0001\n32.24080\n-110.9443\nAZ\n85724\n1\n4.019002e+13\nNA\nNA\nNA\nTUCSON CENTRAL\n107\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n1501 NORTH CAMPBELL AVENUE, TUCSON, AZ 85724\nPOINT (-110.9443 32.24081)\n32.24123\n-110.9456\n\n\n3\n2824\n2024-05-06\nASPEN\nMED\nAZTH00004\nMAYO CLINIC HOSPITAL\nNA\nNA\nNA\n039801\nNA\nNA\n(480)342-1900\nNA\nHOSPITAL\nTRANSPLANT\nHOSPITAL\nHOSPITAL\nHOSPITAL - TRANSPLANT HOSPITAL\nFEDERAL ONLY\nNA\n0\n5777 EAST MAYO BOULEVARD\nPHOENIX\n85054\nMARICOPA\nACTIVE\nYes\nNA\nAZTH00004\nA\nAS0\nCENTRUS-TOMTOM\n5777 E MAYO BLVD\nNA\nPHOENIX\nMARICOPA COUNTY\n5777 E MAYO BLVD , PHOENIX, AZ 85054-4502\n33.66316\n-111.9557\nAZ\n85054\n4502\n4.013615e+13\nNA\nNA\nNA\nDESERT VIEW VILLAGE\n30\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n5777 EAST MAYO BOULEVARD, PHOENIX, AZ 85054\nPOINT (-111.9557 33.66317)\n33.65883\n-111.9553\n\n\n4\n3774\n2024-05-06\nASPEN\nMED\nBH7347\nVIA LINDA BEHAVIORAL HOSPITAL\nSH11520\n2023-03-01\n2025-02-28\n034040\nNA\nNA\n(480)476-7000\n12\nHOSPITAL\nPSYCHIATRIC\nHOSPITAL\nHOSPITAL\nHOSPITAL - PSYCHIATRIC\nHOSPITAL\nHOSPITAL - SPECIAL\n120\n9160 EAST HORSESHOE RD\nSCOTTSDALE\n85258\nMARICOPA\nACTIVE\nYes\nNA\nBH7347\nA\nAS0\nCENTRUS-TOMTOM\n9160 E HORSESHOE RD\nNA\nSCOTTSDALE\nMARICOPA COUNTY\n9160 E HORSESHOE RD , SCOTTSDALE, AZ 85258-4666\n33.56670\n-111.8840\nAZ\n85258\n4666\n4.013941e+13\nSalt River Reservation\n3340F\nCoordinates\nSALT RIVER PIMA-MARICOPA INDIAN COMMUNITY\n62\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n9160 EAST HORSESHOE RD, SCOTTSDALE, AZ 85258\nPOINT (-111.884 33.56671)\n33.56763\n-111.8837\n\n\n5\n4893\n2024-05-06\nASPEN\nMED\nMED0198\nCANYON VISTA MEDICAL CENTER\nH7130\n2020-02-18\n2024-12-27\n030043\nNA\nNA\n(520)263-2220\n11\nHOSPITAL\nSHORT TERM\nHOSPITAL\nHOSPITAL\nHOSPITAL - SHORT TERM\nHOSPITAL\nHOSPITAL - GENERAL\n100\n5700 EAST HIGHWAY 90\nSIERRA VISTA\n85635\nCOCHISE\nACTIVE\nYes\nNA\nMED0198\nA\nAS0\nCENTRUS-TOMTOM\n5700 E HIGHWAY 90\nNA\nSIERRA VISTA\nCOCHISE COUNTY\n5700 E HIGHWAY 90 , SIERRA VISTA, AZ 85635-9110\n31.55449\n-110.2319\nAZ\n85635\n9110\n4.003002e+13\nNA\nNA\nNA\nSIERRA VISTA\n123\nCoordinates\nNA\nTableau.vw_licensing_facilities\nNA\n5700 EAST HIGHWAY 90, SIERRA VISTA, AZ 85635\nPOINT (-110.2319 31.5545)\nNA\nNA"
  },
  {
    "objectID": "notes.html#best-practices",
    "href": "notes.html#best-practices",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Best Practices",
    "text": "Best Practices\nThe following are to get you thinking about some best practices when you are working with your own data. Although these remarks may be short, they can be remarkably important to your development as a geospatial analyst.\n\nMap Making\nMap making is an art that involves an iterative process of making a map, getting feedback from stakeholders (or even giving yourself feedback), making a map, getting more feedback and so on.\nAt the very least you should be thinking about\n\nAudience - who is going to see your map, what information might be relevant to them, how much familiarity does the viewer have with the data\n\nMedium - how is your map going to be shared, what degree of interaction can the user have with your map, where is the audience going to see your map\n\nMessage - what is the message you hope your audience takes away\n\n\n\nSection 508 Compliance\nSection 508 refers to a portion of the Rehabilitation Act of 1973 in the United States that mandates that federal agencies ensure that their electronic and information technology is accessible to people with disabilities. Even if you don’t work within a federal agency, Section 508 sets out a good framework for ensuring that our maps are truly accessible to all.\nIn practice, this can take form as…\n\nUsing a monochromatic color scale (unless appropriate)\n\nProviding descriptive text or alt text\n\nIf possible, including map, description, and data together\n\nFor more information about accessibility guidelines. Check out these Map Accessibility guidelines published by the Minnesota IT Services.\n\n\nBe Careful With Location Data\nLocation data alone is sufficient information to reidentify an individual, business, or other entity. If you have been provided with sensitive location data, it is paramount that you maintain the privacy of the data.\nThis means…\n\nNot using a non-compliant geocoder - remember you’re sending those addresses to the geocoding service\n\nMasking data - aggregating data through a spatial join and depicting that data with a symbol map or dot density map will allow you to represent the data without exposing potentially sensitive information\n\nRemoving georeferenced data from PDFs or other georeferenced formats\n\n\n\nProvide Metadata\nIt is a good practice to add the following information to your map:\n\nAuthor\n\nDate\n\nData source and year"
  },
  {
    "objectID": "presentation.html#prerequisites",
    "href": "presentation.html#prerequisites",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Prerequisites",
    "text": "Prerequisites\n\nR\nRStudio or other IDE\nR packages (see Notes)\nPrior knowledge of basic tidyverse functions.\nIf you are looking to learn how to use the R and the tidyverse for data science, we recommend R for Data Science. For more information about how R the programming language works, we recommend Advanced R."
  },
  {
    "objectID": "presentation.html#why-are-you-here",
    "href": "presentation.html#why-are-you-here",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Why are you here?",
    "text": "Why are you here?\nWhat questions led to you taking this training?"
  },
  {
    "objectID": "presentation.html#almost-all-data-is-spatial",
    "href": "presentation.html#almost-all-data-is-spatial",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "(Almost) All Data is Spatial",
    "text": "(Almost) All Data is Spatial\n\nWhen conducting population research, almost everything has a spatial aspect to it.\nWe just might not have access to it\nFor those we do, it is important to incorporate spatial techniques to explore our data"
  },
  {
    "objectID": "presentation.html#spatial-questions",
    "href": "presentation.html#spatial-questions",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Spatial Questions",
    "text": "Spatial Questions\n\nHow does a variable vary by region?\nIs there a relationship between variables by region?\nHow many facilities are within a region?\nHow far is the nearest facility?\nDoes proximity to a facility have a relationship with another variable?\nHow has access changed over time?"
  },
  {
    "objectID": "presentation.html#using-r-to-answer-spatial-questions",
    "href": "presentation.html#using-r-to-answer-spatial-questions",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Using R to Answer Spatial Questions",
    "text": "Using R to Answer Spatial Questions\n\n\n\nR is open source and reproducible\nR is flexible\nR can be used as part of a workflow or be the whole workflow"
  },
  {
    "objectID": "presentation.html#vector-vs-raster",
    "href": "presentation.html#vector-vs-raster",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Vector vs Raster",
    "text": "Vector vs Raster\n\n\n\nVector data is made up of points, lines, and polygons\n\nsf package\n\nRaster data is made up of cells\n\nstars package"
  },
  {
    "objectID": "presentation.html#sf",
    "href": "presentation.html#sf",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "sf",
    "text": "sf\n\nPrimary package used for geocomputation within R\nUnified interface for several different geospatial libraries\nRepresents spatial data as a data.frame or tibble with a geometry list-column with the class sf"
  },
  {
    "objectID": "presentation.html#stars",
    "href": "presentation.html#stars",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "stars",
    "text": "stars\n\n\n\nOne of two modern packages used for rasters\nAllows for multidimensional data\nWell integrated with sf\nWe will not cover most stars functionality"
  },
  {
    "objectID": "presentation.html#spatial-file-formats",
    "href": "presentation.html#spatial-file-formats",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Spatial File Formats",
    "text": "Spatial File Formats\n\n\n\n\n\n\n\n\n\n\n\nShapefile\nGeodatabase\nGeojson\nGeopackage\n\n\n\n\nSpeed\nMedium\nFast\nSlow\nFast\n\n\nSize limit\n2 GB\n256 TB\nNo limit\n140 TB\n\n\nFiles\nAt least 3\nMany\n1\n1\n\n\nMultiple Features\nNo\nYes\nNo\nYes\n\n\nOther Notes\nCommon\nProprietary\nPlain Text\nOpen"
  },
  {
    "objectID": "presentation.html#reading-spatial-data-in-r",
    "href": "presentation.html#reading-spatial-data-in-r",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Reading Spatial Data in R",
    "text": "Reading Spatial Data in R\n\nReading from sf is easy, simply specify the path\n\n\nlibrary(sf)\n\nAZ_Hospitals &lt;- st_read(\"data/AZ/hospitals\")\nAZ_Hospitals\n\n\n\nSimple feature collection with 157 features and 54 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -114.6334 ymin: 31.341 xmax: -109.04 ymax: 36.91705\nGeodetic CRS:  WGS 84\nFirst 10 features:\n   OBJECTID OBJECTID_1   RUN_DATE source BUREAU     FACID\n1         1       2822 2024-05-06  ASPEN    MED AZTH00002\n2         2       2823 2024-05-06  ASPEN    MED AZTH00003\n3         3       2824 2024-05-06  ASPEN    MED AZTH00004\n4         4       3774 2024-05-06  ASPEN    MED    BH7347\n5         5       4893 2024-05-06  ASPEN    MED   MED0198\n6         6       4894 2024-05-06  ASPEN    MED   MED0201\n7         7       4895 2024-05-06  ASPEN    MED   MED0203\n8         8       4896 2024-05-06  ASPEN    MED   MED0204\n9         9       4901 2024-05-06  ASPEN    MED   MED0209\n10       10       4902 2024-05-06  ASPEN    MED   MED0211\n                                          FACILITY_N LICENSE_NU LICENSE_EF\n1         BANNER- UNIVERSITY  MEDICAL CENTER PHOENIX       &lt;NA&gt;       &lt;NA&gt;\n2  BANNER UNIVERSITY MEDICAL CTR AT THE AZ HEALTH SC       &lt;NA&gt;       &lt;NA&gt;\n3                               MAYO CLINIC HOSPITAL       &lt;NA&gt;       &lt;NA&gt;\n4                      VIA LINDA BEHAVIORAL HOSPITAL    SH11520 2023-03-01\n5                        CANYON VISTA MEDICAL CENTER      H7130 2020-02-18\n6                           FLAGSTAFF MEDICAL CENTER      H0169 2020-12-01\n7                                      PAGE HOSPITAL      H0086 2022-01-06\n8                       BANNER PAYSON MEDICAL CENTER      H7250 2021-10-15\n9                            ABRAZO ARROWHEAD CAMPUS      H0175 2021-12-01\n10                 BANNER BEHAVIORAL HEALTH HOSPITAL     SH0147 2021-02-01\n   LICENSE_EX MEDICARE_I MEDICARE_1 MEDICARE_2     TELEPHONE FACILITY_T\n1        &lt;NA&gt;     039802       &lt;NA&gt;       &lt;NA&gt; (602)239-2716         NA\n2        &lt;NA&gt;     039800       &lt;NA&gt;       &lt;NA&gt; (520)694-0111         NA\n3        &lt;NA&gt;     039801       &lt;NA&gt;       &lt;NA&gt; (480)342-1900         NA\n4  2025-02-28     034040       &lt;NA&gt;       &lt;NA&gt; (480)476-7000         12\n5  2024-12-27     030043       &lt;NA&gt;       &lt;NA&gt; (520)263-2220         11\n6  2024-11-30     030023       &lt;NA&gt;       &lt;NA&gt; (928)779-3366         11\n7  2024-12-28     031304       &lt;NA&gt;       &lt;NA&gt; (928)645-2424         14\n8  2024-12-24     031318       &lt;NA&gt;       &lt;NA&gt; (928)471-3222         14\n9  2024-12-27     030094       &lt;NA&gt;       &lt;NA&gt; (623)561-1000         11\n10 2024-12-24     034004       &lt;NA&gt;       &lt;NA&gt; (480)448-7500         12\n       TYPE                   SUBTYPE CATEGORY ICON_CATEG\n1  HOSPITAL                TRANSPLANT HOSPITAL   HOSPITAL\n2  HOSPITAL                TRANSPLANT HOSPITAL   HOSPITAL\n3  HOSPITAL                TRANSPLANT HOSPITAL   HOSPITAL\n4  HOSPITAL               PSYCHIATRIC HOSPITAL   HOSPITAL\n5  HOSPITAL                SHORT TERM HOSPITAL   HOSPITAL\n6  HOSPITAL                SHORT TERM HOSPITAL   HOSPITAL\n7  HOSPITAL CRITICAL ACCESS HOSPITALS HOSPITAL   HOSPITAL\n8  HOSPITAL CRITICAL ACCESS HOSPITALS HOSPITAL   HOSPITAL\n9  HOSPITAL                SHORT TERM HOSPITAL   HOSPITAL\n10 HOSPITAL               PSYCHIATRIC HOSPITAL   HOSPITAL\n                             MEDICARE_T   LICENSE_TY         LICENSE_SU\n1        HOSPITAL - TRANSPLANT HOSPITAL FEDERAL ONLY               &lt;NA&gt;\n2        HOSPITAL - TRANSPLANT HOSPITAL FEDERAL ONLY               &lt;NA&gt;\n3        HOSPITAL - TRANSPLANT HOSPITAL FEDERAL ONLY               &lt;NA&gt;\n4                HOSPITAL - PSYCHIATRIC     HOSPITAL HOSPITAL - SPECIAL\n5                 HOSPITAL - SHORT TERM     HOSPITAL HOSPITAL - GENERAL\n6                 HOSPITAL - SHORT TERM     HOSPITAL HOSPITAL - GENERAL\n7  HOSPITAL - CRITICAL ACCESS HOSPITALS     HOSPITAL HOSPITAL - GENERAL\n8  HOSPITAL - CRITICAL ACCESS HOSPITALS     HOSPITAL HOSPITAL - GENERAL\n9                 HOSPITAL - SHORT TERM     HOSPITAL HOSPITAL - GENERAL\n10               HOSPITAL - PSYCHIATRIC     HOSPITAL HOSPITAL - SPECIAL\n   CAPACITY                    ADDRESS         CITY   ZIP   COUNTY OPERATION_\n1         0                1441 N 12TH      PHOENIX 85006 MARICOPA     ACTIVE\n2         0 1501 NORTH CAMPBELL AVENUE       TUCSON 85724     PIMA     ACTIVE\n3         0   5777 EAST MAYO BOULEVARD      PHOENIX 85054 MARICOPA     ACTIVE\n4       120     9160 EAST HORSESHOE RD   SCOTTSDALE 85258 MARICOPA     ACTIVE\n5       100       5700 EAST HIGHWAY 90 SIERRA VISTA 85635  COCHISE     ACTIVE\n6       268   1200 NORTH BEAVER STREET    FLAGSTAFF 86001 COCONINO     ACTIVE\n7        25     501 NORTH NAVAJO DRIVE         PAGE 86040 COCONINO     ACTIVE\n8        25  807 SOUTH PONDEROSA DRIVE       PAYSON 85541     GILA     ACTIVE\n9       229    18701 NORTH 67TH AVENUE     GLENDALE 85308 MARICOPA     ACTIVE\n10      156      7575 EAST EARLL DRIVE   SCOTTSDALE 85251 MARICOPA     ACTIVE\n   X_Is_Publi HOSPITAL_G     KeyID ADHSCODE N_AddressT     N_LocatorT\n1         Yes       &lt;NA&gt; AZTH00002        A        AS0 CENTRUS-TOMTOM\n2         Yes       &lt;NA&gt; AZTH00003        A        AS0 CENTRUS-TOMTOM\n3         Yes       &lt;NA&gt; AZTH00004        A        AS0 CENTRUS-TOMTOM\n4         Yes       &lt;NA&gt;    BH7347        A        AS0 CENTRUS-TOMTOM\n5         Yes       &lt;NA&gt;   MED0198        A        AS0 CENTRUS-TOMTOM\n6         Yes       &lt;NA&gt;   MED0201        A        AS0 CENTRUS-TOMTOM\n7         Yes       &lt;NA&gt;   MED0203        A        AS0 CENTRUS-TOMTOM\n8         Yes       &lt;NA&gt;   MED0204        A        AS0 CENTRUS-TOMTOM\n9         Yes       &lt;NA&gt;   MED0209        A        AS0 CENTRUS-TOMTOM\n10        Yes       &lt;NA&gt;   MED0211        A        AS0 CENTRUS-TOMTOM\n             N_ADDRESS N_ADDR2       N_CITY        N_COUNTY\n1       1441 N 12TH ST    &lt;NA&gt;      PHOENIX MARICOPA COUNTY\n2  1501 N CAMPBELL AVE    &lt;NA&gt;       TUCSON     PIMA COUNTY\n3     5777 E MAYO BLVD    &lt;NA&gt;      PHOENIX MARICOPA COUNTY\n4  9160 E HORSESHOE RD    &lt;NA&gt;   SCOTTSDALE MARICOPA COUNTY\n5    5700 E HIGHWAY 90    &lt;NA&gt; SIERRA VISTA  COCHISE COUNTY\n6     1200 N BEAVER ST    &lt;NA&gt;    FLAGSTAFF COCONINO COUNTY\n7      501 N NAVAJO DR    &lt;NA&gt;         PAGE COCONINO COUNTY\n8   807 S PONDEROSA ST    &lt;NA&gt;       PAYSON     GILA COUNTY\n9     18701 N 67TH AVE    &lt;NA&gt;     GLENDALE MARICOPA COUNTY\n10     7575 E EARLL DR    &lt;NA&gt;   SCOTTSDALE MARICOPA COUNTY\n                                         N_FULLADDR    N_LAT     N_LON N_STATE\n1          1441 N 12TH ST , PHOENIX, AZ  85006-2837 33.46410 -112.0562      AZ\n2      1501 N CAMPBELL AVE , TUCSON, AZ  85724-0001 32.24080 -110.9443      AZ\n3        5777 E MAYO BLVD , PHOENIX, AZ  85054-4502 33.66316 -111.9557      AZ\n4  9160 E HORSESHOE RD , SCOTTSDALE, AZ  85258-4666 33.56670 -111.8840      AZ\n5  5700 E HIGHWAY 90 , SIERRA VISTA, AZ  85635-9110 31.55449 -110.2319      AZ\n6      1200 N BEAVER ST , FLAGSTAFF, AZ  86001-3118 35.20949 -111.6447      AZ\n7            501 N NAVAJO DR , PAGE, AZ  86040-0959 36.91705 -111.4634      AZ\n8       807 S PONDEROSA ST , PAYSON, AZ  85541-5542 34.23130 -111.3212      AZ\n9       18701 N 67TH AVE , GLENDALE, AZ  85308-7100 33.65504 -112.2027      AZ\n10     7575 E EARLL DR , SCOTTSDALE, AZ  85251-6915 33.48385 -111.9183      AZ\n   N_ZIP N_ZIP4      N_BLOCK             RESERVATIO RESERV_ID    R_METHOD\n1  85006   2837 4.013113e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n2  85724      1 4.019002e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n3  85054   4502 4.013615e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n4  85258   4666 4.013941e+13 Salt River Reservation     3340F Coordinates\n5  85635   9110 4.003002e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n6  86001   3118 4.005000e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n7  86040    959 4.005002e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n8  85541   5542 4.007001e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n9  85308   7100 4.013616e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n10 85251   6915 4.013218e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n                                        oPCA oPCA_ID    P_Method P_Reliable\n1                       CENTRAL CITY VILLAGE      39 Coordinates       &lt;NA&gt;\n2                             TUCSON CENTRAL     107 Coordinates       &lt;NA&gt;\n3                        DESERT VIEW VILLAGE      30 Coordinates       &lt;NA&gt;\n4  SALT RIVER PIMA-MARICOPA INDIAN COMMUNITY      62 Coordinates       &lt;NA&gt;\n5                               SIERRA VISTA     123 Coordinates       &lt;NA&gt;\n6                                  FLAGSTAFF      10 Coordinates       &lt;NA&gt;\n7                                       PAGE       7 Coordinates       &lt;NA&gt;\n8                                     PAYSON      23 Coordinates       &lt;NA&gt;\n9                             GLENDALE NORTH      56 Coordinates       &lt;NA&gt;\n10                          SCOTTSDALE SOUTH      45 Coordinates       &lt;NA&gt;\n                         SOURCE_VW CASELOAD                   geometry\n1  Tableau.vw_licensing_facilities     &lt;NA&gt; POINT (-112.0562 33.46411)\n2  Tableau.vw_licensing_facilities     &lt;NA&gt; POINT (-110.9443 32.24081)\n3  Tableau.vw_licensing_facilities     &lt;NA&gt; POINT (-111.9557 33.66317)\n4  Tableau.vw_licensing_facilities     &lt;NA&gt;  POINT (-111.884 33.56671)\n5  Tableau.vw_licensing_facilities     &lt;NA&gt;  POINT (-110.2319 31.5545)\n6  Tableau.vw_licensing_facilities     &lt;NA&gt; POINT (-111.6447 35.20949)\n7  Tableau.vw_licensing_facilities     &lt;NA&gt; POINT (-111.4634 36.91705)\n8  Tableau.vw_licensing_facilities     &lt;NA&gt;  POINT (-111.3212 34.2313)\n9  Tableau.vw_licensing_facilities     &lt;NA&gt; POINT (-112.2027 33.65505)\n10 Tableau.vw_licensing_facilities     &lt;NA&gt; POINT (-111.9183 33.48386)"
  },
  {
    "objectID": "presentation.html#reading-spatial-data-in-r-1",
    "href": "presentation.html#reading-spatial-data-in-r-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Reading Spatial Data in R",
    "text": "Reading Spatial Data in R\n\nIf you are reading from a file format with multiple layers, specify the layer\n\n\nlibrary(sf)\n\nAZ_StatAreas &lt;- st_read(\"data/AZ/statAreas.gdb\", layer = \"statAreas\")\nAZ_StatAreas\n\n\n\nSimple feature collection with 139 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -114.8163 ymin: 31.33234 xmax: -109.0452 ymax: 37.00372\nGeodetic CRS:  WGS 84\nFirst 10 features:\n   CSA_ID            CSA_NAME AREA_SQMILE POP2020  Shape__Area Shape__Length\n1       1       Colorado City   5071.6400    8017 141389179634     1890568.8\n2      10            Williams   4607.9690   10528 128462767671     2396775.1\n3     100            San Luis    117.6636   37668   3280270845      307260.4\n4     101         Gold Canyon    354.4739   15095   9882163593      502534.3\n5     102            Florence    560.2777   37684  15619641198      848217.8\n6     103      San Tan Valley    208.9516  114281   5825234969      348896.7\n7     104 Saddlebrooke/Oracle   2165.1450   24960  60360749130     1342973.8\n8     105            Maricopa    187.5613   63845   5228908746      352286.1\n9     106            Coolidge    120.7299   17121   3365754248      306430.5\n10    107         Casa Grande    825.9896   65107  23027262644      736741.1\n                            SHAPE\n1  MULTIPOLYGON (((-113.982 37...\n2  MULTIPOLYGON (((-112.5724 3...\n3  MULTIPOLYGON (((-114.625 32...\n4  MULTIPOLYGON (((-111.04 33....\n5  MULTIPOLYGON (((-111.0667 3...\n6  MULTIPOLYGON (((-111.5609 3...\n7  MULTIPOLYGON (((-110.4518 3...\n8  MULTIPOLYGON (((-112.0127 3...\n9  MULTIPOLYGON (((-111.5545 3...\n10 MULTIPOLYGON (((-112.0303 3..."
  },
  {
    "objectID": "presentation.html#reading-spatial-data-in-r-2",
    "href": "presentation.html#reading-spatial-data-in-r-2",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Reading Spatial Data in R",
    "text": "Reading Spatial Data in R\n\nIf you want your output to be a tibble, specify as_tibble = TRUE\n\n\nlibrary(sf)\n\nAZ_WICVendors &lt;- st_read(\"data/AZ/WICVendors.geojson\", as_tibble = TRUE)\nAZ_WICVendors\n\n\n\nSimple feature collection with 518 features and 9 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -114.7864 ymin: 31.33913 xmax: -109.0569 ymax: 37.17732\nGeodetic CRS:  WGS 84\n# A tibble: 518 × 10\n   OBJECTID VENDOR_NAME       ADDRESS CITY  STATE ZIPCODE  PHONE STREET_ADDRESS2\n      &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;          \n 1        1 FRY'S FOOD AND D… 2700 W… TEMPE ARIZ…   85282 6.02e9 &lt;NA&gt;           \n 2        2 FRY'S FOOD AND D… 3036 E… PHOE… ARIZ…   85016 6.02e9 &lt;NA&gt;           \n 3        3 FRY'S FOOD AND D… 1835 E… TEMPE ARIZ…   85283 4.81e9 &lt;NA&gt;           \n 4        4 FRY'S FOOD AND D… 1100 S… COTT… ARIZ…   86326 9.29e9 BUILDING A     \n 5        5 FRY'S FOOD AND D… 9401 E… TUCS… ARIZ…   85710 5.21e9 &lt;NA&gt;           \n 6        6 FRY'S FOOD AND D… 520 E.… PHOE… ARIZ…   85040 6.02e9 &lt;NA&gt;           \n 7        7 FRY'S FOOD AND D… 201 N.… FLAG… ARIZ…   86001 4.81e9 &lt;NA&gt;           \n 8        8 FRY'S FOOD AND D… 950 W.… PRES… ARIZ…   86301 9.29e9 &lt;NA&gt;           \n 9        9 FRY'S FOOD AND D… 2480 N… TUCS… ARIZ…   85712 5.20e9 &lt;NA&gt;           \n10       10 FRY'S FOOD AND D… 7455 W… PEOR… ARIZ…   85381 6.23e9 &lt;NA&gt;           \n# ℹ 508 more rows\n# ℹ 2 more variables: FULLADDRESS &lt;chr&gt;, geometry &lt;POINT [°]&gt;"
  },
  {
    "objectID": "presentation.html#reading-spatial-data-in-r-3",
    "href": "presentation.html#reading-spatial-data-in-r-3",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Reading Spatial Data in R",
    "text": "Reading Spatial Data in R\n\nYou can even read from a url\n\n\nlibrary(sf)\n\nAZ_UCCs &lt;- st_read(\"https://services1.arcgis.com/mpVYz37anSdrK4d8/arcgis/rest/services/UrgentCareLocs/FeatureServer/0/query?outFields=*&where=1%3D1&f=geojson\")\nAZ_UCCs\n\n\n\nSimple feature collection with 273 features and 32 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -114.7862 ymin: 31.36436 xmax: -109.9916 ymax: 36.91674\nGeodetic CRS:  WGS 84\nFirst 10 features:\n   OBJECTID_1 OBJECTID RECID                                               NAME\n1           1        1     1                                 BANNER URGENT CARE\n2           2        2     2                                 BANNER URGENT CARE\n3           3        3     3                      SUMMIT HEALTHCARE URGENT CARE\n4           4        4     4                                      CARBON HEALTH\n5           5        5     5                DIGNITY HEALTH URGENT CARE- GILBERT\n6           6        6     6              DIGNITY HEALTH URGENT CARE- AHWATUKEE\n7           7        7     7 PHOENIX CHILDREN'S SPECIALTY&URGENT CARE,E VLY OTC\n8           8        8     8                 HAVASU PRIMARY CARE AND PEDIATRICS\n9           9        9     9                                     CARBON HEALTH \n10         10       10    10  PHOENIX CHILDREN'S SPECIALTY & URGENT CARE NW CTR\n                                      ADDRESS             CITY   ZIP  TELEPHONE\n1                       35945 NORTH GARY ROAD   SAN TAN VALLEY 85143 4808275750\n2                     21980 NORTH 83RD AVENUE           PEORIA 85383 6234656375\n3  4951 SOUTH WHITE MOUNTAIN ROAD BUILDING A          SHOW LOW 85901 9285323926\n4              1880 EAST TANGERINE, SUITE 100       ORO VALLEY 85755 5209007007\n5                     1501 NORTH GILBERT ROAD          GILBERT 85234 4807283000\n6                4545 EAST CHANDLER BOULEVARD          PHOENIX 85044 4807283000\n7                   5131 EAST SOUTHERN AVENUE             MESA 85206 4808335437\n8       1799 NORTH KIOWA BOULEVARD, SUITE 104 LAKE HAVASU CITY 86403 9285051030\n9         1040 SOUTH HARRISON ROAD, SUITE 120           TUCSON 85715 5209095221\n10          20325 NORTH 51ST AVENUE SUITE 116         GLENDALE 85308 6239725437\n   Latitude Longitude objID KeyID ADHSCODE N_AddressType  N_LocatorType\n1  33.20571 -111.5823     1     1        A       ROOFTOP         GOOGLE\n2  33.68333 -112.2379     2     2        A           AS0 CENTRUS-TOMTOM\n3  34.20512 -110.0204     3     3        A           AS0 CENTRUS-TOMTOM\n4  32.42697 -110.9438     4     4        A           AS0 CENTRUS-TOMTOM\n5  33.37658 -111.7884     5     5        A           AS0 CENTRUS-TOMTOM\n6  33.30504 -111.9851     6     6        A           AS0 CENTRUS-TOMTOM\n7  33.39367 -111.7207     7     7        A           AS0 CENTRUS-TOMTOM\n8  34.50317 -114.3512     8     8        A           AS0 CENTRUS-TOMTOM\n9  32.20775 -110.7900     9     9        A           AS0 CENTRUS-TOMTOM\n10 33.67027 -112.1691    10    10        A           AS0 CENTRUS-TOMTOM\n                         N_ADDRESS N_ADDR2           N_CITY        N_COUNTY\n1            35945 North Gary Road    &lt;NA&gt;   San Tan Valley    PINAL COUNTY\n2                 21980 N 83RD AVE    &lt;NA&gt;           PEORIA MARICOPA COUNTY\n3  4951 S WHITE MOUNTAIN RD BLDG A    &lt;NA&gt;         SHOW LOW   NAVAJO COUNTY\n4      1880 E TANGERINE RD STE 100    &lt;NA&gt;       ORO VALLEY     PIMA COUNTY\n5                1501 N GILBERT RD    &lt;NA&gt;          GILBERT MARICOPA COUNTY\n6             4545 E CHANDLER BLVD    &lt;NA&gt;          PHOENIX MARICOPA COUNTY\n7              5131 E SOUTHERN AVE    &lt;NA&gt;             MESA MARICOPA COUNTY\n8           1799 KIOWA AVE STE 104    &lt;NA&gt; LAKE HAVASU CITY   MOHAVE COUNTY\n9       1040 S HARRISON RD STE 120    &lt;NA&gt;           TUCSON     PIMA COUNTY\n10        20325 N 51ST AVE STE 116    &lt;NA&gt;         GLENDALE MARICOPA COUNTY\n                                                   N_FULLADDR    N_LAT\n1            35945 N GARY RD , SAN TAN VALLEY, AZ  85143-5748 33.20571\n2                   21980 N 83RD AVE , PEORIA, AZ  85383-1850 33.68333\n3  4951 S WHITE MOUNTAIN RD BLDG A , SHOW LOW, AZ  85901-7827 34.20512\n4    1880 E TANGERINE RD STE 100 , ORO VALLEY, AZ  85755-6238 32.42697\n5                 1501 N GILBERT RD , GILBERT, AZ  85234-2390 33.37658\n6              4545 E CHANDLER BLVD , PHOENIX, AZ  85048-7643 33.30504\n7                  5131 E SOUTHERN AVE , MESA, AZ  85206-2799 33.39367\n8   1799 KIOWA AVE STE 104 , LAKE HAVASU CITY, AZ  86403-2867 34.50317\n9         1040 S HARRISON RD STE 120 , TUCSON, AZ  85748-6601 32.20775\n10        20325 N 51ST AVE STE 116 , GLENDALE, AZ  85308-5665 33.67027\n       N_LON N_STATE N_ZIP N_ZIP4      N_BLOCK RESERVATIO RESERV_ID R_METHOD\n1  -111.5823      AZ 85143   5748 4.021000e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n2  -112.2379      AZ 85383   1850 4.013614e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n3  -110.0204      AZ 85901   7827 4.017962e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n4  -110.9438      AZ 85755   6238 4.019005e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n5  -111.7884      AZ 85234   2390 4.013423e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n6  -111.9851      AZ 85048   7643 4.013117e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n7  -111.7207      AZ 85206   2799 4.013423e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n8  -114.3512      AZ 86403   2867 4.015953e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n9  -110.7900      AZ 85748   6601 4.019004e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n10 -112.1691      AZ 85308   5665 4.013614e+13       &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;\n                      PCA_NAME PCA_ID PCA_PCT                   geometry\n1               SAN TAN VALLEY     92     100 POINT (-111.5823 33.20571)\n2                 PEORIA NORTH     48     100 POINT (-112.2379 33.68333)\n3                     SHOW LOW     15     100 POINT (-110.0204 34.20512)\n4                   ORO VALLEY    100     100 POINT (-110.9438 32.42697)\n5                GILBERT NORTH     74     100 POINT (-111.7884 33.37659)\n6  AHWATUKEE FOOTHILLS VILLAGE     42     100 POINT (-111.9851 33.30504)\n7                    MESA EAST     68     100 POINT (-111.7207 33.39367)\n8             LAKE HAVASU CITY      6     100 POINT (-114.3512 34.50318)\n9                  TUCSON EAST    110     100   POINT (-110.79 32.20775)\n10              GLENDALE NORTH     56     100 POINT (-112.1691 33.67026)"
  },
  {
    "objectID": "presentation.html#tigris",
    "href": "presentation.html#tigris",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "tigris",
    "text": "tigris\n\nCensus boundaries are readily accessible through the tigris package\nstates(), counties(), tracts(), block_groups(), blocks(), etc.\n\n\nlibrary(tigris)\n\nMI_TIGER_counties &lt;- counties(state = \"MI\", year = 2020)\nplot(st_geometry(MI_TIGER_counties))"
  },
  {
    "objectID": "presentation.html#tigris-1",
    "href": "presentation.html#tigris-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "tigris",
    "text": "tigris\n\nJust be careful to specify what boundaries you want\n\n\n\nTIGER\ncb = FALSE\n\n\n\n\n\n\n\n\n\n\nCartographic\ncb = TRUE"
  },
  {
    "objectID": "presentation.html#writing-spatial-data-in-r",
    "href": "presentation.html#writing-spatial-data-in-r",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Writing Spatial Data in R",
    "text": "Writing Spatial Data in R\n\nWriting spatial data is just as easy.\n\n\nst_write(AZ_Hospitals, \"data/AZ_Hospitals.shp\")\n# or\nst_write(AZ_StatAreas, \"data/file_path.gdb\", layer = \"layer_name\")"
  },
  {
    "objectID": "presentation.html#projections",
    "href": "presentation.html#projections",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Projections",
    "text": "Projections\n\nThe world is not flat\nAny representation of the earth in 2 dimensions cannot preserve both shape and area"
  },
  {
    "objectID": "presentation.html#projections-1",
    "href": "presentation.html#projections-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Projections",
    "text": "Projections\n\nThe projection you use will depend on the area of interest and your aim\nThe US Albers Equal Area Conic Projection is a standard for representing the lower 48\nEach state has at least one state projection and the best one to may depend on who you ask\nepsg.io is a good place to search for projections"
  },
  {
    "objectID": "presentation.html#changing-projections",
    "href": "presentation.html#changing-projections",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Changing Projections",
    "text": "Changing Projections\n\nTo change a sf’s projection use st_transform\n\n\nstates(year = 2020, cb = TRUE) %&gt;%\n    filter(GEOID &lt; \"60\") %&gt;%\n    st_transform(\"ESRI:102003\") %&gt;%\n    st_geometry() %&gt;%\n    plot()"
  },
  {
    "objectID": "presentation.html#plot",
    "href": "presentation.html#plot",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "plot",
    "text": "plot\n\nThe easiest way to look at any layer is using the plot function\nNote the use of st_geometry, by default plot will try to construct maps of every attribute within the sf class\n\n\nplot(st_geometry(AZ_StatAreas))"
  },
  {
    "objectID": "presentation.html#plot-1",
    "href": "presentation.html#plot-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "plot",
    "text": "plot\n\nThe easiest way to look at any layer is using the plot function\nNote the use of st_geometry, by default plot will try to construct maps of every attribute within the sf class\n\n\nplot(st_geometry(AZ_StatAreas))\nplot(st_geometry(AZ_Hospitals), col = \"red\", pch = 19, cex = 0.5, add = TRUE)"
  },
  {
    "objectID": "presentation.html#ggplot2",
    "href": "presentation.html#ggplot2",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "ggplot2",
    "text": "ggplot2\n\nEasy to use, same syntax as normal\nMuch more customizable\n\n\nggplot() +\n    geom_sf(data = AZ_StatAreas) +\n    geom_sf(data = AZ_Hospitals, color = \"red\", size = 0.5)"
  },
  {
    "objectID": "presentation.html#leaflet",
    "href": "presentation.html#leaflet",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "leaflet",
    "text": "leaflet\n\nInteractive\nMore complex\n\n\nlibrary(leaflet)\n\nleaflet(states(cb = TRUE, year = 2020)) %&gt;%     \n    addProviderTiles(\"CartoDB.Positron\") %&gt;%     \n    addPolygons(fillColor = \"blue\", color = \"black\", weight = 0.5, group = \"states\") %&gt;%\n    setView(-98.5795, 39.8282, zoom = 3)"
  },
  {
    "objectID": "presentation.html#leaflet-1",
    "href": "presentation.html#leaflet-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "leaflet",
    "text": "leaflet\n\nlibrary(leaflet)\n\nleaflet(states(cb = TRUE, year = 2020)) %&gt;%     \n    addProviderTiles(\"CartoDB.Positron\") %&gt;%     \n    addPolygons(fillColor = \"blue\", color = \"black\", weight = 0.5, group = \"states\") %&gt;%\n    setView(-98.5795, 39.8282, zoom = 3)"
  },
  {
    "objectID": "presentation.html#stop-and-make-a-map",
    "href": "presentation.html#stop-and-make-a-map",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Stop and make a map",
    "text": "Stop and make a map\nUse tigris to get county boundaries for the state of Arizona and overlay Arizona Hospitals (AZ_Hospitals.shp) within the Arizona Central projection (EPSG:26949) using ggplot2\nTips:\n\nlabs() - map title, legend title, legend labels\n\ntheme() and element_text() - font, font size, color\n\ntheme_void() - remove long lat and background"
  },
  {
    "objectID": "presentation.html#choropleth",
    "href": "presentation.html#choropleth",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Choropleth",
    "text": "Choropleth\n\nVary color by attribute\nGeneralize data\nUseful for relative data\n\n\nAZ_PLACES_hosp &lt;- st_read(\"data/pres/sample.geojson\", as_tibble = TRUE)"
  },
  {
    "objectID": "presentation.html#continuous-scale",
    "href": "presentation.html#continuous-scale",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Continuous Scale",
    "text": "Continuous Scale\n\nIs default for ggplot\nNot robust to outliers\nDifficult to identify a color value and associate it with its value on the scale\nscale_fill_distiller"
  },
  {
    "objectID": "presentation.html#continuous-scale-1",
    "href": "presentation.html#continuous-scale-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Continuous Scale",
    "text": "Continuous Scale\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp, aes(fill = `Diabetes Adjusted Prevalence`)) +\n    scale_fill_distiller(palette = \"Blues\", direction = 1)"
  },
  {
    "objectID": "presentation.html#quantile-breaks",
    "href": "presentation.html#quantile-breaks",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Quantile Breaks",
    "text": "Quantile Breaks\n\nGreat for comparisons\nCan group regions that are very different\nEasy to identify a color value and associate it with its value on the scale\nscale_fill_brewer"
  },
  {
    "objectID": "presentation.html#quantile-breaks-1",
    "href": "presentation.html#quantile-breaks-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Quantile Breaks",
    "text": "Quantile Breaks\n\nggplot() + \n    geom_sf(\n        data = AZ_PLACES_hosp, \n        aes(fill = cut(`Diabetes Adjusted Prevalence`, \n            quantile(`Diabetes Adjusted Prevalence`, \n                probs = seq(0, 1, 0.2)), \n                include.lowest=TRUE))) +\n    scale_fill_brewer(palette = \"Blues\")"
  },
  {
    "objectID": "presentation.html#equal-interval-breaks",
    "href": "presentation.html#equal-interval-breaks",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Equal Interval Breaks",
    "text": "Equal Interval Breaks\n\nNot robust to outliers\nEasy to identify a color value and associate it with its value on the scale\nscale_fill_fermenter"
  },
  {
    "objectID": "presentation.html#equal-interval-breaks-1",
    "href": "presentation.html#equal-interval-breaks-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Equal Interval Breaks",
    "text": "Equal Interval Breaks\n\nggplot() + \n    geom_sf(\n        data = AZ_PLACES_hosp, \n        aes(fill = `Diabetes Adjusted Prevalence`)\n    ) +\n    scale_fill_fermenter(palette = \"Blues\")"
  },
  {
    "objectID": "presentation.html#manual-breaks",
    "href": "presentation.html#manual-breaks",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Manual Breaks",
    "text": "Manual Breaks\n\nRequires prior information about important breaks\nEasy to identify a color value and associate it with its value on the scale\nscale_fill_fermenter"
  },
  {
    "objectID": "presentation.html#manual-breaks-1",
    "href": "presentation.html#manual-breaks-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Manual Breaks",
    "text": "Manual Breaks\n\nggplot() + \n    geom_sf(\n        data = AZ_PLACES_hosp, \n        aes(fill = `Diabetes Adjusted Prevalence`)\n    ) +\n    scale_fill_fermenter(palette = \"Blues\", breaks = c(10, 12, 14, 18, 20))"
  },
  {
    "objectID": "presentation.html#cartograms",
    "href": "presentation.html#cartograms",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Cartograms",
    "text": "Cartograms\n\nSame as choropleth\nTransforms geographic areas so that their area is proportional to the population\nTypes\n\nContinuous (cartogram_cont) - distorts shape\nDiscontinuous (cartogram_ncont) - maintains shape, distorts size\nDorling (cartogram_dorling) - creates circles of weighted size"
  },
  {
    "objectID": "presentation.html#cartograms-1",
    "href": "presentation.html#cartograms-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Cartograms",
    "text": "Cartograms\n\nlibrary(cartogram)\n\nAZ_PLACES_hosp_carto &lt;- AZ_PLACES_hosp %&gt;%\n    cartogram_ncont(\"Population\")\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp_carto, aes(fill = `Diabetes Adjusted Prevalence`)) +\n    scale_fill_distiller(palette = \"Blues\")"
  },
  {
    "objectID": "presentation.html#proportional-symbol",
    "href": "presentation.html#proportional-symbol",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Proportional Symbol",
    "text": "Proportional Symbol\n\nChoropleths are best used with relative data (aka rates)\nSymbol maps are best used with count data\nLike cartograms, symbol maps mitigate area bias\nHave a continuous scale\nst_centroid, scale_size, and aes(pch = 20, size = FIELD)"
  },
  {
    "objectID": "presentation.html#proportional-symbol-1",
    "href": "presentation.html#proportional-symbol-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Proportional Symbol",
    "text": "Proportional Symbol\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp) +\n    geom_sf(data = st_centroid(AZ_PLACES_hosp),\n        pch = 20, aes(size = `Hospital Count`), \n        fill = \"red\"\n    ) +\n    scale_size(range = c(1, 20))"
  },
  {
    "objectID": "presentation.html#graduated-symbol",
    "href": "presentation.html#graduated-symbol",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Graduated Symbol",
    "text": "Graduated Symbol\n\nChoropleths are best used with relative data (aka rates)\nSymbol maps are best used with count data\nLike cartograms, symbol maps mitigate area bias\nHave binned values\nst_centroid, scale_size_binned, and aes(pch = 20, size = FIELD)"
  },
  {
    "objectID": "presentation.html#graduated-symbol-1",
    "href": "presentation.html#graduated-symbol-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Graduated Symbol",
    "text": "Graduated Symbol\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp) +\n    geom_sf(data = st_centroid(AZ_PLACES_hosp),\n        pch = 20, aes(size = `Hospital Count`), \n        fill = \"red\"\n    ) +\n    scale_size_binned(range = c(1, 20), breaks = c(1, 5, 20))"
  },
  {
    "objectID": "presentation.html#dot-density",
    "href": "presentation.html#dot-density",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Dot Density",
    "text": "Dot Density\n\nRandomly distributed dots representing some number of counts\nMasks data\nFrom tidycensus, as_dot_density"
  },
  {
    "objectID": "presentation.html#dot-density-1",
    "href": "presentation.html#dot-density-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Dot Density",
    "text": "Dot Density\n\nlibrary(tidycensus)\n\nAZ_PLACES_hosp_dots &lt;- as_dot_density(AZ_PLACES_hosp,\n  value = \"Population\",\n  values_per_dot = 10000\n)\n\nggplot() + \n    geom_sf(data = AZ_PLACES_hosp) +\n    geom_sf(data = AZ_PLACES_hosp_dots, size = 0.5) +\n    labs(caption = \"1 dot = 10000\")"
  },
  {
    "objectID": "presentation.html#stop-and-make-some-maps",
    "href": "presentation.html#stop-and-make-some-maps",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Stop and make some maps",
    "text": "Stop and make some maps\n\nMake a quantile breaks choropleth map using the PLACES data (data/pres/sample.geojson) with hospital locations (data/AZ/hospitals) layered on top\n\nAlternatively, you can layer a symbol map on top\n\nUsing cowplot::plot_grid(plot1,plot2), plot two maps of different types, side by side"
  },
  {
    "objectID": "presentation.html#more-on-projections",
    "href": "presentation.html#more-on-projections",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "More on Projections",
    "text": "More on Projections\n\nMuch of the data you may come across will be unprojected\nIn R, you can check if a sf is unprojected by using st_is_longlat()"
  },
  {
    "objectID": "presentation.html#more-on-projections-1",
    "href": "presentation.html#more-on-projections-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "More on Projections",
    "text": "More on Projections\n\nR uses an geocomputing engine called S2 which represents the earth which approximates the earth as a sphere when using unprojected data\nS2 mitigates issues associated with assuming planar geometry\nS2 is not perfect, and often, using a good projection can reduce frustrations down the road"
  },
  {
    "objectID": "presentation.html#typical-identifiers",
    "href": "presentation.html#typical-identifiers",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Typical Identifiers",
    "text": "Typical Identifiers\n\nFor census geometries, we have FIPS codes (aka GEOIDs)\n\n\n\nArea\nStructure\nDigits\n\n\n\n\nState\nSTATE\n2\n\n\nCounty\nSTATE+COUNTY\n2+3=5\n\n\nTract\nSTATE+COUNTY+TRACT\n2+3+6=11\n\n\nBlock Group\nSTATE+COUNTY+TRACT+BLOCK GROUP\n2+3+6+1=12\n\n\nBlock\nSTATE+COUNTY+TRACT+BLOCK\n2+3+6+4=15"
  },
  {
    "objectID": "presentation.html#tabular-joins",
    "href": "presentation.html#tabular-joins",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Tabular Joins",
    "text": "Tabular Joins\n\nBecause sfs are special data.frames or tibbles, you can join data just as you would with a table.\nThe tables must have identical identifiers\nJust like table to table joins, you must be careful with data types.\nleft_join(), right_join(), inner_join(), and outer_join() all work"
  },
  {
    "objectID": "presentation.html#tabular-joins-1",
    "href": "presentation.html#tabular-joins-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Tabular Joins",
    "text": "Tabular Joins\n\nstates &lt;- counties(state = \"AZ\") %&gt;%\n    select(GEOID)\nPLACES &lt;- read_csv(\"data/US/PLACES2023/PLACES2023_county.csv\")\n\nleft_join(states, PLACES, join_by(GEOID == CountyFIPS))\n\nSimple feature collection with 15 features and 154 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -114.8163 ymin: 31.33234 xmax: -109.0452 ymax: 37.00373\nGeodetic CRS:  NAD83\nFirst 10 features:\n   GEOID StateAbbr StateDesc CountyName TotalPopulation ACCESS2_CrudePrev\n1  04027        AZ   Arizona       Yuma          206990              23.6\n2  04021        AZ   Arizona      Pinal          449557              14.1\n3  04017        AZ   Arizona     Navajo          108147              14.6\n4  04011        AZ   Arizona   Greenlee            9404              16.2\n5  04013        AZ   Arizona   Maricopa         4496588              12.7\n6  04019        AZ   Arizona       Pima         1052030              12.9\n7  04003        AZ   Arizona    Cochise          126050              14.5\n8  04005        AZ   Arizona   Coconino          145052              10.6\n9  04007        AZ   Arizona       Gila           53589              12.9\n10 04009        AZ   Arizona     Graham           39050              16.9\n   ACCESS2_Crude95CI ACCESS2_AdjPrev ACCESS2_Adj95CI ARTHRITIS_CrudePrev\n1       (18.6, 29.5)            23.7    (18.8, 29.4)                22.9\n2       (11.5, 17.0)            14.5    (11.8, 17.5)                28.1\n3       (12.1, 17.7)            15.3    (12.7, 18.5)                29.8\n4       (12.9, 19.4)            16.2    (13.0, 19.5)                21.2\n5       (10.3, 15.3)            12.9    (10.4, 15.7)                22.9\n6       (10.3, 16.1)            13.3    (10.6, 16.5)                26.3\n7       (11.6, 17.5)            15.1    (12.1, 18.3)                29.3\n8       ( 8.5, 13.3)            10.7    ( 8.7, 13.1)                18.9\n9       (10.6, 15.5)            14.1    (11.6, 16.9)                31.6\n10      (13.6, 20.3)            16.9    (13.7, 20.3)                24.2\n   ARTHRITIS_Crude95CI ARTHRITIS_AdjPrev ARTHRITIS_Adj95CI BINGE_CrudePrev\n1         (20.0, 26.0)              20.0      (17.3, 22.9)            15.9\n2         (25.2, 30.9)              23.5      (21.0, 26.2)            16.3\n3         (26.7, 32.8)              24.9      (22.2, 27.6)            14.7\n4         (17.8, 24.7)              20.1      (16.8, 23.5)            18.1\n5         (20.9, 25.0)              21.1      (19.2, 23.0)            16.7\n6         (23.9, 28.6)              22.8      (20.5, 24.9)            15.6\n7         (26.2, 32.5)              23.5      (20.8, 26.3)            15.1\n8         (16.7, 21.3)              20.0      (17.7, 22.6)            17.6\n9         (28.2, 35.1)              22.3      (19.7, 25.0)            14.3\n10        (20.7, 27.9)              23.6      (20.1, 27.3)            17.2\n   BINGE_Crude95CI BINGE_AdjPrev BINGE_Adj95CI BPHIGH_CrudePrev\n1     (13.3, 18.7)          17.2  (14.4, 20.3)             33.3\n2     (13.8, 18.8)          18.2  (15.5, 21.0)             33.0\n3     (12.4, 17.1)          16.6  (14.0, 19.3)             37.3\n4     (14.9, 21.7)          18.5  (15.2, 22.2)             27.0\n5     (14.8, 18.6)          17.4  (15.5, 19.4)             29.6\n6     (13.6, 17.8)          17.1  (15.0, 19.5)             31.7\n7     (12.6, 17.8)          17.6  (14.8, 20.8)             36.5\n8     (15.0, 20.5)          17.3  (14.8, 20.3)             25.1\n9     (12.0, 16.7)          18.7  (15.7, 21.8)             37.0\n10    (14.0, 20.6)          17.4  (14.2, 20.9)             30.1\n   BPHIGH_Crude95CI BPHIGH_AdjPrev BPHIGH_Adj95CI BPMED_CrudePrev\n1      (29.9, 36.7)           30.2   (26.9, 33.6)            77.2\n2      (29.9, 36.0)           28.5   (25.6, 31.4)            77.0\n3      (33.9, 40.5)           32.3   (29.1, 35.3)            77.3\n4      (23.3, 30.8)           25.8   (22.2, 29.5)            72.5\n5      (27.3, 31.9)           27.7   (25.5, 29.9)            72.9\n6      (29.0, 34.3)           28.1   (25.6, 30.5)            77.3\n7      (33.2, 39.8)           30.4   (27.3, 33.6)            76.8\n8      (22.5, 27.8)           26.6   (23.9, 29.6)            70.0\n9      (33.6, 40.7)           27.3   (24.4, 30.3)            82.3\n10     (26.3, 34.0)           29.5   (25.7, 33.4)            72.6\n   BPMED_Crude95CI BPMED_AdjPrev BPMED_Adj95CI CANCER_CrudePrev\n1     (74.2, 79.8)          57.3  (52.7, 62.0)              6.9\n2     (73.9, 79.7)          55.8  (51.4, 60.0)              7.8\n3     (74.4, 80.0)          56.6  (52.3, 60.9)              7.7\n4     (68.7, 76.0)          53.8  (48.6, 58.8)              6.1\n5     (70.2, 75.3)          53.8  (50.5, 57.1)              6.9\n6     (74.7, 79.7)          56.4  (52.7, 60.2)              7.6\n7     (73.7, 79.7)          54.1  (49.8, 58.6)              8.1\n8     (66.6, 73.1)          52.4  (48.2, 57.0)              5.9\n9     (79.3, 84.7)          56.7  (52.0, 61.0)             10.1\n10    (68.9, 76.1)          55.3  (50.0, 60.3)              6.2\n   CANCER_Crude95CI CANCER_AdjPrev CANCER_Adj95CI CASTHMA_CrudePrev\n1      ( 6.2,  7.6)            5.5   ( 5.0,  6.1)               9.7\n2      ( 7.0,  8.5)            6.1   ( 5.5,  6.7)              10.0\n3      ( 6.9,  8.5)            6.1   ( 5.5,  6.7)              12.6\n4      ( 5.5,  6.7)            5.7   ( 5.2,  6.3)               9.7\n5      ( 6.3,  7.5)            6.2   ( 5.7,  6.8)               9.9\n6      ( 6.9,  8.3)            6.1   ( 5.6,  6.7)              10.2\n7      ( 7.4,  9.0)            6.0   ( 5.4,  6.6)              10.4\n8      ( 5.4,  6.6)            6.3   ( 5.7,  6.9)              11.4\n9      ( 9.1, 11.1)            6.4   ( 5.8,  7.1)              10.5\n10     ( 5.6,  6.8)            5.9   ( 5.4,  6.6)              10.6\n   CASTHMA_Crude95CI CASTHMA_AdjPrev CASTHMA_Adj95CI CERVICAL_CrudePrev\n1       ( 8.6, 11.0)             9.9    ( 8.7, 11.1)               76.4\n2       ( 8.8, 11.2)            10.1    ( 8.9, 11.4)               79.4\n3       (11.2, 14.0)            12.8    (11.4, 14.2)               74.7\n4       ( 8.5, 11.0)             9.7    ( 8.5, 11.0)               78.5\n5       ( 9.0, 11.0)            10.0    ( 9.0, 11.0)               80.6\n6       ( 9.1, 11.4)            10.3    ( 9.2, 11.5)               78.1\n7       ( 9.2, 11.7)            10.6    ( 9.4, 12.0)               79.0\n8       (10.1, 12.8)            11.2    (10.0, 12.6)               75.3\n9       ( 9.3, 11.8)            11.0    ( 9.7, 12.3)               77.1\n10      ( 9.2, 12.1)            10.6    ( 9.2, 12.1)               75.4\n   CERVICAL_Crude95CI CERVICAL_AdjPrev CERVICAL_Adj95CI CHD_CrudePrev\n1        (73.5, 79.0)             77.7     (75.1, 80.2)           7.6\n2        (77.0, 81.3)             79.8     (77.7, 81.7)           7.0\n3        (72.5, 76.9)             75.7     (73.5, 77.8)           9.0\n4        (76.3, 80.8)             79.2     (77.1, 81.4)           5.5\n5        (78.6, 82.6)             81.2     (79.2, 83.1)           5.8\n6        (75.9, 80.2)             79.9     (77.9, 81.9)           6.6\n7        (76.8, 81.0)             79.8     (77.8, 81.6)           7.9\n8        (72.6, 77.7)             79.0     (76.9, 81.1)           5.5\n9        (74.6, 79.5)             78.2     (76.2, 80.3)           9.8\n10       (73.0, 77.5)             76.4     (74.1, 78.6)           6.4\n   CHD_Crude95CI CHD_AdjPrev  CHD_Adj95CI CHECKUP_CrudePrev CHECKUP_Crude95CI\n1   ( 6.7,  8.7)         6.1 ( 5.3,  6.9)              67.6      (63.1, 72.1)\n2   ( 6.1,  8.0)         5.4 ( 4.8,  6.2)              71.6      (67.8, 75.2)\n3   ( 8.0, 10.2)         7.1 ( 6.3,  8.0)              68.8      (64.8, 72.5)\n4   ( 4.8,  6.2)         5.1 ( 4.5,  5.8)              64.1      (58.2, 69.7)\n5   ( 5.1,  6.6)         5.2 ( 4.6,  5.9)              69.2      (66.1, 72.0)\n6   ( 5.8,  7.5)         5.2 ( 4.6,  5.9)              69.3      (65.9, 72.5)\n7   ( 6.9,  9.0)         5.7 ( 5.0,  6.4)              70.2      (66.0, 74.2)\n8   ( 4.9,  6.3)         5.8 ( 5.2,  6.6)              63.3      (59.0, 67.6)\n9   ( 8.5, 11.1)         6.0 ( 5.3,  6.8)              69.8      (65.6, 73.6)\n10  ( 5.7,  7.3)         6.2 ( 5.4,  7.0)              66.8      (61.2, 72.2)\n   CHECKUP_AdjPrev CHECKUP_Adj95CI CHOLSCREEN_CrudePrev CHOLSCREEN_Crude95CI\n1             65.5    (60.7, 70.2)                 80.7         (77.5, 83.8)\n2             68.8    (64.8, 72.7)                 83.3         (80.7, 85.8)\n3             65.8    (61.4, 69.8)                 79.1         (76.1, 81.9)\n4             63.4    (57.4, 69.0)                 81.3         (78.0, 84.4)\n5             68.0    (64.8, 71.0)                 84.0         (81.7, 86.3)\n6             66.9    (63.2, 70.4)                 83.3         (80.9, 85.6)\n7             66.4    (61.9, 70.7)                 83.2         (80.4, 85.7)\n8             63.8    (59.6, 67.9)                 76.4         (73.2, 79.7)\n9             63.1    (58.4, 67.4)                 84.0         (81.5, 86.3)\n10            66.4    (60.7, 71.8)                 78.0         (74.3, 81.5)\n   CHOLSCREEN_AdjPrev CHOLSCREEN_Adj95CI COLON_SCREEN_CrudePrev\n1                80.0       (76.5, 83.2)                   63.2\n2                80.9       (77.9, 83.7)                   68.8\n3                75.9       (72.7, 79.2)                   59.9\n4                80.7       (77.3, 84.0)                   63.1\n5                83.3       (80.8, 85.6)                   67.8\n6                82.1       (79.6, 84.7)                   71.8\n7                80.1       (76.9, 83.1)                   69.2\n8                79.3       (76.4, 82.3)                   67.0\n9                77.7       (74.3, 80.9)                   67.4\n10               78.1       (74.3, 81.6)                   60.6\n   COLON_SCREEN_Crude95CI COLON_SCREEN_AdjPrev COLON_SCREEN_Adj95CI\n1            (60.5, 65.7)                 59.8         (56.7, 62.6)\n2            (66.6, 71.1)                 64.9         (62.5, 67.4)\n3            (57.6, 62.2)                 56.1         (53.7, 58.4)\n4            (60.7, 65.7)                 61.5         (59.1, 64.1)\n5            (65.2, 70.2)                 66.1         (63.3, 68.6)\n6            (69.6, 74.0)                 68.4         (66.0, 70.8)\n7            (66.6, 71.5)                 65.0         (62.4, 67.6)\n8            (64.5, 69.3)                 64.4         (61.9, 66.7)\n9            (64.9, 69.8)                 62.2         (59.5, 64.7)\n10           (58.1, 63.2)                 58.4         (55.8, 61.0)\n   COPD_CrudePrev COPD_Crude95CI COPD_AdjPrev COPD_Adj95CI COREM_CrudePrev\n1             7.4   ( 6.1,  8.7)          6.4 ( 5.4,  7.5)            36.3\n2             7.6   ( 6.3,  9.0)          6.3 ( 5.3,  7.5)            44.8\n3            10.7   ( 9.1, 12.3)          8.9 ( 7.6, 10.2)            31.0\n4             5.5   ( 4.7,  6.4)          5.2 ( 4.4,  6.1)            34.0\n5             5.9   ( 4.9,  7.0)          5.4 ( 4.5,  6.4)            45.1\n6             6.6   ( 5.4,  7.9)          5.6 ( 4.7,  6.7)            45.3\n7             7.9   ( 6.5,  9.4)          6.2 ( 5.2,  7.4)            37.9\n8             6.2   ( 5.2,  7.2)          6.4 ( 5.5,  7.5)            40.8\n9            10.2   ( 8.5, 12.1)          7.3 ( 6.2,  8.6)            36.2\n10            7.3   ( 6.2,  8.5)          7.0 ( 6.0,  8.3)            34.7\n   COREM_Crude95CI COREM_AdjPrev COREM_Adj95CI COREW_CrudePrev COREW_Crude95CI\n1     (30.1, 42.5)          36.2  (30.1, 42.3)            29.0    (24.3, 34.1)\n2     (38.3, 51.1)          44.7  (38.3, 50.8)            37.6    (31.7, 43.4)\n3     (25.8, 36.0)          31.2  (26.1, 36.4)            22.1    (18.2, 26.0)\n4     (27.9, 40.3)          34.8  (28.7, 40.8)            30.0    (24.9, 35.4)\n5     (38.4, 51.0)          45.3  (38.8, 51.2)            36.2    (30.3, 41.5)\n6     (39.1, 51.2)          45.5  (39.2, 51.3)            38.9    (33.3, 44.2)\n7     (32.1, 43.7)          38.0  (32.2, 43.9)            34.8    (29.7, 39.9)\n8     (34.6, 46.7)          41.4  (35.6, 47.0)            32.4    (27.4, 37.4)\n9     (29.7, 42.9)          36.2  (29.9, 42.6)            29.6    (24.2, 35.4)\n10    (28.8, 41.1)          35.0  (29.1, 41.5)            27.4    (22.8, 32.5)\n   COREW_AdjPrev COREW_Adj95CI CSMOKING_CrudePrev CSMOKING_Crude95CI\n1           29.2  (24.3, 34.2)               14.5       (11.9, 17.4)\n2           36.7  (31.1, 42.1)               16.6       (13.8, 19.6)\n3           21.7  (18.0, 25.5)               20.9       (17.6, 24.1)\n4           30.8  (25.7, 36.2)               14.9       (12.1, 17.8)\n5           36.0  (30.3, 41.3)               13.8       (11.4, 16.3)\n6           38.7  (33.1, 44.0)               14.0       (11.6, 16.6)\n7           34.5  (29.5, 39.6)               15.5       (12.7, 18.5)\n8           31.9  (27.3, 36.6)               14.5       (12.0, 17.4)\n9           29.2  (24.0, 34.8)               18.4       (15.4, 21.9)\n10          27.5  (23.0, 32.6)               18.8       (15.6, 22.3)\n   CSMOKING_AdjPrev CSMOKING_Adj95CI DENTAL_CrudePrev DENTAL_Crude95CI\n1              15.7     (12.9, 18.8)             52.3     (48.7, 56.0)\n2              17.2     (14.2, 20.2)             53.9     (50.8, 56.9)\n3              21.9     (18.5, 25.3)             52.9     (49.8, 55.8)\n4              14.9     (12.2, 17.9)             56.7     (53.5, 59.8)\n5              14.0     (11.5, 16.6)             61.9     (58.9, 64.9)\n6              15.1     (12.4, 17.8)             58.8     (55.8, 61.7)\n7              16.5     (13.6, 19.9)             56.2     (53.2, 59.0)\n8              16.2     (13.4, 19.5)             64.6     (61.5, 67.5)\n9              20.4     (17.1, 24.0)             55.9     (52.4, 59.0)\n10             19.3     (16.0, 22.8)             56.8     (53.8, 59.7)\n   DENTAL_AdjPrev DENTAL_Adj95CI DEPRESSION_CrudePrev DEPRESSION_Crude95CI\n1            51.7   (47.8, 55.6)                 17.9         (15.0, 21.0)\n2            53.2   (50.0, 56.0)                 17.9         (15.3, 20.5)\n3            52.1   (49.1, 55.2)                 20.3         (17.4, 23.3)\n4            56.8   (53.5, 59.9)                 18.3         (14.9, 21.9)\n5            61.7   (58.7, 64.7)                 18.7         (16.7, 20.9)\n6            58.0   (54.8, 61.0)                 21.8         (19.2, 24.4)\n7            55.3   (52.2, 58.2)                 19.4         (16.6, 22.7)\n8            63.8   (60.8, 66.5)                 20.5         (17.6, 23.7)\n9            54.2   (51.3, 57.2)                 18.8         (16.0, 22.0)\n10           56.7   (53.7, 59.6)                 19.6         (16.1, 23.4)\n   DEPRESSION_AdjPrev DEPRESSION_Adj95CI DIABETES_CrudePrev DIABETES_Crude95CI\n1                18.4       (15.4, 21.6)               14.3       (12.4, 16.3)\n2                18.5       (15.8, 21.3)               12.1       (10.6, 13.8)\n3                21.1       (18.1, 24.1)               15.4       (13.5, 17.4)\n4                18.4       (15.0, 22.1)               10.1       ( 8.6, 11.6)\n5                18.9       (16.9, 21.1)               10.4       ( 9.2, 11.5)\n6                22.4       (19.7, 25.0)               10.5       ( 9.2, 11.9)\n7                20.4       (17.5, 23.8)               12.2       (10.6, 14.0)\n8                19.9       (17.2, 23.0)                9.0       ( 7.9, 10.4)\n9                20.6       (17.6, 24.0)               14.0       (12.2, 16.0)\n10               19.6       (16.1, 23.4)               11.3       ( 9.7, 13.1)\n   DIABETES_AdjPrev DIABETES_Adj95CI GHLTH_CrudePrev GHLTH_Crude95CI\n1              13.0     (11.3, 14.8)            23.2    (20.0, 26.8)\n2              10.1     ( 8.9, 11.5)            18.4    (15.7, 21.2)\n3              12.8     (11.1, 14.4)            24.2    (21.2, 27.3)\n4               9.6     ( 8.2, 11.0)            16.4    (14.1, 18.8)\n5               9.5     ( 8.5, 10.6)            15.4    (13.2, 17.6)\n6               9.1     ( 7.9, 10.3)            17.5    (15.0, 20.0)\n7               9.7     ( 8.4, 11.2)            18.7    (15.9, 21.4)\n8               9.5     ( 8.3, 11.0)            14.8    (12.8, 17.2)\n9               9.8     ( 8.6, 11.2)            21.5    (18.7, 24.7)\n10             10.9     ( 9.3, 12.7)            20.0    (17.2, 22.9)\n   GHLTH_AdjPrev GHLTH_Adj95CI HIGHCHOL_CrudePrev HIGHCHOL_Crude95CI\n1           22.4  (19.3, 25.9)               36.3       (32.6, 40.1)\n2           17.2  (14.6, 19.8)               37.7       (34.4, 41.0)\n3           22.5  (19.8, 25.3)               36.2       (32.8, 39.4)\n4           16.1  (13.8, 18.5)               30.8       (26.6, 35.4)\n5           14.8  (12.8, 17.0)               34.5       (32.2, 36.9)\n6           16.6  (14.2, 18.9)               35.2       (32.5, 37.9)\n7           17.0  (14.5, 19.5)               38.3       (34.9, 42.0)\n8           15.5  (13.4, 17.8)               29.4       (26.6, 32.4)\n9           18.6  (16.2, 21.5)               36.1       (32.4, 39.7)\n10          19.8  (17.1, 22.7)               34.3       (30.0, 38.8)\n   HIGHCHOL_AdjPrev HIGHCHOL_Adj95CI KIDNEY_CrudePrev KIDNEY_Crude95CI\n1              31.2     (27.4, 35.1)              4.2     ( 3.8,  4.6)\n2              31.3     (27.9, 34.6)              3.7     ( 3.3,  4.1)\n3              28.8     (25.6, 32.0)              4.6     ( 4.2,  5.1)\n4              27.5     (23.3, 32.2)              3.2     ( 2.9,  3.5)\n5              30.6     (28.2, 33.1)              3.3     ( 3.0,  3.6)\n6              29.7     (27.0, 32.5)              3.7     ( 3.3,  4.1)\n7              30.6     (27.3, 34.4)              4.0     ( 3.6,  4.4)\n8              27.5     (24.4, 30.8)              3.1     ( 2.8,  3.4)\n9              25.8     (22.6, 29.0)              4.8     ( 4.4,  5.3)\n10             30.8     (26.3, 35.5)              3.5     ( 3.2,  3.8)\n   KIDNEY_AdjPrev KIDNEY_Adj95CI LPA_CrudePrev LPA_Crude95CI LPA_AdjPrev\n1             3.6   ( 3.2,  3.9)          31.2  (27.0, 36.1)        30.5\n2             3.1   ( 2.8,  3.3)          25.4  (21.7, 29.3)        24.3\n3             3.8   ( 3.5,  4.2)          27.1  (23.2, 31.0)        25.9\n4             3.1   ( 2.8,  3.4)          23.3  (19.2, 27.7)        23.1\n5             3.0   ( 2.7,  3.3)          22.4  (19.4, 25.5)        22.0\n6             3.1   ( 2.8,  3.4)          24.2  (20.8, 27.6)        23.5\n7             3.1   ( 2.8,  3.4)          26.7  (22.6, 31.0)        25.2\n8             3.3   ( 3.0,  3.6)          17.7  (15.0, 20.8)        18.5\n9             3.3   ( 3.0,  3.7)          28.1  (23.9, 32.7)        25.5\n10            3.4   ( 3.1,  3.7)          25.7  (21.4, 30.4)        25.6\n    LPA_Adj95CI MAMMOUSE_CrudePrev MAMMOUSE_Crude95CI MAMMOUSE_AdjPrev\n1  (26.1, 35.2)               65.2       (61.4, 68.8)             66.2\n2  (20.7, 27.9)               66.1       (62.4, 69.8)             67.1\n3  (22.2, 29.6)               57.4       (53.8, 60.9)             57.3\n4  (18.8, 27.5)               67.8       (64.1, 71.4)             67.1\n5  (19.0, 25.1)               69.0       (65.5, 72.3)             69.1\n6  (20.1, 26.8)               70.4       (67.1, 73.6)             70.9\n7  (21.2, 29.5)               69.4       (65.9, 72.7)             69.9\n8  (15.8, 21.7)               62.5       (59.2, 65.8)             61.8\n9  (21.8, 29.7)               61.6       (57.6, 65.3)             62.2\n10 (21.2, 30.2)               62.3       (58.8, 66.0)             62.3\n   MAMMOUSE_Adj95CI MHLTH_CrudePrev MHLTH_Crude95CI MHLTH_AdjPrev MHLTH_Adj95CI\n1      (62.3, 69.9)            15.8    (13.6, 18.1)          16.4  (14.2, 18.8)\n2      (63.5, 70.5)            15.0    (13.1, 16.9)          16.0  (14.1, 18.0)\n3      (53.6, 60.7)            18.7    (16.4, 20.8)          20.1  (17.7, 22.4)\n4      (63.3, 71.0)            15.3    (13.2, 17.4)          15.6  (13.5, 17.7)\n5      (65.7, 72.5)            16.1    (14.5, 17.8)          16.5  (14.8, 18.3)\n6      (67.5, 73.9)            16.2    (14.4, 18.1)          17.0  (15.0, 19.0)\n7      (66.3, 73.2)            14.2    (12.4, 16.2)          15.5  (13.6, 17.6)\n8      (58.4, 65.2)            18.2    (15.9, 20.8)          17.4  (15.4, 19.7)\n9      (58.3, 65.8)            16.1    (14.2, 18.3)          19.0  (16.7, 21.5)\n10     (58.6, 65.9)            17.7    (15.3, 20.1)          17.8  (15.3, 20.2)\n   OBESITY_CrudePrev OBESITY_Crude95CI OBESITY_AdjPrev OBESITY_Adj95CI\n1               39.1      (33.6, 44.9)            40.8    (35.1, 46.7)\n2               37.2      (32.6, 41.9)            37.5    (32.9, 42.2)\n3               38.0      (33.0, 42.6)            38.2    (33.3, 42.9)\n4               31.1      (24.2, 38.6)            31.1    (24.3, 38.5)\n5               30.8      (27.4, 34.3)            30.9    (27.6, 34.4)\n6               31.8      (28.0, 35.7)            32.9    (28.9, 36.9)\n7               33.5      (28.8, 38.6)            34.3    (29.4, 39.5)\n8               24.6      (20.8, 28.9)            26.4    (22.5, 30.9)\n9               35.9      (31.0, 41.0)            36.6    (31.7, 41.7)\n10              35.9      (29.2, 43.1)            36.3    (29.6, 43.6)\n   PHLTH_CrudePrev PHLTH_Crude95CI PHLTH_AdjPrev PHLTH_Adj95CI SLEEP_CrudePrev\n1             14.1    (12.1, 16.1)          13.5  (11.6, 15.5)            35.1\n2             12.9    (11.2, 14.8)          12.0  (10.4, 13.6)            35.7\n3             16.5    (14.5, 18.5)          15.3  (13.4, 17.1)            37.7\n4             11.2    ( 9.7, 12.8)          11.0  ( 9.5, 12.4)            33.4\n5             10.9    ( 9.5, 12.3)          10.5  ( 9.2, 11.9)            31.7\n6             12.1    (10.5, 13.7)          11.4  ( 9.9, 13.0)            32.5\n7             13.0    (11.2, 14.8)          11.8  (10.1, 13.4)            33.1\n8             11.0    ( 9.6, 12.6)          11.6  (10.2, 13.2)            28.8\n9             15.3    (13.3, 17.5)          13.2  (11.5, 15.0)            34.5\n10            13.2    (11.5, 15.1)          13.1  (11.4, 14.9)            34.1\n   SLEEP_Crude95CI SLEEP_AdjPrev SLEEP_Adj95CI STROKE_CrudePrev\n1     (33.9, 36.3)          36.6  (35.3, 37.9)              4.0\n2     (34.6, 36.8)          37.0  (35.8, 38.0)              3.6\n3     (36.5, 38.7)          39.0  (37.8, 40.0)              5.0\n4     (32.1, 34.6)          33.6  (32.3, 34.9)              2.9\n5     (30.6, 32.7)          32.2  (31.1, 33.3)              2.9\n6     (31.4, 33.6)          34.0  (32.7, 35.2)              3.4\n7     (31.8, 34.2)          34.7  (33.4, 35.9)              3.9\n8     (27.6, 29.9)          29.9  (28.8, 31.0)              3.0\n9     (33.3, 35.6)          37.1  (35.9, 38.1)              4.9\n10    (33.1, 35.2)          34.6  (33.5, 35.7)              3.4\n   STROKE_Crude95CI STROKE_AdjPrev STROKE_Adj95CI TEETHLOST_CrudePrev\n1      ( 3.5,  4.5)            3.3   ( 2.9,  3.7)                13.7\n2      ( 3.2,  4.1)            2.9   ( 2.6,  3.3)                12.8\n3      ( 4.4,  5.6)            4.1   ( 3.7,  4.5)                17.4\n4      ( 2.6,  3.2)            2.7   ( 2.4,  3.0)                10.7\n5      ( 2.6,  3.3)            2.7   ( 2.4,  3.1)                10.3\n6      ( 3.0,  3.9)            2.8   ( 2.5,  3.2)                10.6\n7      ( 3.4,  4.3)            2.9   ( 2.6,  3.3)                12.9\n8      ( 2.7,  3.3)            3.2   ( 2.8,  3.5)                11.5\n9      ( 4.3,  5.6)            3.3   ( 2.9,  3.7)                13.4\n10     ( 3.1,  3.8)            3.3   ( 3.0,  3.7)                13.3\n   TEETHLOST_Crude95CI TEETHLOST_AdjPrev TEETHLOST_Adj95CI HEARING_CrudePrev\n1         ( 9.9, 17.8)              14.6      (10.7, 18.9)               9.1\n2         ( 8.9, 17.5)              13.2      ( 9.3, 18.3)               8.2\n3         (13.4, 21.9)              18.2      (13.9, 22.9)              10.5\n4         ( 7.7, 13.6)              11.5      ( 8.4, 14.8)               6.7\n5         ( 6.7, 14.7)              10.8      ( 7.1, 15.6)               6.6\n6         ( 7.1, 14.8)              11.2      ( 7.4, 15.8)               7.7\n7         ( 9.2, 17.2)              13.5      ( 9.5, 18.2)               8.7\n8         ( 8.2, 15.1)              12.0      ( 8.6, 15.7)               6.8\n9         ( 9.4, 18.2)              14.0      ( 9.7, 19.2)              11.3\n10        (10.0, 17.1)              14.3      (10.5, 18.6)               7.8\n   HEARING_Crude95CI HEARING_AdjPrev HEARING_Adj95CI VISION_CrudePrev\n1       ( 8.1, 10.2)             7.4    ( 6.6,  8.3)              8.2\n2       ( 7.2,  9.2)             6.7    ( 6.0,  7.5)              5.4\n3       ( 9.4, 11.7)             8.9    ( 7.9,  9.8)              8.6\n4       ( 5.9,  7.5)             6.4    ( 5.7,  7.1)              5.2\n5       ( 5.8,  7.3)             6.1    ( 5.4,  6.8)              4.7\n6       ( 6.8,  8.6)             6.4    ( 5.7,  7.1)              5.5\n7       ( 7.7,  9.8)             6.7    ( 5.9,  7.5)              6.0\n8       ( 6.0,  7.6)             7.2    ( 6.4,  8.0)              5.1\n9       (10.0, 12.7)             7.7    ( 6.9,  8.7)              7.1\n10      ( 6.9,  8.8)             7.6    ( 6.7,  8.5)              6.6\n   VISION_Crude95CI VISION_AdjPrev VISION_Adj95CI COGNITION_CrudePrev\n1      ( 7.1,  9.5)            7.8   ( 6.7,  9.0)                16.3\n2      ( 4.7,  6.3)            5.1   ( 4.4,  5.9)                13.8\n3      ( 7.5,  9.7)            8.0   ( 7.0,  9.0)                18.4\n4      ( 4.5,  5.9)            5.1   ( 4.5,  5.8)                13.5\n5      ( 4.1,  5.3)            4.5   ( 3.9,  5.2)                13.2\n6      ( 4.7,  6.3)            5.1   ( 4.4,  5.9)                13.2\n7      ( 5.1,  6.9)            5.4   ( 4.7,  6.2)                13.8\n8      ( 4.4,  5.8)            5.3   ( 4.6,  6.0)                14.8\n9      ( 6.1,  8.1)            6.1   ( 5.3,  7.0)                15.1\n10     ( 5.8,  7.5)            6.5   ( 5.7,  7.4)                16.6\n   COGNITION_Crude95CI COGNITION_AdjPrev COGNITION_Adj95CI MOBILITY_CrudePrev\n1         (13.9, 19.0)              16.5      (14.1, 19.2)               16.9\n2         (11.8, 15.8)              14.4      (12.3, 16.5)               14.9\n3         (16.0, 20.7)              19.2      (16.7, 21.6)               20.1\n4         (11.5, 15.5)              13.7      (11.6, 15.7)               12.2\n5         (11.5, 15.1)              13.4      (11.6, 15.4)               12.7\n6         (11.4, 15.2)              13.5      (11.6, 15.6)               14.1\n7         (11.9, 16.0)              14.5      (12.5, 16.7)               15.7\n8         (12.5, 17.3)              14.2      (12.3, 16.4)               11.0\n9         (13.0, 17.5)              16.7      (14.6, 19.3)               20.7\n10        (14.2, 19.0)              16.6      (14.2, 19.0)               14.9\n   MOBILITY_Crude95CI MOBILITY_AdjPrev MOBILITY_Adj95CI SELFCARE_CrudePrev\n1        (14.6, 19.3)             15.0     (12.8, 17.2)                5.5\n2        (12.8, 17.2)             12.6     (10.9, 14.6)                4.0\n3        (17.7, 22.5)             17.1     (15.0, 19.2)                6.3\n4        (10.5, 14.0)             11.7     (10.0, 13.4)                3.6\n5        (11.0, 14.5)             11.8     (10.2, 13.5)                3.4\n6        (12.1, 16.1)             12.2     (10.5, 14.0)                3.9\n7        (13.5, 18.1)             12.6     (10.8, 14.5)                4.4\n8        ( 9.6, 12.7)             11.8     (10.3, 13.5)                3.5\n9        (17.9, 23.8)             15.0     (13.0, 17.2)                5.5\n10       (12.8, 17.0)             14.5     (12.5, 16.7)                4.6\n   SELFCARE_Crude95CI SELFCARE_AdjPrev SELFCARE_Adj95CI INDEPLIVE_CrudePrev\n1        ( 4.7,  6.3)              5.2     ( 4.5,  6.0)                 9.6\n2        ( 3.5,  4.6)              3.7     ( 3.2,  4.2)                 7.8\n3        ( 5.5,  7.2)              5.7     ( 5.0,  6.4)                11.7\n4        ( 3.2,  4.1)              3.5     ( 3.1,  4.0)                 6.9\n5        ( 2.9,  4.0)              3.3     ( 2.8,  3.8)                 6.8\n6        ( 3.4,  4.5)              3.7     ( 3.1,  4.2)                 7.6\n7        ( 3.8,  5.1)              3.9     ( 3.4,  4.4)                 8.0\n8        ( 3.1,  4.0)              3.9     ( 3.4,  4.4)                 7.9\n9        ( 4.8,  6.4)              4.5     ( 3.9,  5.1)                 9.9\n10       ( 4.1,  5.3)              4.6     ( 4.1,  5.2)                 9.1\n   INDEPLIVE_Crude95CI INDEPLIVE_AdjPrev INDEPLIVE_Adj95CI DISABILITY_CrudePrev\n1         ( 8.3, 11.1)               9.2      ( 7.9, 10.6)                 33.3\n2         ( 6.6,  8.9)               7.5      ( 6.4,  8.7)                 31.0\n3         (10.2, 13.3)              11.4      (10.0, 12.9)                 37.8\n4         ( 6.0,  7.9)               6.9      ( 6.0,  7.9)                 27.6\n5         ( 5.9,  7.9)               6.7      ( 5.8,  7.8)                 28.5\n6         ( 6.6,  8.8)               7.4      ( 6.3,  8.4)                 30.1\n7         ( 6.9,  9.2)               7.6      ( 6.6,  8.8)                 31.8\n8         ( 6.8,  9.1)               8.0      ( 6.9,  9.2)                 27.1\n9         ( 8.5, 11.4)               9.2      ( 8.0, 10.6)                 38.7\n10        ( 7.9, 10.4)               9.0      ( 7.9, 10.3)                 33.4\n   DISABILITY_Crude95CI DISABILITY_AdjPrev DISABILITY_Adj95CI\n1          (28.9, 37.6)               30.9       (26.7, 35.1)\n2          (27.0, 34.7)               28.8       (25.1, 32.4)\n3          (33.8, 41.6)               35.5       (31.7, 39.4)\n4          (23.7, 31.6)               27.1       (23.1, 31.1)\n5          (25.5, 31.5)               27.6       (24.7, 30.6)\n6          (26.6, 33.6)               27.9       (24.7, 31.3)\n7          (28.2, 35.9)               28.7       (25.2, 32.6)\n8          (23.7, 30.9)               27.2       (24.1, 30.9)\n9          (34.6, 43.1)               33.9       (30.0, 37.8)\n10         (29.1, 38.0)               32.9       (28.6, 37.5)\n                       Geolocation                       geometry\n1   POINT (-113.910905 32.7739424) MULTIPOLYGON (((-114.8141 3...\n2  POINT (-111.3663396 32.9185209) MULTIPOLYGON (((-111.2669 3...\n3  POINT (-110.3210248 35.3907852) MULTIPOLYGON (((-110.0007 3...\n4  POINT (-109.2423231 33.2388723) MULTIPOLYGON (((-109.4958 3...\n5  POINT (-112.4989296 33.3451756) MULTIPOLYGON (((-111.8931 3...\n6   POINT (-111.7836574 32.128038) MULTIPOLYGON (((-111.0388 3...\n7  POINT (-109.7751627 31.8401287) MULTIPOLYGON (((-110.4523 3...\n8  POINT (-111.7737277 35.8296919) MULTIPOLYGON (((-112.6604 3...\n9  POINT (-110.8118696 33.7896177) MULTIPOLYGON (((-111.7207 3...\n10 POINT (-109.8783103 32.9318277) MULTIPOLYGON (((-110.4494 3..."
  },
  {
    "objectID": "presentation.html#table-to-points",
    "href": "presentation.html#table-to-points",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Table to Points",
    "text": "Table to Points\n\nTables with longitude and latitude data can be convered into sf objects.\nAddresses needed to be converted to longitude and latitude data before conversion to sf objects. This process is called geocoding.\nst_as_sf(df, coords = c(\"lon\", \"lat\"), crs =crs)"
  },
  {
    "objectID": "presentation.html#table-to-points-1",
    "href": "presentation.html#table-to-points-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Table to Points",
    "text": "Table to Points\n\ncop2020_tract &lt;- read_csv(\"data/US/COP2020/COP2020_tract.txt\")\n\nst_as_sf(cop2020_tract, coords = c(\"LONGITUDE\", \"LATITUDE\"), crs = 4326)\n\n\n\nSimple feature collection with 85395 features and 4 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -175.86 ymin: 17.90163 xmax: -65.30188 ymax: 71.29667\nGeodetic CRS:  WGS 84\n# A tibble: 85,395 × 5\n   STATEFP COUNTYFP TRACTCE POPULATION             geometry\n * &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;          &lt;POINT [°]&gt;\n 1 01      001      020100        1775  (-86.4866 32.47682)\n 2 01      001      020200        2055  (-86.47259 32.4719)\n 3 01      001      020300        3216 (-86.45925 32.47458)\n 4 01      001      020400        4246 (-86.44299 32.46866)\n 5 01      001      020501        4322 (-86.42442 32.45153)\n 6 01      001      020502        3284 (-86.41773 32.46832)\n 7 01      001      020503        3616 (-86.42498 32.47547)\n 8 01      001      020600        3729 (-86.47658 32.44332)\n 9 01      001      020700        3409 (-86.44874 32.44379)\n10 01      001      020801        3143 (-86.52377 32.44077)\n# ℹ 85,385 more rows"
  },
  {
    "objectID": "presentation.html#spatial-joins",
    "href": "presentation.html#spatial-joins",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Spatial Joins",
    "text": "Spatial Joins\n\nJoins on a spatial relationship, including\n\nst_intersects()\nst_contains()\nst_is_within_distance()\n\nTakes geometry from first sf object\nst_join(sf1, sf2, join = One of above)"
  },
  {
    "objectID": "presentation.html#spatial-joins-1",
    "href": "presentation.html#spatial-joins-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Spatial Joins",
    "text": "Spatial Joins\n\nAZ_hosp &lt;- st_read(\"data/AZ/hospitals\")\nAZ_statAreas &lt;- st_read(\"data/AZ/statAreas.gdb\", layer = \"statAreas\")\n\nst_join(AZ_hosp, AZ_statAreas)\n\n\n\nSimple feature collection with 157 features and 60 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -114.6334 ymin: 31.341 xmax: -109.04 ymax: 36.91705\nGeodetic CRS:  WGS 84\nFirst 10 features:\n   OBJECTID OBJECTID_1   RUN_DATE source BUREAU     FACID\n1         1       2822 2024-05-06  ASPEN    MED AZTH00002\n2         2       2823 2024-05-06  ASPEN    MED AZTH00003\n3         3       2824 2024-05-06  ASPEN    MED AZTH00004\n4         4       3774 2024-05-06  ASPEN    MED    BH7347\n5         5       4893 2024-05-06  ASPEN    MED   MED0198\n6         6       4894 2024-05-06  ASPEN    MED   MED0201\n7         7       4895 2024-05-06  ASPEN    MED   MED0203\n8         8       4896 2024-05-06  ASPEN    MED   MED0204\n9         9       4901 2024-05-06  ASPEN    MED   MED0209\n10       10       4902 2024-05-06  ASPEN    MED   MED0211\n                                          FACILITY_N LICENSE_NU LICENSE_EF\n1         BANNER- UNIVERSITY  MEDICAL CENTER PHOENIX       &lt;NA&gt;       &lt;NA&gt;\n2  BANNER UNIVERSITY MEDICAL CTR AT THE AZ HEALTH SC       &lt;NA&gt;       &lt;NA&gt;\n3                               MAYO CLINIC HOSPITAL       &lt;NA&gt;       &lt;NA&gt;\n4                      VIA LINDA BEHAVIORAL HOSPITAL    SH11520 2023-03-01\n5                        CANYON VISTA MEDICAL CENTER      H7130 2020-02-18\n6                           FLAGSTAFF MEDICAL CENTER      H0169 2020-12-01\n7                                      PAGE HOSPITAL      H0086 2022-01-06\n8                       BANNER PAYSON MEDICAL CENTER      H7250 2021-10-15\n9                            ABRAZO ARROWHEAD CAMPUS      H0175 2021-12-01\n10                 BANNER BEHAVIORAL HEALTH HOSPITAL     SH0147 2021-02-01\n   LICENSE_EX MEDICARE_I MEDICARE_1 MEDICARE_2     TELEPHONE FACILITY_T\n1        &lt;NA&gt;     039802       &lt;NA&gt;       &lt;NA&gt; (602)239-2716         NA\n2        &lt;NA&gt;     039800       &lt;NA&gt;       &lt;NA&gt; (520)694-0111         NA\n3        &lt;NA&gt;     039801       &lt;NA&gt;       &lt;NA&gt; (480)342-1900         NA\n4  2025-02-28     034040       &lt;NA&gt;       &lt;NA&gt; (480)476-7000         12\n5  2024-12-27     030043       &lt;NA&gt;       &lt;NA&gt; (520)263-2220         11\n6  2024-11-30     030023       &lt;NA&gt;       &lt;NA&gt; (928)779-3366         11\n7  2024-12-28     031304       &lt;NA&gt;       &lt;NA&gt; (928)645-2424         14\n8  2024-12-24     031318       &lt;NA&gt;       &lt;NA&gt; (928)471-3222         14\n9  2024-12-27     030094       &lt;NA&gt;       &lt;NA&gt; (623)561-1000         11\n10 2024-12-24     034004       &lt;NA&gt;       &lt;NA&gt; (480)448-7500         12\n       TYPE                   SUBTYPE CATEGORY ICON_CATEG\n1  HOSPITAL                TRANSPLANT HOSPITAL   HOSPITAL\n2  HOSPITAL                TRANSPLANT HOSPITAL   HOSPITAL\n3  HOSPITAL                TRANSPLANT HOSPITAL   HOSPITAL\n4  HOSPITAL               PSYCHIATRIC HOSPITAL   HOSPITAL\n5  HOSPITAL                SHORT TERM HOSPITAL   HOSPITAL\n6  HOSPITAL                SHORT TERM HOSPITAL   HOSPITAL\n7  HOSPITAL CRITICAL ACCESS HOSPITALS HOSPITAL   HOSPITAL\n8  HOSPITAL CRITICAL ACCESS HOSPITALS HOSPITAL   HOSPITAL\n9  HOSPITAL                SHORT TERM HOSPITAL   HOSPITAL\n10 HOSPITAL               PSYCHIATRIC HOSPITAL   HOSPITAL\n                             MEDICARE_T   LICENSE_TY         LICENSE_SU\n1        HOSPITAL - TRANSPLANT HOSPITAL FEDERAL ONLY               &lt;NA&gt;\n2        HOSPITAL - TRANSPLANT HOSPITAL FEDERAL ONLY               &lt;NA&gt;\n3        HOSPITAL - TRANSPLANT HOSPITAL FEDERAL ONLY               &lt;NA&gt;\n4                HOSPITAL - PSYCHIATRIC     HOSPITAL HOSPITAL - SPECIAL\n5                 HOSPITAL - SHORT TERM     HOSPITAL HOSPITAL - GENERAL\n6                 HOSPITAL - SHORT TERM     HOSPITAL HOSPITAL - GENERAL\n7  HOSPITAL - CRITICAL ACCESS HOSPITALS     HOSPITAL HOSPITAL - GENERAL\n8  HOSPITAL - CRITICAL ACCESS HOSPITALS     HOSPITAL HOSPITAL - GENERAL\n9                 HOSPITAL - SHORT TERM     HOSPITAL HOSPITAL - GENERAL\n10               HOSPITAL - PSYCHIATRIC     HOSPITAL HOSPITAL - SPECIAL\n   CAPACITY                    ADDRESS         CITY   ZIP   COUNTY OPERATION_\n1         0                1441 N 12TH      PHOENIX 85006 MARICOPA     ACTIVE\n2         0 1501 NORTH CAMPBELL AVENUE       TUCSON 85724     PIMA     ACTIVE\n3         0   5777 EAST MAYO BOULEVARD      PHOENIX 85054 MARICOPA     ACTIVE\n4       120     9160 EAST HORSESHOE RD   SCOTTSDALE 85258 MARICOPA     ACTIVE\n5       100       5700 EAST HIGHWAY 90 SIERRA VISTA 85635  COCHISE     ACTIVE\n6       268   1200 NORTH BEAVER STREET    FLAGSTAFF 86001 COCONINO     ACTIVE\n7        25     501 NORTH NAVAJO DRIVE         PAGE 86040 COCONINO     ACTIVE\n8        25  807 SOUTH PONDEROSA DRIVE       PAYSON 85541     GILA     ACTIVE\n9       229    18701 NORTH 67TH AVENUE     GLENDALE 85308 MARICOPA     ACTIVE\n10      156      7575 EAST EARLL DRIVE   SCOTTSDALE 85251 MARICOPA     ACTIVE\n   X_Is_Publi HOSPITAL_G     KeyID ADHSCODE N_AddressT     N_LocatorT\n1         Yes       &lt;NA&gt; AZTH00002        A        AS0 CENTRUS-TOMTOM\n2         Yes       &lt;NA&gt; AZTH00003        A        AS0 CENTRUS-TOMTOM\n3         Yes       &lt;NA&gt; AZTH00004        A        AS0 CENTRUS-TOMTOM\n4         Yes       &lt;NA&gt;    BH7347        A        AS0 CENTRUS-TOMTOM\n5         Yes       &lt;NA&gt;   MED0198        A        AS0 CENTRUS-TOMTOM\n6         Yes       &lt;NA&gt;   MED0201        A        AS0 CENTRUS-TOMTOM\n7         Yes       &lt;NA&gt;   MED0203        A        AS0 CENTRUS-TOMTOM\n8         Yes       &lt;NA&gt;   MED0204        A        AS0 CENTRUS-TOMTOM\n9         Yes       &lt;NA&gt;   MED0209        A        AS0 CENTRUS-TOMTOM\n10        Yes       &lt;NA&gt;   MED0211        A        AS0 CENTRUS-TOMTOM\n             N_ADDRESS N_ADDR2       N_CITY        N_COUNTY\n1       1441 N 12TH ST    &lt;NA&gt;      PHOENIX MARICOPA COUNTY\n2  1501 N CAMPBELL AVE    &lt;NA&gt;       TUCSON     PIMA COUNTY\n3     5777 E MAYO BLVD    &lt;NA&gt;      PHOENIX MARICOPA COUNTY\n4  9160 E HORSESHOE RD    &lt;NA&gt;   SCOTTSDALE MARICOPA COUNTY\n5    5700 E HIGHWAY 90    &lt;NA&gt; SIERRA VISTA  COCHISE COUNTY\n6     1200 N BEAVER ST    &lt;NA&gt;    FLAGSTAFF COCONINO COUNTY\n7      501 N NAVAJO DR    &lt;NA&gt;         PAGE COCONINO COUNTY\n8   807 S PONDEROSA ST    &lt;NA&gt;       PAYSON     GILA COUNTY\n9     18701 N 67TH AVE    &lt;NA&gt;     GLENDALE MARICOPA COUNTY\n10     7575 E EARLL DR    &lt;NA&gt;   SCOTTSDALE MARICOPA COUNTY\n                                         N_FULLADDR    N_LAT     N_LON N_STATE\n1          1441 N 12TH ST , PHOENIX, AZ  85006-2837 33.46410 -112.0562      AZ\n2      1501 N CAMPBELL AVE , TUCSON, AZ  85724-0001 32.24080 -110.9443      AZ\n3        5777 E MAYO BLVD , PHOENIX, AZ  85054-4502 33.66316 -111.9557      AZ\n4  9160 E HORSESHOE RD , SCOTTSDALE, AZ  85258-4666 33.56670 -111.8840      AZ\n5  5700 E HIGHWAY 90 , SIERRA VISTA, AZ  85635-9110 31.55449 -110.2319      AZ\n6      1200 N BEAVER ST , FLAGSTAFF, AZ  86001-3118 35.20949 -111.6447      AZ\n7            501 N NAVAJO DR , PAGE, AZ  86040-0959 36.91705 -111.4634      AZ\n8       807 S PONDEROSA ST , PAYSON, AZ  85541-5542 34.23130 -111.3212      AZ\n9       18701 N 67TH AVE , GLENDALE, AZ  85308-7100 33.65504 -112.2027      AZ\n10     7575 E EARLL DR , SCOTTSDALE, AZ  85251-6915 33.48385 -111.9183      AZ\n   N_ZIP N_ZIP4      N_BLOCK             RESERVATIO RESERV_ID    R_METHOD\n1  85006   2837 4.013113e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n2  85724      1 4.019002e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n3  85054   4502 4.013615e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n4  85258   4666 4.013941e+13 Salt River Reservation     3340F Coordinates\n5  85635   9110 4.003002e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n6  86001   3118 4.005000e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n7  86040    959 4.005002e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n8  85541   5542 4.007001e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n9  85308   7100 4.013616e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n10 85251   6915 4.013218e+13                   &lt;NA&gt;      &lt;NA&gt;        &lt;NA&gt;\n                                        oPCA oPCA_ID    P_Method P_Reliable\n1                       CENTRAL CITY VILLAGE      39 Coordinates       &lt;NA&gt;\n2                             TUCSON CENTRAL     107 Coordinates       &lt;NA&gt;\n3                        DESERT VIEW VILLAGE      30 Coordinates       &lt;NA&gt;\n4  SALT RIVER PIMA-MARICOPA INDIAN COMMUNITY      62 Coordinates       &lt;NA&gt;\n5                               SIERRA VISTA     123 Coordinates       &lt;NA&gt;\n6                                  FLAGSTAFF      10 Coordinates       &lt;NA&gt;\n7                                       PAGE       7 Coordinates       &lt;NA&gt;\n8                                     PAYSON      23 Coordinates       &lt;NA&gt;\n9                             GLENDALE NORTH      56 Coordinates       &lt;NA&gt;\n10                          SCOTTSDALE SOUTH      45 Coordinates       &lt;NA&gt;\n                         SOURCE_VW CASELOAD CSA_ID\n1  Tableau.vw_licensing_facilities     &lt;NA&gt;     47\n2  Tableau.vw_licensing_facilities     &lt;NA&gt;    121\n3  Tableau.vw_licensing_facilities     &lt;NA&gt;     37\n4  Tableau.vw_licensing_facilities     &lt;NA&gt;     72\n5  Tableau.vw_licensing_facilities     &lt;NA&gt;    135\n6  Tableau.vw_licensing_facilities     &lt;NA&gt;     11\n7  Tableau.vw_licensing_facilities     &lt;NA&gt;      8\n8  Tableau.vw_licensing_facilities     &lt;NA&gt;     30\n9  Tableau.vw_licensing_facilities     &lt;NA&gt;     65\n10 Tableau.vw_licensing_facilities     &lt;NA&gt;     54\n                                    CSA_NAME AREA_SQMILE POP2020  Shape__Area\n1                     Phoenix - Central City    26.06187   62645    726562975\n2                             Tucson - North    31.92997  124515    890156111\n3                      Phoenix - Desert View    62.87998   61105   1752992698\n4  Salt River Pima-Maricopa Indian Community    84.99103    6334   2369413211\n5                               Sierra Vista   708.44630   56911  19750344116\n6                                  Flagstaff  4579.81300   88600 127677843904\n7                                       Page  3160.98200    9375  88123101547\n8                                     Payson  2106.17700   28134  58716828639\n9                           Glendale - North    26.11177   90431    727954288\n10                        Scottsdale - South    16.24433   84604    452865825\n   Shape__Length                   geometry\n1       147316.9 POINT (-112.0562 33.46411)\n2       174100.1 POINT (-110.9443 32.24081)\n3       222767.7 POINT (-111.9557 33.66317)\n4       259861.9  POINT (-111.884 33.56671)\n5       905907.7  POINT (-110.2319 31.5545)\n6      3525132.7 POINT (-111.6447 35.20949)\n7      2193590.5 POINT (-111.4634 36.91705)\n8      1943665.6  POINT (-111.3212 34.2313)\n9       150309.6 POINT (-112.2027 33.65505)\n10      108575.4 POINT (-111.9183 33.48386)"
  },
  {
    "objectID": "presentation.html#spatial-join-summarize",
    "href": "presentation.html#spatial-join-summarize",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Spatial Join + Summarize",
    "text": "Spatial Join + Summarize\n\nst_join(AZ_hosp, AZ_statAreas) %&gt;%\n    group_by(CSA_ID) %&gt;%\n    summarize(count = n(), POP2020 = first(POP2020)) %&gt;%\n    mutate(countPerHunThoP = 100000 * count / POP2020)\n\nSimple feature collection with 81 features and 4 fields\nGeometry type: GEOMETRY\nDimension:     XY\nBounding box:  xmin: -114.6334 ymin: 31.341 xmax: -109.04 ymax: 36.91705\nGeodetic CRS:  WGS 84\n# A tibble: 81 × 5\n   CSA_ID count POP2020                                 geometry countPerHunThoP\n *  &lt;int&gt; &lt;int&gt;   &lt;int&gt;                           &lt;GEOMETRY [°]&gt;           &lt;dbl&gt;\n 1      4     2   54625 MULTIPOINT ((-114.0359 35.21854), (-113…            3.66\n 2      5     2   41406 MULTIPOINT ((-114.5982 35.10075), (-114…            4.83\n 3      6     1   25119               POINT (-114.5978 35.00245)            3.98\n 4      7     1   60701               POINT (-114.3387 34.47989)            1.65\n 5      8     1    9375               POINT (-111.4634 36.91705)           10.7 \n 6      9     2   90302 MULTIPOINT ((-109.59 36.14001), (-109.5…            2.21\n 7     11     3   88600 MULTIPOINT ((-111.6062 35.20678), (-111…            3.39\n 8     12     2   10321 MULTIPOINT ((-110.42 35.80001), (-111.2…           19.4 \n 9     15     1   16962               POINT (-110.6919 35.03552)            5.90\n10     17     2   29859 MULTIPOINT ((-109.9751 34.16484), (-110…            6.70\n# ℹ 71 more rows"
  },
  {
    "objectID": "presentation.html#buffers",
    "href": "presentation.html#buffers",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Buffers",
    "text": "Buffers\n\nGives as the crow flies distance around a point, line or polygon\nBenefits greatly from a good projection\nCan help us get at questions of access\nst_buffer(sf1, distance )"
  },
  {
    "objectID": "presentation.html#buffers-1",
    "href": "presentation.html#buffers-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Buffers",
    "text": "Buffers\n\nAZ_hosp %&gt;%\n    st_transform(\"EPSG:26949\") %&gt;%\n    st_buffer(units::as_units(10, \"mi\")) %&gt;%\n    ggplot() +\n        geom_sf(data = AZ_statAreas) +\n        geom_sf(fill = \"red\")"
  },
  {
    "objectID": "presentation.html#distance",
    "href": "presentation.html#distance",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Distance",
    "text": "Distance\n\nAllows us to tell how far two locations are\nCan help us get at questions of access\nBy default, will generate distances between every element of one sf to another\nst_distance(sf1, sf2, by_element = TRUE/FALSE )"
  },
  {
    "objectID": "presentation.html#distance-matrix",
    "href": "presentation.html#distance-matrix",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Distance Matrix",
    "text": "Distance Matrix\n\nread_csv(\"data/US/COP2020/COP2020_tract.txt\") %&gt;%\n    filter(STATEFP == \"04\") %&gt;%\n    st_as_sf(coords = c(\"LONGITUDE\", \"LATITUDE\"), crs = 4326) %&gt;%\n    st_distance(., AZ_hosp) %&gt;%\n    head()\n\nUnits: [m]\n         [,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]     [,8]\n[1,] 418834.8 513413.9 394927.7 401342.2 580851.5 237198.5 144967.4 312153.8\n[2,] 442157.8 524284.0 418543.8 423948.9 585561.1 269397.1 188378.8 333760.8\n[3,] 374473.8 429418.4 352467.7 355090.9 481961.5 240075.2 247279.7 266714.7\n[4,] 411224.3 484801.1 388013.6 392518.2 543509.6 249879.8 203963.1 302232.5\n[5,] 375571.1 454554.7 352226.4 357013.0 517079.5 213458.0 185629.9 266685.4\n[6,] 378943.7 455596.3 355691.1 360286.5 517005.9 218844.0 191983.3 269977.8\n         [,9]    [,10]    [,11]    [,12]    [,13]    [,14]    [,15]    [,16]\n[1,] 407064.0 411000.9 418508.9 415022.4 418765.5 401926.9 419477.3 419011.2\n[2,] 432334.1 433450.8 440203.7 441386.5 442107.7 426685.4 442646.6 441275.4\n[3,] 370145.0 363863.7 368538.6 381909.9 374474.5 363319.9 374554.8 370965.1\n[4,] 403209.3 401830.4 407926.3 413249.6 411191.1 397124.0 411578.4 409455.4\n[5,] 367076.2 366395.4 372733.7 376925.1 375532.7 361087.8 375967.3 374094.9\n[6,] 370812.4 369624.9 375816.6 380840.0 378908.8 364742.6 379311.5 377278.7\n        [,17]    [,18]    [,19]    [,20]    [,21]    [,22]    [,23]    [,24]\n[1,] 410801.4 415688.1 462340.2 479213.2 414507.0 515745.6 511192.3 513245.8\n[2,] 433302.9 441213.3 503204.4 517404.3 455078.6 527002.8 521601.9 524119.3\n[3,] 363849.6 379399.9 500799.9 498919.0 452229.4 432706.6 426063.2 429260.9\n[4,] 401726.5 412271.1 496611.6 504673.4 447990.4 487701.3 481906.5 484638.3\n[5,] 366276.3 376103.3 462953.0 469183.9 414255.2 457252.1 451906.3 454389.7\n[6,] 369515.4 379870.1 469230.7 475017.2 420525.0 458361.3 452867.2 455432.0\n        [,25]    [,26]    [,27]    [,28]    [,29]    [,30]    [,31]    [,32]\n[1,] 464652.3 299981.1 510752.5 418248.8 505678.9 420970.6 414545.3 511192.3\n[2,] 483027.8 330919.8 521202.6 441809.4 517218.3 441358.9 439951.5 521601.9\n[3,] 402650.7 291501.4 425730.9 374746.0 423505.7 366566.1 377856.1 426063.2\n[4,] 448060.4 308804.8 481527.2 411083.4 478080.6 408051.8 410905.1 481906.5\n[5,] 414154.5 272085.1 451503.5 375367.4 447454.6 373286.0 374759.0 451906.3\n[6,] 416581.9 277040.4 452471.9 378783.0 448620.7 376131.0 378506.6 452867.2\n        [,33]    [,34]    [,35]    [,36]    [,37]    [,38]    [,39]    [,40]\n[1,] 416609.9 418248.8 466325.2 512493.3 418765.5 506313.1 418248.8 416609.9\n[2,] 439907.0 441809.4 507210.1 522549.7 442107.7 517823.8 441809.4 439907.0\n[3,] 372232.9 374746.0 504835.5 426465.1 374474.5 424056.7 374746.0 372232.9\n[4,] 408964.5 411083.4 500652.9 482687.9 411191.1 478670.3 411083.4 408964.5\n[5,] 373312.7 375367.4 466999.6 452886.9 375532.7 448061.2 375367.4 373312.7\n[6,] 376684.1 378783.0 473277.8 453784.1 378908.8 449221.8 378783.0 376684.1\n        [,41]    [,42]    [,43]    [,44]    [,45]    [,46]    [,47]      [,48]\n[1,] 422789.4 414206.8 410709.5 432473.6 520064.2 493167.6 321776.9 134282.591\n[2,] 446152.4 434813.9 433243.2 457741.8 530705.7 504484.5 326473.0 116905.672\n[3,] 378436.9 360737.2 363872.1 394660.3 435404.2 410601.2 226480.9   5686.274\n[4,] 415229.9 401710.3 401694.0 428458.7 491098.6 465269.2 285019.9  73038.156\n[5,] 379575.6 366851.1 366234.5 392374.1 460993.8 434727.7 257715.0  69223.198\n[6,] 382949.1 369745.5 369479.5 396069.5 461990.6 435862.7 257770.8  63856.791\n        [,49]    [,50]    [,51]    [,52]    [,53]    [,54]    [,55]    [,56]\n[1,] 142571.2 446391.6 390185.8 322428.9 583224.2 340912.5 520338.0 416255.0\n[2,] 181868.2 465793.9 398746.0 326998.0 588748.4 373017.3 531261.2 439796.5\n[3,] 195526.5 388069.2 302508.2 226812.7 486042.8 334930.2 436386.8 372752.7\n[4,] 176487.0 431630.6 358570.5 285495.4 546961.8 351878.2 491787.4 409066.0\n[5,] 145427.5 397285.5 329207.6 258280.3 520015.9 315196.5 461529.8 373350.1\n[6,] 152056.0 399918.7 329926.1 258310.8 520083.6 320236.9 462576.6 376765.5\n        [,57]    [,58]    [,59]    [,60]    [,61]    [,62]    [,63]    [,64]\n[1,] 595016.7 417683.1 329530.0 612145.0 424412.6 408594.4 289743.3 416519.3\n[2,] 597203.6 443984.0 361276.9 621512.0 444759.8 428336.3 295120.2 439810.7\n[3,] 490990.8 384234.7 322617.8 523438.0 369767.5 352474.2 197262.5 372125.4\n[4,] 554410.4 415768.8 339804.8 581161.2 411403.2 394614.2 254098.7 408863.9\n[5,] 529681.0 379459.5 303107.3 551961.2 376661.6 360032.2 226102.4 373213.4\n[6,] 529167.0 383359.1 308115.6 552689.7 379494.1 362779.4 226331.3 376583.9\n        [,65]    [,66]    [,67]    [,68]    [,69]    [,70]    [,71]    [,72]\n[1,] 416952.9 410333.6 402240.8 421187.3 422655.2 510575.8 431874.4 415338.0\n[2,] 439817.6 450830.6 424863.9 446330.3 443911.8 520959.6 455552.3 441410.1\n[3,] 371051.3 447644.8 356013.9 383292.5 371076.7 425390.1 388338.9 381109.3\n[4,] 408507.2 443578.7 393441.2 416998.5 411264.4 481253.6 424849.0 412989.1\n[5,] 372972.1 409796.0 357933.9 380919.3 376219.5 451266.1 389134.0 376716.8\n[6,] 376266.1 416058.1 361208.9 384610.0 379217.6 452222.7 392549.6 380580.1\n        [,73]    [,74]    [,75]    [,76]    [,77]     [,78]    [,79]    [,80]\n[1,] 512021.2 330364.5 514631.2 415217.7 437196.7 120824.18 297467.6 535802.3\n[2,] 522238.6 362064.6 525092.4 441316.0 454635.9 119074.53 293415.5 541438.3\n[3,] 426400.2 323193.1 429587.1 381092.2 372992.6  41594.13 184465.8 439221.1\n[4,] 482451.9 340524.7 485413.1 412920.9 419153.1  77925.82 249728.6 499755.5\n[5,] 452560.2 303823.1 455393.4 376643.7 385539.7  52026.30 228976.5 472644.2\n[6,] 453486.3 308821.6 456361.4 380511.8 387831.3  50845.01 227339.2 472746.4\n        [,81]    [,82]    [,83]    [,84]    [,85]    [,86]    [,87]    [,88]\n[1,] 500823.0 383997.5 438936.7 497415.3 418836.9 409309.1 418088.5 399306.2\n[2,] 502990.0 396960.4 440393.2 534072.7 441901.9 433241.0 441175.8 421915.0\n[3,] 397316.3 308182.8 334549.1 507782.8 373570.8 367440.2 372925.4 353137.4\n[4,] 460291.6 359005.2 397597.2 518476.8 410749.1 402893.0 410046.1 390499.2\n[5,] 435402.3 327216.3 373051.5 482381.6 375164.3 367063.6 374453.6 354987.7\n[6,] 434901.8 328759.7 372438.3 487944.9 378491.0 370559.6 377785.4 358265.2\n        [,89]    [,90]    [,91]    [,92]    [,93]    [,94]    [,95]    [,96]\n[1,] 414984.7 399873.8 410174.4 409270.2 411605.2 285790.5 207238.4 506081.8\n[2,] 438915.5 422572.2 435056.1 429662.5 436629.5 291830.0 227426.2 517630.0\n[3,] 372911.1 353995.5 371711.8 355254.0 373613.4 195156.3 167447.9 423925.8\n[4,] 408531.5 391227.4 405553.4 396423.4 407248.3 251102.9 196417.9 478495.7\n[5,] 372715.4 355692.9 369508.1 361620.4 371175.3 222637.9 160536.8 447866.1\n[6,] 376201.9 358985.3 373170.6 364483.9 374860.6 223005.0 164053.8 449033.5\n        [,97]    [,98]    [,99]   [,100]   [,101]   [,102]   [,103]   [,104]\n[1,] 513523.9 342156.5 630527.1 506063.7 515536.1 429635.8 235074.2 520620.7\n[2,] 523714.5 374491.3 662528.0 517583.5 525028.5 454531.4 266958.4 530025.2\n[3,] 427816.9 337143.1 615179.9 423834.3 428079.4 390549.9 236804.3 432888.5\n[4,] 483912.1 353634.9 639648.8 478435.1 484905.7 424922.6 247084.4 489852.5\n[5,] 454039.1 316971.8 602897.2 447820.6 455429.8 388913.1 210619.2 460439.5\n[6,] 454959.5 322047.3 607561.0 448982.9 456224.8 392547.2 215966.9 461215.9\n       [,105]   [,106]   [,107]   [,108]   [,109]   [,110]   [,111]   [,112]\n[1,] 394927.7 414129.8 427831.6 399012.4 409191.3 406292.6 630337.0 416952.9\n[2,] 418543.8 438081.6 449113.9 422811.4 429565.2 436473.2 662329.1 439817.6\n[3,] 352467.7 372160.9 376178.3 357048.5 355117.3 388791.4 614954.1 371051.3\n[4,] 388013.6 407721.1 416458.6 392413.4 396312.8 412440.1 639439.6 408507.2\n[5,] 352226.4 371898.0 381419.9 356591.6 361515.6 375700.7 602688.1 372972.1\n[6,] 355691.1 375389.6 384415.0 360081.5 364375.9 380290.2 607350.4 376266.1\n       [,113]    [,114]   [,115]   [,116]   [,117]   [,118]   [,119]   [,120]\n[1,] 426473.8 119382.28 497802.6 570913.2 415236.0 425087.9 518777.5 420279.0\n[2,] 451212.1 144098.59 534546.1 587439.6 438661.8 450709.2 528970.1 440120.2\n[3,] 386919.4 120154.44 508633.9 501482.2 371359.9 388828.4 433009.3 364111.0\n[4,] 421478.8 121079.19 519094.7 550920.4 407837.8 421799.2 489156.7 406407.4\n[5,] 385498.1  84616.82 483024.9 518028.2 372149.2 385629.4 459295.9 371827.8\n[6,] 389109.3  90076.99 488602.1 520034.5 375545.7 389398.1 460213.7 374575.4\n       [,121]   [,122]    [,123]   [,124]   [,125]   [,126]   [,127]   [,128]\n[1,] 604048.2 340848.2 73500.537 470984.0 412865.9 413454.5 392788.6 413137.1\n[2,] 636008.0 372959.5 73190.757 511545.7 434334.9 438259.8 416196.4 433653.7\n[3,] 588973.4 334898.9 60132.588 506856.5 362318.3 374594.0 349671.3 359403.6\n[4,] 613160.8 351829.3 38508.305 504107.5 401910.1 408666.6 385500.3 400487.1\n[5,] 576408.4 315148.2  4054.704 470144.3 366770.9 372644.7 349759.7 365654.6\n[6,] 581083.7 320189.9  6363.175 476367.9 369822.1 376288.3 353191.1 368534.4\n       [,129]   [,130]   [,131]   [,132]   [,133]   [,134]   [,135]   [,136]\n[1,] 341697.1 413279.4 423761.5 414828.6 424995.4 434088.0 418672.9 406570.3\n[2,] 373959.9 433703.6 445789.8 437888.4 443584.3 459372.5 441767.4 425944.4\n[3,] 336383.3 359236.7 374754.7 369680.0 364687.6 396282.4 373515.1 349327.7\n[4,] 353015.2 400466.0 413751.0 406754.9 408945.0 430095.2 410640.3 391964.1\n[5,] 316346.2 365664.8 378472.3 371161.6 374838.6 394010.2 375047.3 357506.0\n[6,] 321410.8 368527.7 381606.7 374493.7 377353.7 397706.1 378379.4 360189.9\n       [,137]   [,138]   [,139]   [,140]   [,141]   [,142]   [,143]   [,144]\n[1,] 400647.9 429297.9 426780.5 413498.4 236357.9 419164.4 391066.6 428519.3\n[2,] 425448.4 454154.7 448038.8 433230.7 268451.7 442526.6 416556.4 449616.1\n[3,] 362243.2 390081.6 375078.9 357189.0 238865.6 374930.4 355587.4 376225.6\n[4,] 395933.7 424512.6 415370.1 399474.1 248817.4 411624.7 387746.1 416812.1\n[5,] 359885.7 388510.9 380336.2 364911.4 212381.4 375962.1 351537.5 381834.6\n[6,] 363550.1 392138.7 383328.6 367649.4 217755.2 379341.0 355340.7 384795.5\n       [,145]   [,146]   [,147]   [,148]   [,149]   [,150]   [,151]   [,152]\n[1,] 505678.9 382301.6 419133.9 503205.0 424843.1 415085.8 419343.1 418529.5\n[2,] 517218.3 406733.7 439088.2 515392.5 445132.7 440455.8 445902.2 441840.6\n[3,] 423505.7 343289.4 363368.4 422760.8 369996.1 378243.5 386816.9 374136.7\n[4,] 478080.6 377013.8 405465.4 476588.5 411730.3 411372.4 417928.0 410898.7\n[5,] 447454.6 341003.9 370842.8 445615.9 377009.6 375234.6 381577.1 375247.8\n[6,] 448620.7 344636.9 373612.4 446899.5 379831.1 378975.0 385519.2 378618.7\n       [,153]   [,154]   [,155]   [,156]   [,157]\n[1,] 545155.3 419347.1 623743.6 459359.3 413416.5\n[2,] 555740.3 442559.7 655380.5 480771.0 433997.3\n[3,] 460053.8 374580.8 606903.8 407244.1 359885.8\n[4,] 516052.6 411529.0 632069.0 448059.8 400878.2\n[5,] 486038.4 375906.1 595324.9 413060.6 366025.2\n[6,] 487011.1 379258.2 599930.5 416036.4 368916.1"
  },
  {
    "objectID": "presentation.html#distance-1",
    "href": "presentation.html#distance-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Distance",
    "text": "Distance\n\nread_csv(\"data/US/COP2020/COP2020_tract.txt\") %&gt;%\n    filter(STATEFP == \"04\") %&gt;%\n    st_as_sf(coords = c(\"LONGITUDE\", \"LATITUDE\"), crs = 4326) %&gt;%\n    mutate(nearest = st_nearest_feature(., AZ_hosp)) %&gt;% \n    mutate(distance = st_distance(., AZ_hosp[nearest,], by_element = TRUE))\n\nSimple feature collection with 1765 features and 6 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -114.7927 ymin: 31.33967 xmax: -109.0779 ymax: 36.98995\nGeodetic CRS:  WGS 84\n# A tibble: 1,765 × 7\n   STATEFP COUNTYFP TRACTCE POPULATION             geometry nearest\n * &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;        &lt;dbl&gt;          &lt;POINT [°]&gt;   &lt;int&gt;\n 1 04      001      942600        1549 (-109.8449 36.76841)     123\n 2 04      001      942700        4491 (-109.3544 36.77035)     123\n 3 04      001      944000        5348  (-109.088 35.78314)      48\n 4 04      001      944100        5495 (-109.2781 36.37803)     123\n 5 04      001      944201        4021 (-109.6018 36.17521)     123\n 6 04      001      944202        3608 (-109.5276 36.16716)     123\n 7 04      001      944301        3789 (-109.7019 36.34859)     123\n 8 04      001      944302        2685 (-109.6809 36.00098)     123\n 9 04      001      944901        3369 (-109.4626 35.66766)      78\n10 04      001      944902        4201 (-109.7004 35.67758)      78\n# ℹ 1,755 more rows\n# ℹ 1 more variable: distance [m]"
  },
  {
    "objectID": "presentation.html#geocoding",
    "href": "presentation.html#geocoding",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Geocoding",
    "text": "Geocoding\n\nAllows us to retrieve coordinates for addresses\nInterfaces with multiple geocoders\nDO NOT use an non-compliant geocoder for private data\n\nGeocodio has a paid HIPPA compliant geocoder\n\nAddresses are sufficient information to reidentify individuals\nWe can use the tidygeocoder package to geocode addresses"
  },
  {
    "objectID": "presentation.html#geocoding-1",
    "href": "presentation.html#geocoding-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Geocoding",
    "text": "Geocoding\n\nlibrary(tidygeocoder)\n\nAZ_hosp %&gt;%\n    mutate(addr = \n        str_c(ADDRESS, \", \", CITY, \", AZ \", ZIP)) %&gt;%\n    slice_head(n = 5) %&gt;%\n    geocode(addr, method = \"osm\")\n\n# A tibble: 5 × 58\n  OBJECTID OBJECTID_1 RUN_DATE   source BUREAU FACID     FACILITY_N   LICENSE_NU\n     &lt;int&gt;      &lt;int&gt; &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;     \n1        1       2822 2024-05-06 ASPEN  MED    AZTH00002 BANNER- UNI… &lt;NA&gt;      \n2        2       2823 2024-05-06 ASPEN  MED    AZTH00003 BANNER UNIV… &lt;NA&gt;      \n3        3       2824 2024-05-06 ASPEN  MED    AZTH00004 MAYO CLINIC… &lt;NA&gt;      \n4        4       3774 2024-05-06 ASPEN  MED    BH7347    VIA LINDA B… SH11520   \n5        5       4893 2024-05-06 ASPEN  MED    MED0198   CANYON VIST… H7130     \n# ℹ 50 more variables: LICENSE_EF &lt;date&gt;, LICENSE_EX &lt;date&gt;, MEDICARE_I &lt;chr&gt;,\n#   MEDICARE_1 &lt;chr&gt;, MEDICARE_2 &lt;chr&gt;, TELEPHONE &lt;chr&gt;, FACILITY_T &lt;int&gt;,\n#   TYPE &lt;chr&gt;, SUBTYPE &lt;chr&gt;, CATEGORY &lt;chr&gt;, ICON_CATEG &lt;chr&gt;,\n#   MEDICARE_T &lt;chr&gt;, LICENSE_TY &lt;chr&gt;, LICENSE_SU &lt;chr&gt;, CAPACITY &lt;int&gt;,\n#   ADDRESS &lt;chr&gt;, CITY &lt;chr&gt;, ZIP &lt;int&gt;, COUNTY &lt;chr&gt;, OPERATION_ &lt;chr&gt;,\n#   X_Is_Publi &lt;chr&gt;, HOSPITAL_G &lt;chr&gt;, KeyID &lt;chr&gt;, ADHSCODE &lt;chr&gt;,\n#   N_AddressT &lt;chr&gt;, N_LocatorT &lt;chr&gt;, N_ADDRESS &lt;chr&gt;, N_ADDR2 &lt;chr&gt;, …"
  },
  {
    "objectID": "presentation.html#map-making-is-an-art",
    "href": "presentation.html#map-making-is-an-art",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Map making is an art",
    "text": "Map making is an art\n\n\n\nGood map making takes into consideration the\n\naudience\nmedium\nmessage"
  },
  {
    "objectID": "presentation.html#section-508-compliance",
    "href": "presentation.html#section-508-compliance",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Section 508 Compliance",
    "text": "Section 508 Compliance\n\nMake your maps accessible by\n\nUsing a monochromatic color scale (unless appropriate)\n\nProviding descriptive text or alt text\n\nIf possible, including map, description, and data together"
  },
  {
    "objectID": "presentation.html#be-careful-with-location-data",
    "href": "presentation.html#be-careful-with-location-data",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Be Careful With Location Data",
    "text": "Be Careful With Location Data\n\nLocations are often sensitive\nYou can mask locations using\n\nSymbol maps\nDot density maps\nConverting to rates and using a choropleth map\n\n\nProvide Metadata\nIt is a good practice to add the following information to your map:\n\nAuthor\n\nDate\n\nData source and year"
  },
  {
    "objectID": "presentation.html#stop-and-make-some-maps-1",
    "href": "presentation.html#stop-and-make-some-maps-1",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Stop and make some maps",
    "text": "Stop and make some maps\n\nUse a table join to join the Area Deprivation Index to block groups within Arizona. Create a map of Area Deprivation Index at the block group level for the state of Arizona"
  },
  {
    "objectID": "presentation.html#stop-and-make-some-maps-2",
    "href": "presentation.html#stop-and-make-some-maps-2",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Stop and make some maps",
    "text": "Stop and make some maps\n\nCreate a graduated symbol map of the number of WIC Vendors within Arizona counties using quantile breaks. Using cowplot, place a quantile breaks choropleth map of diabetes adjusted prevalence (PLACES) also within Arizona counties."
  },
  {
    "objectID": "presentation.html#stop-and-make-some-maps-3",
    "href": "presentation.html#stop-and-make-some-maps-3",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Stop and make some maps",
    "text": "Stop and make some maps\n\nCreate a continuous choropleth map of distance to the nearest pharmacy at the block group level for Maricopa County"
  },
  {
    "objectID": "presentation.html#stop-and-make-some-maps-4",
    "href": "presentation.html#stop-and-make-some-maps-4",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "Stop and make some maps",
    "text": "Stop and make some maps\n\nEstimate the number of individuals within 15 miles of a hospital.\n\nCreate a buffer around the hospitals\nConvert the centers of population block group table to an sf object\nSpatially join the centers of population to the hospital buffers\nFilter out centers of population not within a buffer, and sum the population\n\n\n\n\n\n\nhttps://ryanzomorrodi.github.io/NAUTraining"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Using GIS to Study Social Determinants of Health with R",
    "section": "",
    "text": "This website contains all the resources for the R trainings for Northern Arizona University on June 6th and 7th 2024.\nSee the following:\n\nPresentation\nNotes\nData"
  }
]